import{O as v,H as o,x as a,P as g,t as i,Q as w,G as u,E as f,R as p}from"./index-Qf_TZWtK.js";async function S(e){const s=sessionStorage.getItem("pw-exp-very-secure-"+e);if(s){if(parseInt(s)<new Date().getTime())return l(e),!1}else return!1;const t=sessionStorage.getItem("pw-very-secure-"+e);if(!t)return l(e),!1;const r=await h(e,t);return r||l(e),r}function G(e,s){sessionStorage.setItem("pw-very-secure-"+e,s);const t=new Date().getTime()+1e3*60*60*23*1;sessionStorage.setItem("pw-exp-very-secure-"+e,t.toString())}function l(e){sessionStorage.removeItem("pw-exp-very-secure-"+e),sessionStorage.removeItem("pw-very-secure-"+e)}async function q(e,s){const t=await v(o(a,"games"),e);return s.gameId=t.id,await v(o(a,"passwords"),s),t.id}async function x(e){return e.updatedAt=new Date().getTime(),await g(i(a,"games",e.id),e),e}async function C(e){try{await w(i(a,"games",e));const s=f(o(a,"passwords"),u("gameId","==",e)),t=await p(s);for(const n of t.docs.map(c=>c.id))await w(i(a,"passwords",n));l(e);const r=f(o(a,"entries"),u("gameId","==",e)),d=await p(r);for(const n of d.docs.map(c=>c.id))await w(i(a,"entries",n));const m=f(o(a,"cards"),u("gameId","==",e)),y=await p(m);for(const n of y.docs.map(c=>c.id))await w(i(a,"cards",n))}catch(s){return console.error("Error deleting game:",s),!1}return!0}async function h(e,s){const t=f(o(a,"passwords"),u("gameId","==",e)),d=(await p(t)).docs.map(m=>m.data());return d.length===0?(console.log("OH GOD! No password found for game:",e),!1):d[0].value===s}export{x as a,q as b,S as c,C as d,G as s,h as v};
