(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function El(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Tt={},pr=[],we=()=>{},eg=()=>!1,Xi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),vl=e=>e.startsWith("onUpdate:"),Ot=Object.assign,Tl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ng=Object.prototype.hasOwnProperty,it=(e,t)=>ng.call(e,t),q=Array.isArray,mr=e=>Bs(e)==="[object Map]",Or=e=>Bs(e)==="[object Set]",Yc=e=>Bs(e)==="[object Date]",Z=e=>typeof e=="function",xt=e=>typeof e=="string",wn=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",uf=e=>(Et(e)||Z(e))&&Z(e.then)&&Z(e.catch),hf=Object.prototype.toString,Bs=e=>hf.call(e),rg=e=>Bs(e).slice(8,-1),ff=e=>Bs(e)==="[object Object]",wl=e=>xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ei=El(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ji=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},sg=/-(\w)/g,He=Ji(e=>e.replace(sg,(t,n)=>n?n.toUpperCase():"")),ig=/\B([A-Z])/g,Mr=Ji(e=>e.replace(ig,"-$1").toLowerCase()),Zi=Ji(e=>e.charAt(0).toUpperCase()+e.slice(1)),Go=Ji(e=>e?`on${Zi(e)}`:""),In=(e,t)=>!Object.is(e,t),vi=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Si=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},bi=e=>{const t=parseFloat(e);return isNaN(t)?e:t},og=e=>{const t=xt(e)?Number(e):NaN;return isNaN(t)?e:t};let Xc;const df=()=>Xc||(Xc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ze(e){if(q(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=xt(r)?ug(r):ze(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(xt(e)||Et(e))return e}const ag=/;(?![^(]*\))/g,lg=/:([^]+)/,cg=/\/\*[^]*?\*\//g;function ug(e){const t={};return e.replace(cg,"").split(ag).forEach(n=>{if(n){const r=n.split(lg);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function to(e){let t="";if(xt(e))t=e;else if(q(e))for(let n=0;n<e.length;n++){const r=to(e[n]);r&&(t+=r+" ")}else if(Et(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const hg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fg=El(hg);function pf(e){return!!e||e===""}function dg(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Us(e[r],t[r]);return n}function Us(e,t){if(e===t)return!0;let n=Yc(e),r=Yc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=wn(e),r=wn(t),n||r)return e===t;if(n=q(e),r=q(t),n||r)return n&&r?dg(e,t):!1;if(n=Et(e),r=Et(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Us(e[o],t[o]))return!1}}return String(e)===String(t)}function Il(e,t){return e.findIndex(n=>Us(n,t))}const Wo=e=>xt(e)?e:e==null?"":q(e)||Et(e)&&(e.toString===hf||!Z(e.toString))?JSON.stringify(e,mf,2):String(e),mf=(e,t)=>t&&t.__v_isRef?mf(e,t.value):mr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Qo(r,i)+" =>"]=s,n),{})}:Or(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Qo(n))}:wn(t)?Qo(t):Et(t)&&!q(t)&&!ff(t)?String(t):t,Qo=(e,t="")=>{var n;return wn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let fe;class pg{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=fe,!t&&fe&&(this.index=(fe.scopes||(fe.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=fe;try{return fe=this,t()}finally{fe=n}}}on(){fe=this}off(){fe=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function mg(e,t=fe){t&&t.active&&t.effects.push(e)}function gf(){return fe}function gg(e){fe&&fe.cleanups.push(e)}let $n;class Al{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=3,this._trackId=0,this._runnings=0,this._queryings=0,this._depsLength=0,mg(this,s)}get dirty(){if(this._dirtyLevel===1){this._dirtyLevel=0,this._queryings++,Jn();for(const t of this.deps)if(t.computed&&(_g(t.computed),this._dirtyLevel>=2))break;Zn(),this._queryings--}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?3:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=_n,n=$n;try{return _n=!0,$n=this,this._runnings++,Jc(this),this.fn()}finally{Zc(this),this._runnings--,$n=n,_n=t}}stop(){var t;this.active&&(Jc(this),Zc(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function _g(e){return e.value}function Jc(e){e._trackId++,e._depsLength=0}function Zc(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)_f(e.deps[t],e);e.deps.length=e._depsLength}}function _f(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let _n=!0,Ia=0;const yf=[];function Jn(){yf.push(_n),_n=!1}function Zn(){const e=yf.pop();_n=e===void 0?!0:e}function Rl(){Ia++}function Cl(){for(Ia--;!Ia&&Aa.length;)Aa.shift()()}function Ef(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&_f(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Aa=[];function vf(e,t,n){Rl();for(const r of e.keys())if(!(!r.allowRecurse&&r._runnings)&&r._dirtyLevel<t&&(!r._runnings||t!==2)){const s=r._dirtyLevel;r._dirtyLevel=t,s===0&&(!r._queryings||t!==2)&&(r.trigger(),r.scheduler&&Aa.push(r.scheduler))}Cl()}const Tf=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Ra=new WeakMap,jn=Symbol(""),Ca=Symbol("");function ce(e,t,n){if(_n&&$n){let r=Ra.get(e);r||Ra.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Tf(()=>r.delete(n))),Ef($n,s)}}function Ze(e,t,n,r,s,i){const o=Ra.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&q(e)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!wn(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":q(e)?wl(n)&&a.push(o.get("length")):(a.push(o.get(jn)),mr(e)&&a.push(o.get(Ca)));break;case"delete":q(e)||(a.push(o.get(jn)),mr(e)&&a.push(o.get(Ca)));break;case"set":mr(e)&&a.push(o.get(jn));break}Rl();for(const l of a)l&&vf(l,3);Cl()}const yg=El("__proto__,__v_isRef,__isVue"),wf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(wn)),tu=Eg();function Eg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=at(this);for(let i=0,o=this.length;i<o;i++)ce(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(at)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Jn(),Rl();const r=at(this)[t].apply(this,n);return Cl(),Zn(),r}}),e}function vg(e){const t=at(this);return ce(t,"has",e),t.hasOwnProperty(e)}class If{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Ng:Pf:i?Cf:Rf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=q(t);if(!s){if(o&&it(tu,n))return Reflect.get(tu,n,r);if(n==="hasOwnProperty")return vg}const a=Reflect.get(t,n,r);return(wn(n)?wf.has(n):yg(n))||(s||ce(t,"get",n),i)?a:te(a)?o&&wl(n)?a:a.value:Et(a)?s?bl(a):no(a):a}}class Af extends If{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._shallow){const l=wr(i);if(!fr(r)&&!wr(r)&&(i=at(i),r=at(r)),!q(t)&&te(i)&&!te(r))return l?!1:(i.value=r,!0)}const o=q(t)&&wl(n)?Number(n)<t.length:it(t,n),a=Reflect.set(t,n,r,s);return t===at(s)&&(o?In(r,i)&&Ze(t,"set",n,r):Ze(t,"add",n,r)),a}deleteProperty(t,n){const r=it(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Ze(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!wn(n)||!wf.has(n))&&ce(t,"has",n),r}ownKeys(t){return ce(t,"iterate",q(t)?"length":jn),Reflect.ownKeys(t)}}class Tg extends If{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const wg=new Af,Ig=new Tg,Ag=new Af(!0),Pl=e=>e,eo=e=>Reflect.getPrototypeOf(e);function si(e,t,n=!1,r=!1){e=e.__v_raw;const s=at(e),i=at(t);n||(In(t,i)&&ce(s,"get",t),ce(s,"get",i));const{has:o}=eo(s),a=r?Pl:n?Dl:ps;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function ii(e,t=!1){const n=this.__v_raw,r=at(n),s=at(e);return t||(In(e,s)&&ce(r,"has",e),ce(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function oi(e,t=!1){return e=e.__v_raw,!t&&ce(at(e),"iterate",jn),Reflect.get(e,"size",e)}function eu(e){e=at(e);const t=at(this);return eo(t).has.call(t,e)||(t.add(e),Ze(t,"add",e,e)),this}function nu(e,t){t=at(t);const n=at(this),{has:r,get:s}=eo(n);let i=r.call(n,e);i||(e=at(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?In(t,o)&&Ze(n,"set",e,t):Ze(n,"add",e,t),this}function ru(e){const t=at(this),{has:n,get:r}=eo(t);let s=n.call(t,e);s||(e=at(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Ze(t,"delete",e,void 0),i}function su(){const e=at(this),t=e.size!==0,n=e.clear();return t&&Ze(e,"clear",void 0,void 0),n}function ai(e,t){return function(r,s){const i=this,o=i.__v_raw,a=at(o),l=t?Pl:e?Dl:ps;return!e&&ce(a,"iterate",jn),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function li(e,t,n){return function(...r){const s=this.__v_raw,i=at(s),o=mr(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?Pl:t?Dl:ps;return!t&&ce(i,"iterate",l?Ca:jn),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function an(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Rg(){const e={get(i){return si(this,i)},get size(){return oi(this)},has:ii,add:eu,set:nu,delete:ru,clear:su,forEach:ai(!1,!1)},t={get(i){return si(this,i,!1,!0)},get size(){return oi(this)},has:ii,add:eu,set:nu,delete:ru,clear:su,forEach:ai(!1,!0)},n={get(i){return si(this,i,!0)},get size(){return oi(this,!0)},has(i){return ii.call(this,i,!0)},add:an("add"),set:an("set"),delete:an("delete"),clear:an("clear"),forEach:ai(!0,!1)},r={get(i){return si(this,i,!0,!0)},get size(){return oi(this,!0)},has(i){return ii.call(this,i,!0)},add:an("add"),set:an("set"),delete:an("delete"),clear:an("clear"),forEach:ai(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=li(i,!1,!1),n[i]=li(i,!0,!1),t[i]=li(i,!1,!0),r[i]=li(i,!0,!0)}),[e,n,t,r]}const[Cg,Pg,Sg,bg]=Rg();function Sl(e,t){const n=t?e?bg:Sg:e?Pg:Cg;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(it(n,s)&&s in r?n:r,s,i)}const Vg={get:Sl(!1,!1)},Dg={get:Sl(!1,!0)},xg={get:Sl(!0,!1)},Rf=new WeakMap,Cf=new WeakMap,Pf=new WeakMap,Ng=new WeakMap;function kg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Og(e){return e.__v_skip||!Object.isExtensible(e)?0:kg(rg(e))}function no(e){return wr(e)?e:Vl(e,!1,wg,Vg,Rf)}function Sf(e){return Vl(e,!1,Ag,Dg,Cf)}function bl(e){return Vl(e,!0,Ig,xg,Pf)}function Vl(e,t,n,r,s){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=Og(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function gr(e){return wr(e)?gr(e.__v_raw):!!(e&&e.__v_isReactive)}function wr(e){return!!(e&&e.__v_isReadonly)}function fr(e){return!!(e&&e.__v_isShallow)}function bf(e){return gr(e)||wr(e)}function at(e){const t=e&&e.__v_raw;return t?at(t):e}function Vf(e){return Si(e,"__v_skip",!0),e}const ps=e=>Et(e)?no(e):e,Dl=e=>Et(e)?bl(e):e;class Df{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Al(()=>t(this._value),()=>Pa(this,1)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=at(this);return xf(t),(!t._cacheable||t.effect.dirty)&&In(t._value,t._value=t.effect.run())&&Pa(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Mg(e,t,n=!1){let r,s;const i=Z(e);return i?(r=e,s=we):(r=e.get,s=e.set),new Df(r,s,i||!s,n)}function xf(e){_n&&$n&&(e=at(e),Ef($n,e.dep||(e.dep=Tf(()=>e.dep=void 0,e instanceof Df?e:void 0))))}function Pa(e,t=3,n){e=at(e);const r=e.dep;r&&vf(r,t)}function te(e){return!!(e&&e.__v_isRef===!0)}function $s(e){return Nf(e,!1)}function Lg(e){return Nf(e,!0)}function Nf(e,t){return te(e)?e:new Fg(e,t)}class Fg{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:at(t),this._value=n?t:ps(t)}get value(){return xf(this),this._value}set value(t){const n=this.__v_isShallow||fr(t)||wr(t);t=n?t:at(t),In(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ps(t),Pa(this,3))}}function ae(e){return te(e)?e.value:e}const Bg={get:(e,t,n)=>ae(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return te(s)&&!te(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function kf(e){return gr(e)?e:new Proxy(e,Bg)}function yn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){ro(i,t,n)}return s}function Ie(e,t,n,r){if(Z(e)){const i=yn(e,t,n,r);return i&&uf(i)&&i.catch(o=>{ro(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(Ie(e[i],t,n,r));return s}function ro(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/errors/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){yn(l,null,10,[e,o,a]);return}}Ug(e,n,s,r)}function Ug(e,t,n,r=!0){console.error(e)}let ms=!1,Sa=!1;const Yt=[];let Le=0;const _r=[];let Ye=null,Mn=0;const Of=Promise.resolve();let xl=null;function Mf(e){const t=xl||Of;return e?t.then(this?e.bind(this):e):t}function $g(e){let t=Le+1,n=Yt.length;for(;t<n;){const r=t+n>>>1,s=Yt[r],i=gs(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function Nl(e){(!Yt.length||!Yt.includes(e,ms&&e.allowRecurse?Le+1:Le))&&(e.id==null?Yt.push(e):Yt.splice($g(e.id),0,e),Lf())}function Lf(){!ms&&!Sa&&(Sa=!0,xl=Of.then(Bf))}function jg(e){const t=Yt.indexOf(e);t>Le&&Yt.splice(t,1)}function qg(e){q(e)?_r.push(...e):(!Ye||!Ye.includes(e,e.allowRecurse?Mn+1:Mn))&&_r.push(e),Lf()}function iu(e,t,n=ms?Le+1:0){for(;n<Yt.length;n++){const r=Yt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Yt.splice(n,1),n--,r()}}}function Ff(e){if(_r.length){const t=[...new Set(_r)];if(_r.length=0,Ye){Ye.push(...t);return}for(Ye=t,Ye.sort((n,r)=>gs(n)-gs(r)),Mn=0;Mn<Ye.length;Mn++)Ye[Mn]();Ye=null,Mn=0}}const gs=e=>e.id==null?1/0:e.id,Hg=(e,t)=>{const n=gs(e)-gs(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Bf(e){Sa=!1,ms=!0,Yt.sort(Hg);try{for(Le=0;Le<Yt.length;Le++){const t=Yt[Le];t&&t.active!==!1&&yn(t,null,14)}}finally{Le=0,Yt.length=0,Ff(),ms=!1,xl=null,(Yt.length||_r.length)&&Bf()}}function zg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Tt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[u]||Tt;f&&(s=n.map(m=>xt(m)?m.trim():m)),h&&(s=n.map(bi))}let a,l=r[a=Go(t)]||r[a=Go(He(t))];!l&&i&&(l=r[a=Go(Mr(t))]),l&&Ie(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ie(c,e,6,s)}}function Uf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!Z(e)){const l=c=>{const u=Uf(c,t,!0);u&&(a=!0,Ot(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(Et(e)&&r.set(e,null),null):(q(i)?i.forEach(l=>o[l]=null):Ot(o,i),Et(e)&&r.set(e,o),o)}function so(e,t){return!e||!Xi(t)?!1:(t=t.slice(2).replace(/Once$/,""),it(e,t[0].toLowerCase()+t.slice(1))||it(e,Mr(t))||it(e,t))}let pe=null,io=null;function Vi(e){const t=pe;return pe=e,io=e&&e.type.__scopeId||null,t}function kl(e){io=e}function Ol(){io=null}function ye(e,t=pe,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&_u(-1);const i=Vi(t);let o;try{o=e(...s)}finally{Vi(i),r._d&&_u(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Yo(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:m,ctx:E,inheritAttrs:w}=e;let I,P;const N=Vi(e);try{if(n.shapeFlag&4){const K=s||r,U=K;I=Me(u.call(U,K,h,i,m,f,E)),P=l}else{const K=t;I=Me(K.length>1?K(i,{attrs:l,slots:a,emit:c}):K(i,null)),P=t.props?l:Kg(l)}}catch(K){os.length=0,ro(K,e,1),I=nt(Se)}let L=I;if(P&&w!==!1){const K=Object.keys(P),{shapeFlag:U}=L;K.length&&U&7&&(o&&K.some(vl)&&(P=Gg(P,o)),L=An(L,P))}return n.dirs&&(L=An(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),I=L,Vi(N),I}const Kg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Xi(n))&&((t||(t={}))[n]=e[n]);return t},Gg=(e,t)=>{const n={};for(const r in e)(!vl(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Wg(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ou(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!so(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ou(r,o,c):!0:!!o;return!1}function ou(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!so(n,i))return!0}return!1}function Qg({vnode:e,parent:t},n){if(n)for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const $f="components";function Ml(e,t){return Xg($f,e,!0,t)||e}const Yg=Symbol.for("v-ndc");function Xg(e,t,n=!0,r=!1){const s=pe||Ft;if(s){const i=s.type;if(e===$f){const a=W_(i,!1);if(a&&(a===t||a===He(t)||a===Zi(He(t))))return i}const o=au(s[e]||i[e],t)||au(s.appContext[e],t);return!o&&r?i:o}}function au(e,t){return e&&(e[t]||e[He(t)]||e[Zi(He(t))])}const Jg=e=>e.__isSuspense;function Zg(e,t){t&&t.pendingBranch?q(e)?t.effects.push(...e):t.effects.push(e):qg(e)}const t_=Symbol.for("v-scx"),e_=()=>Pe(t_),ci={};function ss(e,t,n){return jf(e,t,n)}function jf(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=Tt){var l;if(t&&i){const U=t;t=(...ut)=>{U(...ut),K()}}const c=gf()===((l=Ft)==null?void 0:l.scope)?Ft:null;let u,h=!1,f=!1;if(te(e)?(u=()=>e.value,h=fr(e)):gr(e)?(u=fr(e)||r===!1?()=>Xe(e,1):()=>Xe(e),h=!0):q(e)?(f=!0,h=e.some(U=>gr(U)||fr(U)),u=()=>e.map(U=>{if(te(U))return U.value;if(gr(U))return Xe(U,fr(U)||r===!1?1:void 0);if(Z(U))return yn(U,c,2)})):Z(e)?t?u=()=>yn(e,c,2):u=()=>{if(!(c&&c.isUnmounted))return m&&m(),Ie(e,c,3,[E])}:u=we,t&&r){const U=u;u=()=>Xe(U())}let m,E=U=>{m=L.onStop=()=>{yn(U,c,4),m=L.onStop=void 0}},w;if(uo)if(E=we,t?n&&Ie(t,c,3,[u(),f?[]:void 0,E]):u(),s==="sync"){const U=e_();w=U.__watcherHandles||(U.__watcherHandles=[])}else return we;let I=f?new Array(e.length).fill(ci):ci;const P=()=>{if(!(!L.active||!L.dirty))if(t){const U=L.run();(r||h||(f?U.some((ut,At)=>In(ut,I[At])):In(U,I)))&&(m&&m(),Ie(t,c,3,[U,I===ci?void 0:f&&I[0]===ci?[]:I,E]),I=U)}else L.run()};P.allowRecurse=!!t;let N;s==="sync"?N=P:s==="post"?N=()=>oe(P,c&&c.suspense):(P.pre=!0,c&&(P.id=c.uid),N=()=>Nl(P));const L=new Al(u,we,N),K=()=>{L.stop(),c&&c.scope&&Tl(c.scope.effects,L)};return t?n?P():I=L.run():s==="post"?oe(L.run.bind(L),c&&c.suspense):L.run(),w&&w.push(K),K}function n_(e,t,n){const r=this.proxy,s=xt(e)?e.includes(".")?qf(r,e):()=>r[e]:e.bind(r,r);let i;Z(t)?i=t:(i=t.handler,n=t);const o=Ft;Ir(this);const a=jf(s,i.bind(r),n);return o?Ir(o):qn(),a}function qf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Xe(e,t,n=0,r){if(!Et(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),te(e))Xe(e.value,t,n,r);else if(q(e))for(let s=0;s<e.length;s++)Xe(e[s],t,n,r);else if(Or(e)||mr(e))e.forEach(s=>{Xe(s,t,n,r)});else if(ff(e))for(const s in e)Xe(e[s],t,n,r);return e}function r_(e,t){const n=pe;if(n===null)return e;const r=ho(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,l,c=Tt]=t[i];o&&(Z(o)&&(o={mounted:o,updated:o}),o.deep&&Xe(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Dn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Jn(),Ie(l,n,8,[e.el,a,e,t]),Zn())}}const hn=Symbol("_leaveCb"),ui=Symbol("_enterCb");function s_(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Wf(()=>{e.isMounted=!0}),Qf(()=>{e.isUnmounting=!0}),e}const _e=[Function,Array],Hf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_e,onEnter:_e,onAfterEnter:_e,onEnterCancelled:_e,onBeforeLeave:_e,onLeave:_e,onAfterLeave:_e,onLeaveCancelled:_e,onBeforeAppear:_e,onAppear:_e,onAfterAppear:_e,onAppearCancelled:_e},i_={name:"BaseTransition",props:Hf,setup(e,{slots:t}){const n=q_(),r=s_();let s;return()=>{const i=t.default&&Kf(t.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const w of i)if(w.type!==Se){o=w;break}}const a=at(e),{mode:l}=a;if(r.isLeaving)return Xo(o);const c=lu(o);if(!c)return Xo(o);const u=ba(c,a,r,n);Va(c,u);const h=n.subTree,f=h&&lu(h);let m=!1;const{getTransitionKey:E}=c.type;if(E){const w=E();s===void 0?s=w:w!==s&&(s=w,m=!0)}if(f&&f.type!==Se&&(!Ln(c,f)||m)){const w=ba(f,a,r,n);if(Va(f,w),l==="out-in")return r.isLeaving=!0,w.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Xo(o);l==="in-out"&&c.type!==Se&&(w.delayLeave=(I,P,N)=>{const L=zf(r,f);L[String(f.key)]=f,I[hn]=()=>{P(),I[hn]=void 0,delete u.delayedLeave},u.delayedLeave=N})}return o}}},o_=i_;function zf(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ba(e,t,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:E,onBeforeAppear:w,onAppear:I,onAfterAppear:P,onAppearCancelled:N}=t,L=String(e.key),K=zf(n,e),U=(J,yt)=>{J&&Ie(J,r,9,yt)},ut=(J,yt)=>{const lt=yt[1];U(J,yt),q(J)?J.every(Nt=>Nt.length<=1)&&lt():J.length<=1&&lt()},At={mode:i,persisted:o,beforeEnter(J){let yt=a;if(!n.isMounted)if(s)yt=w||a;else return;J[hn]&&J[hn](!0);const lt=K[L];lt&&Ln(e,lt)&&lt.el[hn]&&lt.el[hn](),U(yt,[J])},enter(J){let yt=l,lt=c,Nt=u;if(!n.isMounted)if(s)yt=I||l,lt=P||c,Nt=N||u;else return;let B=!1;const dt=J[ui]=ne=>{B||(B=!0,ne?U(Nt,[J]):U(lt,[J]),At.delayedLeave&&At.delayedLeave(),J[ui]=void 0)};yt?ut(yt,[J,dt]):dt()},leave(J,yt){const lt=String(e.key);if(J[ui]&&J[ui](!0),n.isUnmounting)return yt();U(h,[J]);let Nt=!1;const B=J[hn]=dt=>{Nt||(Nt=!0,yt(),dt?U(E,[J]):U(m,[J]),J[hn]=void 0,K[lt]===e&&delete K[lt])};K[lt]=e,f?ut(f,[J,B]):B()},clone(J){return ba(J,t,n,r)}};return At}function Xo(e){if(oo(e))return e=An(e),e.children=null,e}function lu(e){return oo(e)?e.children?e.children[0]:void 0:e}function Va(e,t){e.shapeFlag&6&&e.component?Va(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Kf(e,t=!1,n){let r=[],s=0;for(let i=0;i<e.length;i++){let o=e[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ee?(o.patchFlag&128&&s++,r=r.concat(Kf(o.children,t,a))):(t||o.type!==Se)&&r.push(a!=null?An(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ue(e,t){return Z(e)?Ot({name:e.name},t,{setup:e}):e}const Ti=e=>!!e.type.__asyncLoader,oo=e=>e.type.__isKeepAlive;function a_(e,t){Gf(e,"a",t)}function l_(e,t){Gf(e,"da",t)}function Gf(e,t,n=Ft){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(ao(t,r,n),n){let s=n.parent;for(;s&&s.parent;)oo(s.parent.vnode)&&c_(r,t,n,s),s=s.parent}}function c_(e,t,n,r){const s=ao(t,e,r,!0);Yf(()=>{Tl(r[t],s)},n)}function ao(e,t,n=Ft,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Jn(),Ir(n);const a=Ie(t,n,e,o);return qn(),Zn(),a});return r?s.unshift(i):s.push(i),i}}const sn=e=>(t,n=Ft)=>(!uo||e==="sp")&&ao(e,(...r)=>t(...r),n),u_=sn("bm"),Wf=sn("m"),h_=sn("bu"),f_=sn("u"),Qf=sn("bum"),Yf=sn("um"),d_=sn("sp"),p_=sn("rtg"),m_=sn("rtc");function g_(e,t=Ft){ao("ec",e,t)}function __(e,t,n,r){let s;const i=n&&n[r];if(q(e)||xt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(Et(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const Da=e=>e?ld(e)?ho(e)||e.proxy:Da(e.parent):null,is=Ot(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Da(e.parent),$root:e=>Da(e.root),$emit:e=>e.emit,$options:e=>Ll(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Nl(e.update)}),$nextTick:e=>e.n||(e.n=Mf.bind(e.proxy)),$watch:e=>n_.bind(e)}),Jo=(e,t)=>e!==Tt&&!e.__isScriptSetup&&it(e,t),y_={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Jo(r,t))return o[t]=1,r[t];if(s!==Tt&&it(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&it(c,t))return o[t]=3,i[t];if(n!==Tt&&it(n,t))return o[t]=4,n[t];xa&&(o[t]=0)}}const u=is[t];let h,f;if(u)return t==="$attrs"&&ce(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==Tt&&it(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,it(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Jo(s,t)?(s[t]=n,!0):r!==Tt&&it(r,t)?(r[t]=n,!0):it(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==Tt&&it(e,o)||Jo(t,o)||(a=i[0])&&it(a,o)||it(r,o)||it(is,o)||it(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:it(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function cu(e){return q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let xa=!0;function E_(e){const t=Ll(e),n=e.proxy,r=e.ctx;xa=!1,t.beforeCreate&&uu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:E,activated:w,deactivated:I,beforeDestroy:P,beforeUnmount:N,destroyed:L,unmounted:K,render:U,renderTracked:ut,renderTriggered:At,errorCaptured:J,serverPrefetch:yt,expose:lt,inheritAttrs:Nt,components:B,directives:dt,filters:ne}=t;if(c&&v_(c,r,null),o)for(const gt in o){const ht=o[gt];Z(ht)&&(r[gt]=ht.bind(n))}if(s){const gt=s.call(n,n);Et(gt)&&(e.data=no(gt))}if(xa=!0,i)for(const gt in i){const ht=i[gt],We=Z(ht)?ht.bind(n,n):Z(ht.get)?ht.get.bind(n,n):we,on=!Z(ht)&&Z(ht.set)?ht.set.bind(n):we,xe=de({get:We,set:on});Object.defineProperty(r,gt,{enumerable:!0,configurable:!0,get:()=>xe.value,set:ie=>xe.value=ie})}if(a)for(const gt in a)Xf(a[gt],r,n,gt);if(l){const gt=Z(l)?l.call(n):l;Reflect.ownKeys(gt).forEach(ht=>{wi(ht,gt[ht])})}u&&uu(u,e,"c");function St(gt,ht){q(ht)?ht.forEach(We=>gt(We.bind(n))):ht&&gt(ht.bind(n))}if(St(u_,h),St(Wf,f),St(h_,m),St(f_,E),St(a_,w),St(l_,I),St(g_,J),St(m_,ut),St(p_,At),St(Qf,N),St(Yf,K),St(d_,yt),q(lt))if(lt.length){const gt=e.exposed||(e.exposed={});lt.forEach(ht=>{Object.defineProperty(gt,ht,{get:()=>n[ht],set:We=>n[ht]=We})})}else e.exposed||(e.exposed={});U&&e.render===we&&(e.render=U),Nt!=null&&(e.inheritAttrs=Nt),B&&(e.components=B),dt&&(e.directives=dt)}function v_(e,t,n=we){q(e)&&(e=Na(e));for(const r in e){const s=e[r];let i;Et(s)?"default"in s?i=Pe(s.from||r,s.default,!0):i=Pe(s.from||r):i=Pe(s),te(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function uu(e,t,n){Ie(q(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Xf(e,t,n,r){const s=r.includes(".")?qf(n,r):()=>n[r];if(xt(e)){const i=t[e];Z(i)&&ss(s,i)}else if(Z(e))ss(s,e.bind(n));else if(Et(e))if(q(e))e.forEach(i=>Xf(i,t,n,r));else{const i=Z(e.handler)?e.handler.bind(n):t[e.handler];Z(i)&&ss(s,i,e)}}function Ll(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>Di(l,c,o,!0)),Di(l,t,o)),Et(t)&&i.set(t,l),l}function Di(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Di(e,i,n,!0),s&&s.forEach(o=>Di(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=T_[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const T_={data:hu,props:fu,emits:fu,methods:Jr,computed:Jr,beforeCreate:re,created:re,beforeMount:re,mounted:re,beforeUpdate:re,updated:re,beforeDestroy:re,beforeUnmount:re,destroyed:re,unmounted:re,activated:re,deactivated:re,errorCaptured:re,serverPrefetch:re,components:Jr,directives:Jr,watch:I_,provide:hu,inject:w_};function hu(e,t){return t?e?function(){return Ot(Z(e)?e.call(this,this):e,Z(t)?t.call(this,this):t)}:t:e}function w_(e,t){return Jr(Na(e),Na(t))}function Na(e){if(q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function re(e,t){return e?[...new Set([].concat(e,t))]:t}function Jr(e,t){return e?Ot(Object.create(null),e,t):t}function fu(e,t){return e?q(e)&&q(t)?[...new Set([...e,...t])]:Ot(Object.create(null),cu(e),cu(t??{})):t}function I_(e,t){if(!e)return t;if(!t)return e;const n=Ot(Object.create(null),e);for(const r in t)n[r]=re(e[r],t[r]);return n}function Jf(){return{app:null,config:{isNativeTag:eg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let A_=0;function R_(e,t){return function(r,s=null){Z(r)||(r=Ot({},r)),s!=null&&!Et(s)&&(s=null);const i=Jf(),o=new WeakSet;let a=!1;const l=i.app={_uid:A_++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Y_,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&Z(c.install)?(o.add(c),c.install(l,...u)):Z(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const f=nt(r,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(f,c):e(f,c,h),a=!0,l._container=c,c.__vue_app__=l,ho(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){xi=l;try{return c()}finally{xi=null}}};return l}}let xi=null;function wi(e,t){if(Ft){let n=Ft.provides;const r=Ft.parent&&Ft.parent.provides;r===n&&(n=Ft.provides=Object.create(r)),n[e]=t}}function Pe(e,t,n=!1){const r=Ft||pe;if(r||xi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:xi._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Z(t)?t.call(r&&r.proxy):t}}function C_(e,t,n,r=!1){const s={},i={};Si(i,co,1),e.propsDefaults=Object.create(null),Zf(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Sf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function P_(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=at(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(so(e.emitsOptions,f))continue;const m=t[f];if(l)if(it(i,f))m!==i[f]&&(i[f]=m,c=!0);else{const E=He(f);s[E]=ka(l,a,E,m,e,!1)}else m!==i[f]&&(i[f]=m,c=!0)}}}else{Zf(e,t,s,i)&&(c=!0);let u;for(const h in a)(!t||!it(t,h)&&((u=Mr(h))===h||!it(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=ka(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!it(t,h))&&(delete i[h],c=!0)}c&&Ze(e,"set","$attrs")}function Zf(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Ei(l))continue;const c=t[l];let u;s&&it(s,u=He(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:so(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=at(n),c=a||Tt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=ka(s,l,h,c[h],e,!it(c,h))}}return o}function ka(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=it(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Z(l)){const{propsDefaults:c}=s;n in c?r=c[n]:(Ir(s),r=c[n]=l.call(null,t),qn())}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Mr(n))&&(r=!0))}return r}function td(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!Z(e)){const u=h=>{l=!0;const[f,m]=td(h,t,!0);Ot(o,f),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return Et(e)&&r.set(e,pr),pr;if(q(i))for(let u=0;u<i.length;u++){const h=He(i[u]);du(h)&&(o[h]=Tt)}else if(i)for(const u in i){const h=He(u);if(du(h)){const f=i[u],m=o[h]=q(f)||Z(f)?{type:f}:Ot({},f);if(m){const E=gu(Boolean,m.type),w=gu(String,m.type);m[0]=E>-1,m[1]=w<0||E<w,(E>-1||it(m,"default"))&&a.push(h)}}}const c=[o,a];return Et(e)&&r.set(e,c),c}function du(e){return e[0]!=="$"}function pu(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function mu(e,t){return pu(e)===pu(t)}function gu(e,t){return q(t)?t.findIndex(n=>mu(n,e)):Z(t)&&mu(t,e)?0:-1}const ed=e=>e[0]==="_"||e==="$stable",Fl=e=>q(e)?e.map(Me):[Me(e)],S_=(e,t,n)=>{if(t._n)return t;const r=ye((...s)=>Fl(t(...s)),n);return r._c=!1,r},nd=(e,t,n)=>{const r=e._ctx;for(const s in e){if(ed(s))continue;const i=e[s];if(Z(i))t[s]=S_(s,i,r);else if(i!=null){const o=Fl(i);t[s]=()=>o}}},rd=(e,t)=>{const n=Fl(t);e.slots.default=()=>n},b_=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=at(t),Si(t,"_",n)):nd(t,e.slots={})}else e.slots={},t&&rd(e,t);Si(e.slots,co,1)},V_=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=Tt;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Ot(s,t),!n&&a===1&&delete s._):(i=!t.$stable,nd(t,s)),o=t}else t&&(rd(e,t),o={default:1});if(i)for(const a in s)!ed(a)&&o[a]==null&&delete s[a]};function Oa(e,t,n,r,s=!1){if(q(e)){e.forEach((f,m)=>Oa(f,t&&(q(t)?t[m]:t),n,r,s));return}if(Ti(r)&&!s)return;const i=r.shapeFlag&4?ho(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Tt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(xt(c)?(u[c]=null,it(h,c)&&(h[c]=null)):te(c)&&(c.value=null)),Z(l))yn(l,a,12,[o,u]);else{const f=xt(l),m=te(l);if(f||m){const E=()=>{if(e.f){const w=f?it(h,l)?h[l]:u[l]:l.value;s?q(w)&&Tl(w,i):q(w)?w.includes(i)||w.push(i):f?(u[l]=[i],it(h,l)&&(h[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else f?(u[l]=o,it(h,l)&&(h[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(E.id=-1,oe(E,n)):E()}}}const oe=Zg;function D_(e){return x_(e)}function x_(e,t){const n=df();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=we,insertStaticContent:E}=e,w=(d,p,g,_=null,T=null,A=null,x=void 0,S=null,b=!!p.dynamicChildren)=>{if(d===p)return;d&&!Ln(d,p)&&(_=y(d),ie(d,T,A,!0),d=null),p.patchFlag===-2&&(b=!1,p.dynamicChildren=null);const{type:C,ref:k,shapeFlag:z}=p;switch(C){case lo:I(d,p,g,_);break;case Se:P(d,p,g,_);break;case ta:d==null&&N(p,g,_,x);break;case Ee:B(d,p,g,_,T,A,x,S,b);break;default:z&1?U(d,p,g,_,T,A,x,S,b):z&6?dt(d,p,g,_,T,A,x,S,b):(z&64||z&128)&&C.process(d,p,g,_,T,A,x,S,b,V)}k!=null&&T&&Oa(k,d&&d.ref,A,p||d,!p)},I=(d,p,g,_)=>{if(d==null)r(p.el=a(p.children),g,_);else{const T=p.el=d.el;p.children!==d.children&&c(T,p.children)}},P=(d,p,g,_)=>{d==null?r(p.el=l(p.children||""),g,_):p.el=d.el},N=(d,p,g,_)=>{[d.el,d.anchor]=E(d.children,p,g,_,d.el,d.anchor)},L=({el:d,anchor:p},g,_)=>{let T;for(;d&&d!==p;)T=f(d),r(d,g,_),d=T;r(p,g,_)},K=({el:d,anchor:p})=>{let g;for(;d&&d!==p;)g=f(d),s(d),d=g;s(p)},U=(d,p,g,_,T,A,x,S,b)=>{p.type==="svg"?x="svg":p.type==="math"&&(x="mathml"),d==null?ut(p,g,_,T,A,x,S,b):yt(d,p,T,A,x,S,b)},ut=(d,p,g,_,T,A,x,S)=>{let b,C;const{props:k,shapeFlag:z,transition:j,dirs:Q}=d;if(b=d.el=o(d.type,A,k&&k.is,k),z&8?u(b,d.children):z&16&&J(d.children,b,null,_,T,Zo(d,A),x,S),Q&&Dn(d,null,_,"created"),At(b,d,d.scopeId,x,_),k){for(const _t in k)_t!=="value"&&!Ei(_t)&&i(b,_t,null,k[_t],A,d.children,_,T,Kt);"value"in k&&i(b,"value",null,k.value,A),(C=k.onVnodeBeforeMount)&&ke(C,_,d)}Q&&Dn(d,null,_,"beforeMount");const et=N_(T,j);et&&j.beforeEnter(b),r(b,p,g),((C=k&&k.onVnodeMounted)||et||Q)&&oe(()=>{C&&ke(C,_,d),et&&j.enter(b),Q&&Dn(d,null,_,"mounted")},T)},At=(d,p,g,_,T)=>{if(g&&m(d,g),_)for(let A=0;A<_.length;A++)m(d,_[A]);if(T){let A=T.subTree;if(p===A){const x=T.vnode;At(d,x,x.scopeId,x.slotScopeIds,T.parent)}}},J=(d,p,g,_,T,A,x,S,b=0)=>{for(let C=b;C<d.length;C++){const k=d[C]=S?fn(d[C]):Me(d[C]);w(null,k,p,g,_,T,A,x,S)}},yt=(d,p,g,_,T,A,x)=>{const S=p.el=d.el;let{patchFlag:b,dynamicChildren:C,dirs:k}=p;b|=d.patchFlag&16;const z=d.props||Tt,j=p.props||Tt;let Q;if(g&&xn(g,!1),(Q=j.onVnodeBeforeUpdate)&&ke(Q,g,p,d),k&&Dn(p,d,g,"beforeUpdate"),g&&xn(g,!0),C?lt(d.dynamicChildren,C,S,g,_,Zo(p,T),A):x||ht(d,p,S,null,g,_,Zo(p,T),A,!1),b>0){if(b&16)Nt(S,p,z,j,g,_,T);else if(b&2&&z.class!==j.class&&i(S,"class",null,j.class,T),b&4&&i(S,"style",z.style,j.style,T),b&8){const et=p.dynamicProps;for(let _t=0;_t<et.length;_t++){const Rt=et[_t],Mt=z[Rt],Ae=j[Rt];(Ae!==Mt||Rt==="value")&&i(S,Rt,Mt,Ae,T,d.children,g,_,Kt)}}b&1&&d.children!==p.children&&u(S,p.children)}else!x&&C==null&&Nt(S,p,z,j,g,_,T);((Q=j.onVnodeUpdated)||k)&&oe(()=>{Q&&ke(Q,g,p,d),k&&Dn(p,d,g,"updated")},_)},lt=(d,p,g,_,T,A,x)=>{for(let S=0;S<p.length;S++){const b=d[S],C=p[S],k=b.el&&(b.type===Ee||!Ln(b,C)||b.shapeFlag&70)?h(b.el):g;w(b,C,k,null,_,T,A,x,!0)}},Nt=(d,p,g,_,T,A,x)=>{if(g!==_){if(g!==Tt)for(const S in g)!Ei(S)&&!(S in _)&&i(d,S,g[S],null,x,p.children,T,A,Kt);for(const S in _){if(Ei(S))continue;const b=_[S],C=g[S];b!==C&&S!=="value"&&i(d,S,C,b,x,p.children,T,A,Kt)}"value"in _&&i(d,"value",g.value,_.value,x)}},B=(d,p,g,_,T,A,x,S,b)=>{const C=p.el=d?d.el:a(""),k=p.anchor=d?d.anchor:a("");let{patchFlag:z,dynamicChildren:j,slotScopeIds:Q}=p;Q&&(S=S?S.concat(Q):Q),d==null?(r(C,g,_),r(k,g,_),J(p.children,g,k,T,A,x,S,b)):z>0&&z&64&&j&&d.dynamicChildren?(lt(d.dynamicChildren,j,g,T,A,x,S),(p.key!=null||T&&p===T.subTree)&&sd(d,p,!0)):ht(d,p,g,k,T,A,x,S,b)},dt=(d,p,g,_,T,A,x,S,b)=>{p.slotScopeIds=S,d==null?p.shapeFlag&512?T.ctx.activate(p,g,_,x,b):ne(p,g,_,T,A,x,b):Ge(d,p,b)},ne=(d,p,g,_,T,A,x)=>{const S=d.component=j_(d,_,T);if(oo(d)&&(S.ctx.renderer=V),H_(S),S.asyncDep){if(T&&T.registerDep(S,St),!d.el){const b=S.subTree=nt(Se);P(null,b,p,g)}}else St(S,d,p,g,T,A,x)},Ge=(d,p,g)=>{const _=p.component=d.component;if(Wg(d,p,g))if(_.asyncDep&&!_.asyncResolved){gt(_,p,g);return}else _.next=p,jg(_.update),_.effect.dirty=!0,_.update();else p.el=d.el,_.vnode=p},St=(d,p,g,_,T,A,x)=>{const S=()=>{if(d.isMounted){let{next:k,bu:z,u:j,parent:Q,vnode:et}=d;{const ir=id(d);if(ir){k&&(k.el=et.el,gt(d,k,x)),ir.asyncDep.then(()=>{d.isUnmounted||S()});return}}let _t=k,Rt;xn(d,!1),k?(k.el=et.el,gt(d,k,x)):k=et,z&&vi(z),(Rt=k.props&&k.props.onVnodeBeforeUpdate)&&ke(Rt,Q,k,et),xn(d,!0);const Mt=Yo(d),Ae=d.subTree;d.subTree=Mt,w(Ae,Mt,h(Ae.el),y(Ae),d,T,A),k.el=Mt.el,_t===null&&Qg(d,Mt.el),j&&oe(j,T),(Rt=k.props&&k.props.onVnodeUpdated)&&oe(()=>ke(Rt,Q,k,et),T)}else{let k;const{el:z,props:j}=p,{bm:Q,m:et,parent:_t}=d,Rt=Ti(p);if(xn(d,!1),Q&&vi(Q),!Rt&&(k=j&&j.onVnodeBeforeMount)&&ke(k,_t,p),xn(d,!0),z&&ft){const Mt=()=>{d.subTree=Yo(d),ft(z,d.subTree,d,T,null)};Rt?p.type.__asyncLoader().then(()=>!d.isUnmounted&&Mt()):Mt()}else{const Mt=d.subTree=Yo(d);w(null,Mt,g,_,d,T,A),p.el=Mt.el}if(et&&oe(et,T),!Rt&&(k=j&&j.onVnodeMounted)){const Mt=p;oe(()=>ke(k,_t,Mt),T)}(p.shapeFlag&256||_t&&Ti(_t.vnode)&&_t.vnode.shapeFlag&256)&&d.a&&oe(d.a,T),d.isMounted=!0,p=g=_=null}},b=d.effect=new Al(S,we,()=>Nl(C),d.scope),C=d.update=()=>{b.dirty&&b.run()};C.id=d.uid,xn(d,!0),C()},gt=(d,p,g)=>{p.component=d;const _=d.vnode.props;d.vnode=p,d.next=null,P_(d,p.props,_,g),V_(d,p.children,g),Jn(),iu(d),Zn()},ht=(d,p,g,_,T,A,x,S,b=!1)=>{const C=d&&d.children,k=d?d.shapeFlag:0,z=p.children,{patchFlag:j,shapeFlag:Q}=p;if(j>0){if(j&128){on(C,z,g,_,T,A,x,S,b);return}else if(j&256){We(C,z,g,_,T,A,x,S,b);return}}Q&8?(k&16&&Kt(C,T,A),z!==C&&u(g,z)):k&16?Q&16?on(C,z,g,_,T,A,x,S,b):Kt(C,T,A,!0):(k&8&&u(g,""),Q&16&&J(z,g,_,T,A,x,S,b))},We=(d,p,g,_,T,A,x,S,b)=>{d=d||pr,p=p||pr;const C=d.length,k=p.length,z=Math.min(C,k);let j;for(j=0;j<z;j++){const Q=p[j]=b?fn(p[j]):Me(p[j]);w(d[j],Q,g,null,T,A,x,S,b)}C>k?Kt(d,T,A,!0,!1,z):J(p,g,_,T,A,x,S,b,z)},on=(d,p,g,_,T,A,x,S,b)=>{let C=0;const k=p.length;let z=d.length-1,j=k-1;for(;C<=z&&C<=j;){const Q=d[C],et=p[C]=b?fn(p[C]):Me(p[C]);if(Ln(Q,et))w(Q,et,g,null,T,A,x,S,b);else break;C++}for(;C<=z&&C<=j;){const Q=d[z],et=p[j]=b?fn(p[j]):Me(p[j]);if(Ln(Q,et))w(Q,et,g,null,T,A,x,S,b);else break;z--,j--}if(C>z){if(C<=j){const Q=j+1,et=Q<k?p[Q].el:_;for(;C<=j;)w(null,p[C]=b?fn(p[C]):Me(p[C]),g,et,T,A,x,S,b),C++}}else if(C>j)for(;C<=z;)ie(d[C],T,A,!0),C++;else{const Q=C,et=C,_t=new Map;for(C=et;C<=j;C++){const he=p[C]=b?fn(p[C]):Me(p[C]);he.key!=null&&_t.set(he.key,C)}let Rt,Mt=0;const Ae=j-et+1;let ir=!1,Gc=0;const zr=new Array(Ae);for(C=0;C<Ae;C++)zr[C]=0;for(C=Q;C<=z;C++){const he=d[C];if(Mt>=Ae){ie(he,T,A,!0);continue}let Ne;if(he.key!=null)Ne=_t.get(he.key);else for(Rt=et;Rt<=j;Rt++)if(zr[Rt-et]===0&&Ln(he,p[Rt])){Ne=Rt;break}Ne===void 0?ie(he,T,A,!0):(zr[Ne-et]=C+1,Ne>=Gc?Gc=Ne:ir=!0,w(he,p[Ne],g,null,T,A,x,S,b),Mt++)}const Wc=ir?k_(zr):pr;for(Rt=Wc.length-1,C=Ae-1;C>=0;C--){const he=et+C,Ne=p[he],Qc=he+1<k?p[he+1].el:_;zr[C]===0?w(null,Ne,g,Qc,T,A,x,S,b):ir&&(Rt<0||C!==Wc[Rt]?xe(Ne,g,Qc,2):Rt--)}}},xe=(d,p,g,_,T=null)=>{const{el:A,type:x,transition:S,children:b,shapeFlag:C}=d;if(C&6){xe(d.component.subTree,p,g,_);return}if(C&128){d.suspense.move(p,g,_);return}if(C&64){x.move(d,p,g,V);return}if(x===Ee){r(A,p,g);for(let z=0;z<b.length;z++)xe(b[z],p,g,_);r(d.anchor,p,g);return}if(x===ta){L(d,p,g);return}if(_!==2&&C&1&&S)if(_===0)S.beforeEnter(A),r(A,p,g),oe(()=>S.enter(A),T);else{const{leave:z,delayLeave:j,afterLeave:Q}=S,et=()=>r(A,p,g),_t=()=>{z(A,()=>{et(),Q&&Q()})};j?j(A,et,_t):_t()}else r(A,p,g)},ie=(d,p,g,_=!1,T=!1)=>{const{type:A,props:x,ref:S,children:b,dynamicChildren:C,shapeFlag:k,patchFlag:z,dirs:j}=d;if(S!=null&&Oa(S,null,g,d,!0),k&256){p.ctx.deactivate(d);return}const Q=k&1&&j,et=!Ti(d);let _t;if(et&&(_t=x&&x.onVnodeBeforeUnmount)&&ke(_t,p,d),k&6)ri(d.component,g,_);else{if(k&128){d.suspense.unmount(g,_);return}Q&&Dn(d,null,p,"beforeUnmount"),k&64?d.type.remove(d,p,g,T,V,_):C&&(A!==Ee||z>0&&z&64)?Kt(C,p,g,!1,!0):(A===Ee&&z&384||!T&&k&16)&&Kt(b,p,g),_&&rr(d)}(et&&(_t=x&&x.onVnodeUnmounted)||Q)&&oe(()=>{_t&&ke(_t,p,d),Q&&Dn(d,null,p,"unmounted")},g)},rr=d=>{const{type:p,el:g,anchor:_,transition:T}=d;if(p===Ee){sr(g,_);return}if(p===ta){K(d);return}const A=()=>{s(g),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(d.shapeFlag&1&&T&&!T.persisted){const{leave:x,delayLeave:S}=T,b=()=>x(g,A);S?S(d.el,A,b):b()}else A()},sr=(d,p)=>{let g;for(;d!==p;)g=f(d),s(d),d=g;s(p)},ri=(d,p,g)=>{const{bum:_,scope:T,update:A,subTree:x,um:S}=d;_&&vi(_),T.stop(),A&&(A.active=!1,ie(x,d,p,g)),S&&oe(S,p),oe(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Kt=(d,p,g,_=!1,T=!1,A=0)=>{for(let x=A;x<d.length;x++)ie(d[x],p,g,_,T)},y=d=>d.shapeFlag&6?y(d.component.subTree):d.shapeFlag&128?d.suspense.next():f(d.anchor||d.el),O=(d,p,g)=>{d==null?p._vnode&&ie(p._vnode,null,null,!0):w(p._vnode||null,d,p,null,null,null,g),iu(),Ff(),p._vnode=d},V={p:w,um:ie,m:xe,r:rr,mt:ne,mc:J,pc:ht,pbc:lt,n:y,o:e};let $,ft;return t&&([$,ft]=t(V)),{render:O,hydrate:$,createApp:R_(O,$)}}function Zo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function xn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function N_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sd(e,t,n=!1){const r=e.children,s=t.children;if(q(r)&&q(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=fn(s[i]),a.el=o.el),n||sd(o,a)),a.type===lo&&(a.el=o.el)}}function k_(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function id(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:id(t)}const O_=e=>e.__isTeleport,Ee=Symbol.for("v-fgt"),lo=Symbol.for("v-txt"),Se=Symbol.for("v-cmt"),ta=Symbol.for("v-stc"),os=[];let Re=null;function Xt(e=!1){os.push(Re=e?null:[])}function M_(){os.pop(),Re=os[os.length-1]||null}let _s=1;function _u(e){_s+=e}function od(e){return e.dynamicChildren=_s>0?Re||pr:null,M_(),_s>0&&Re&&Re.push(e),e}function me(e,t,n,r,s,i){return od(X(e,t,n,r,s,i,!0))}function Bl(e,t,n,r,s){return od(nt(e,t,n,r,s,!0))}function Ma(e){return e?e.__v_isVNode===!0:!1}function Ln(e,t){return e.type===t.type&&e.key===t.key}const co="__vInternal",ad=({key:e})=>e??null,Ii=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?xt(e)||te(e)||Z(e)?{i:pe,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,r=0,s=null,i=e===Ee?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ad(t),ref:t&&Ii(t),scopeId:io,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:pe};return a?(Ul(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=xt(n)?8:16),_s>0&&!o&&Re&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Re.push(l),l}const nt=L_;function L_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Yg)&&(e=Se),Ma(e)){const a=An(e,t,!0);return n&&Ul(a,n),_s>0&&!i&&Re&&(a.shapeFlag&6?Re[Re.indexOf(e)]=a:Re.push(a)),a.patchFlag|=-2,a}if(Q_(e)&&(e=e.__vccOpts),t){t=F_(t);let{class:a,style:l}=t;a&&!xt(a)&&(t.class=to(a)),Et(l)&&(bf(l)&&!q(l)&&(l=Ot({},l)),t.style=ze(l))}const o=xt(e)?1:Jg(e)?128:O_(e)?64:Et(e)?4:Z(e)?2:0;return X(e,t,n,r,s,o,i,!0)}function F_(e){return e?bf(e)||co in e?Ot({},e):e:null}function An(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?B_(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&ad(a),ref:t&&t.ref?n&&s?q(s)?s.concat(Ii(t)):[s,Ii(t)]:Ii(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ee?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&An(e.ssContent),ssFallback:e.ssFallback&&An(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Oe(e=" ",t=0){return nt(lo,null,e,t)}function T1(e="",t=!1){return t?(Xt(),Bl(Se,null,e)):nt(Se,null,e)}function Me(e){return e==null||typeof e=="boolean"?nt(Se):q(e)?nt(Ee,null,e.slice()):typeof e=="object"?fn(e):nt(lo,null,String(e))}function fn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:An(e)}function Ul(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(q(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Ul(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(co in t)?t._ctx=pe:s===3&&pe&&(pe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:pe},n=32):(t=String(t),r&64?(n=16,t=[Oe(t)]):n=8);e.children=t,e.shapeFlag|=n}function B_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=to([t.class,r.class]));else if(s==="style")t.style=ze([t.style,r.style]);else if(Xi(s)){const i=t[s],o=r[s];o&&i!==o&&!(q(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function ke(e,t,n,r=null){Ie(e,t,7,[n,r])}const U_=Jf();let $_=0;function j_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||U_,i={uid:$_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new pg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:td(r,s),emitsOptions:Uf(r,s),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:r.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=zg.bind(null,i),e.ce&&e.ce(i),i}let Ft=null;const q_=()=>Ft||pe;let $l,La;{const e=df(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};$l=t("__VUE_INSTANCE_SETTERS__",n=>Ft=n),La=t("__VUE_SSR_SETTERS__",n=>uo=n)}const Ir=e=>{$l(e),e.scope.on()},qn=()=>{Ft&&Ft.scope.off(),$l(null)};function ld(e){return e.vnode.shapeFlag&4}let uo=!1;function H_(e,t=!1){t&&La(t);const{props:n,children:r}=e.vnode,s=ld(e);C_(e,n,s,t),b_(e,r);const i=s?z_(e,t):void 0;return t&&La(!1),i}function z_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Vf(new Proxy(e.ctx,y_));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?G_(e):null;Ir(e),Jn();const i=yn(r,e,0,[e.props,s]);if(Zn(),qn(),uf(i)){if(i.then(qn,qn),t)return i.then(o=>{yu(e,o,t)}).catch(o=>{ro(o,e,0)});e.asyncDep=i}else yu(e,i,t)}else cd(e,t)}function yu(e,t,n){Z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=kf(t)),cd(e,n)}let Eu;function cd(e,t,n){const r=e.type;if(!e.render){if(!t&&Eu&&!r.render){const s=r.template||Ll(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Ot(Ot({isCustomElement:i,delimiters:a},o),l);r.render=Eu(s,c)}}e.render=r.render||we}{Ir(e),Jn();try{E_(e)}finally{Zn(),qn()}}}function K_(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return ce(e,"get","$attrs"),t[n]}}))}function G_(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return K_(e)},slots:e.slots,emit:e.emit,expose:t}}function ho(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(kf(Vf(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in is)return is[n](e)},has(t,n){return n in t||n in is}}))}function W_(e,t=!0){return Z(e)?e.displayName||e.name:e.name||t&&e.__name}function Q_(e){return Z(e)&&"__vccOpts"in e}const de=(e,t)=>Mg(e,t,uo);function jl(e,t,n){const r=arguments.length;return r===2?Et(t)&&!q(t)?Ma(t)?nt(e,null,[t]):nt(e,t):nt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ma(n)&&(n=[n]),nt(e,t,n))}const Y_="3.4.3",X_="http://www.w3.org/2000/svg",J_="http://www.w3.org/1998/Math/MathML",dn=typeof document<"u"?document:null,vu=dn&&dn.createElement("template"),Z_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?dn.createElementNS(X_,e):t==="mathml"?dn.createElementNS(J_,e):dn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>dn.createTextNode(e),createComment:e=>dn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>dn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{vu.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=vu.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ln="transition",Kr="animation",ys=Symbol("_vtc"),fo=(e,{slots:t})=>jl(o_,ty(e),t);fo.displayName="Transition";const ud={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};fo.props=Ot({},Hf,ud);const Nn=(e,t=[])=>{q(e)?e.forEach(n=>n(...t)):e&&e(...t)},Tu=e=>e?q(e)?e.some(t=>t.length>1):e.length>1:!1;function ty(e){const t={};for(const B in e)B in ud||(t[B]=e[B]);if(e.css===!1)return t;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,E=ey(s),w=E&&E[0],I=E&&E[1],{onBeforeEnter:P,onEnter:N,onEnterCancelled:L,onLeave:K,onLeaveCancelled:U,onBeforeAppear:ut=P,onAppear:At=N,onAppearCancelled:J=L}=t,yt=(B,dt,ne)=>{kn(B,dt?u:a),kn(B,dt?c:o),ne&&ne()},lt=(B,dt)=>{B._isLeaving=!1,kn(B,h),kn(B,m),kn(B,f),dt&&dt()},Nt=B=>(dt,ne)=>{const Ge=B?At:N,St=()=>yt(dt,B,ne);Nn(Ge,[dt,St]),wu(()=>{kn(dt,B?l:i),cn(dt,B?u:a),Tu(Ge)||Iu(dt,r,w,St)})};return Ot(t,{onBeforeEnter(B){Nn(P,[B]),cn(B,i),cn(B,o)},onBeforeAppear(B){Nn(ut,[B]),cn(B,l),cn(B,c)},onEnter:Nt(!1),onAppear:Nt(!0),onLeave(B,dt){B._isLeaving=!0;const ne=()=>lt(B,dt);cn(B,h),sy(),cn(B,f),wu(()=>{B._isLeaving&&(kn(B,h),cn(B,m),Tu(K)||Iu(B,r,I,ne))}),Nn(K,[B,ne])},onEnterCancelled(B){yt(B,!1),Nn(L,[B])},onAppearCancelled(B){yt(B,!0),Nn(J,[B])},onLeaveCancelled(B){lt(B),Nn(U,[B])}})}function ey(e){if(e==null)return null;if(Et(e))return[ea(e.enter),ea(e.leave)];{const t=ea(e);return[t,t]}}function ea(e){return og(e)}function cn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ys]||(e[ys]=new Set)).add(t)}function kn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[ys];n&&(n.delete(t),n.size||(e[ys]=void 0))}function wu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let ny=0;function Iu(e,t,n,r){const s=e._endId=++ny,i=()=>{s===e._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=ry(e,t);if(!o)return r();const c=o+"end";let u=0;const h=()=>{e.removeEventListener(c,f),i()},f=m=>{m.target===e&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),e.addEventListener(c,f)}function ry(e,t){const n=window.getComputedStyle(e),r=E=>(n[E]||"").split(", "),s=r(`${ln}Delay`),i=r(`${ln}Duration`),o=Au(s,i),a=r(`${Kr}Delay`),l=r(`${Kr}Duration`),c=Au(a,l);let u=null,h=0,f=0;t===ln?o>0&&(u=ln,h=o,f=i.length):t===Kr?c>0&&(u=Kr,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?ln:Kr:null,f=u?u===ln?i.length:l.length:0);const m=u===ln&&/\b(transform|all)(,|$)/.test(r(`${ln}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:m}}function Au(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Ru(n)+Ru(e[r])))}function Ru(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function sy(){return document.body.offsetHeight}function iy(e,t,n){const r=e[ys];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ql=Symbol("_vod"),oy={beforeMount(e,{value:t},{transition:n}){e[ql]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Gr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Gr(e,!0),r.enter(e)):r.leave(e,()=>{Gr(e,!1)}):Gr(e,t))},beforeUnmount(e,{value:t}){Gr(e,t)}};function Gr(e,t){e.style.display=t?e[ql]:"none"}const ay=Symbol("");function ly(e,t,n){const r=e.style,s=xt(n);if(n&&!s){if(t&&!xt(t))for(const i in t)n[i]==null&&Fa(r,i,"");for(const i in n)Fa(r,i,n[i])}else{const i=r.display;if(s){if(t!==n){const o=r[ay];o&&(n+=";"+o),r.cssText=n}}else t&&e.removeAttribute("style");ql in e&&(r.display=i)}}const Cu=/\s*!important$/;function Fa(e,t,n){if(q(n))n.forEach(r=>Fa(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=cy(e,t);Cu.test(n)?e.setProperty(Mr(r),n.replace(Cu,""),"important"):e[r]=n}}const Pu=["Webkit","Moz","ms"],na={};function cy(e,t){const n=na[t];if(n)return n;let r=He(t);if(r!=="filter"&&r in e)return na[t]=r;r=Zi(r);for(let s=0;s<Pu.length;s++){const i=Pu[s]+r;if(i in e)return na[t]=i}return t}const Su="http://www.w3.org/1999/xlink";function uy(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Su,t.slice(6,t.length)):e.setAttributeNS(Su,t,n);else{const i=fg(t);n==null||i&&!pf(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function hy(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=pf(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function mn(e,t,n,r){e.addEventListener(t,n,r)}function fy(e,t,n,r){e.removeEventListener(t,n,r)}const bu=Symbol("_vei");function dy(e,t,n,r,s=null){const i=e[bu]||(e[bu]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=py(t);if(r){const c=i[t]=_y(r,s);mn(e,a,c,l)}else o&&(fy(e,a,o,l),i[t]=void 0)}}const Vu=/(?:Once|Passive|Capture)$/;function py(e){let t;if(Vu.test(e)){t={};let r;for(;r=e.match(Vu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Mr(e.slice(2)),t]}let ra=0;const my=Promise.resolve(),gy=()=>ra||(my.then(()=>ra=0),ra=Date.now());function _y(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ie(yy(r,n.value),t,5,[r])};return n.value=e,n.attached=gy(),n}function yy(e,t){if(q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Du=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ey=(e,t,n,r,s,i,o,a,l)=>{const c=s==="svg";t==="class"?iy(e,r,c):t==="style"?ly(e,n,r):Xi(t)?vl(t)||dy(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):vy(e,t,r,c))?hy(e,t,r,i,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),uy(e,t,r,c))};function vy(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Du(t)&&Z(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Du(t)&&xt(n)?!1:t in e}const Ar=e=>{const t=e.props["onUpdate:modelValue"]||!1;return q(t)?n=>vi(t,n):t};function Ty(e){e.target.composing=!0}function xu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const tn=Symbol("_assign"),w1={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[tn]=Ar(s);const i=r||s.props&&s.props.type==="number";mn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=bi(a)),e[tn](a)}),n&&mn(e,"change",()=>{e.value=e.value.trim()}),t||(mn(e,"compositionstart",Ty),mn(e,"compositionend",xu),mn(e,"change",xu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[tn]=Ar(i),e.composing)return;const o=s||e.type==="number"?bi(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},I1={deep:!0,created(e,t,n){e[tn]=Ar(n),mn(e,"change",()=>{const r=e._modelValue,s=Es(e),i=e.checked,o=e[tn];if(q(r)){const a=Il(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Or(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(hd(e,i))})},mounted:Nu,beforeUpdate(e,t,n){e[tn]=Ar(n),Nu(e,t,n)}};function Nu(e,{value:t,oldValue:n},r){e._modelValue=t,q(t)?e.checked=Il(t,r.props.value)>-1:Or(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=Us(t,hd(e,!0)))}const A1={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Or(t);mn(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?bi(Es(o)):Es(o));e[tn](e.multiple?s?new Set(i):i:i[0])}),e[tn]=Ar(r)},mounted(e,{value:t}){ku(e,t)},beforeUpdate(e,t,n){e[tn]=Ar(n)},updated(e,{value:t}){ku(e,t)}};function ku(e,t){const n=e.multiple;if(!(n&&!q(t)&&!Or(t))){for(let r=0,s=e.options.length;r<s;r++){const i=e.options[r],o=Es(i);if(n)q(t)?i.selected=Il(t,o)>-1:i.selected=t.has(o);else if(Us(Es(i),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Es(e){return"_value"in e?e._value:e.value}function hd(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const wy=["ctrl","shift","alt","meta"],Iy={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>wy.some(n=>e[`${n}Key`]&&!t.includes(n))},R1=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=Iy[t[o]];if(a&&a(s,t))return}return e(s,...i)})},Ay=Ot({patchProp:Ey},Z_);let Ou;function Ry(){return Ou||(Ou=D_(Ay))}const Cy=(...e)=>{const t=Ry().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Sy(r);if(!s)return;const i=t._component;!Z(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Py(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Py(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Sy(e){return xt(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const lr=typeof window<"u";function by(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const pt=Object.assign;function sa(e,t){const n={};for(const r in t){const s=t[r];n[r]=be(s)?s.map(e):e(s)}return n}const as=()=>{},be=Array.isArray,Vy=/\/$/,Dy=e=>e.replace(Vy,"");function ia(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=Oy(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function xy(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Mu(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Ny(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Rr(t.matched[r],n.matched[s])&&fd(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Rr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function fd(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ky(e[n],t[n]))return!1;return!0}function ky(e,t){return be(e)?Lu(e,t):be(t)?Lu(t,e):e===t}function Lu(e,t){return be(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Oy(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var vs;(function(e){e.pop="pop",e.push="push"})(vs||(vs={}));var ls;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ls||(ls={}));function My(e){if(!e)if(lr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Dy(e)}const Ly=/^[^#]+#/;function Fy(e,t){return e.replace(Ly,"#")+t}function By(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const po=()=>({left:window.pageXOffset,top:window.pageYOffset});function Uy(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=By(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Fu(e,t){return(history.state?history.state.position-t:-1)+e}const Ba=new Map;function $y(e,t){Ba.set(e,t)}function jy(e){const t=Ba.get(e);return Ba.delete(e),t}let qy=()=>location.protocol+"//"+location.host;function dd(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Mu(l,"")}return Mu(n,e)+r+s}function Hy(e,t,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const m=dd(e,location),E=n.value,w=t.value;let I=0;if(f){if(n.value=m,t.value=f,o&&o===E){o=null;return}I=w?f.position-w.position:0}else r(m);s.forEach(P=>{P(n.value,E,{delta:I,type:vs.pop,direction:I?I>0?ls.forward:ls.back:ls.unknown})})};function l(){o=n.value}function c(f){s.push(f);const m=()=>{const E=s.indexOf(f);E>-1&&s.splice(E,1)};return i.push(m),m}function u(){const{history:f}=window;f.state&&f.replaceState(pt({},f.state,{scroll:po()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Bu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?po():null}}function zy(e){const{history:t,location:n}=window,r={value:dd(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:qy()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(m){console.error(m),n[u?"replace":"assign"](f)}}function o(l,c){const u=pt({},t.state,Bu(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=pt({},s.value,t.state,{forward:l,scroll:po()});i(u.current,u,!0);const h=pt({},Bu(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function Ky(e){e=My(e);const t=zy(e),n=Hy(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=pt({location:"",base:e,go:r,createHref:Fy.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Gy(e){return typeof e=="string"||e&&typeof e=="object"}function pd(e){return typeof e=="string"||typeof e=="symbol"}const un={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},md=Symbol("");var Uu;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Uu||(Uu={}));function Cr(e,t){return pt(new Error,{type:e,[md]:!0},t)}function Qe(e,t){return e instanceof Error&&md in e&&(t==null||!!(e.type&t))}const $u="[^/]+?",Wy={sensitive:!1,strict:!1,start:!0,end:!0},Qy=/[.+*?^${}()[\]/\\]/g;function Yy(e,t){const n=pt({},Wy,t),r=[];let s=n.start?"^":"";const i=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const f=c[h];let m=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(Qy,"\\$&"),m+=40;else if(f.type===1){const{value:E,repeatable:w,optional:I,regexp:P}=f;i.push({name:E,repeatable:w,optional:I});const N=P||$u;if(N!==$u){m+=10;try{new RegExp(`(${N})`)}catch(K){throw new Error(`Invalid custom RegExp for param "${E}" (${N}): `+K.message)}}let L=w?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;h||(L=I&&c.length<2?`(?:/${L})`:"/"+L),I&&(L+="?"),s+=L,m+=20,I&&(m+=-8),w&&(m+=-20),N===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const m=u[f]||"",E=i[f-1];h[E.name]=m&&E.repeatable?m.split("/"):m}return h}function l(c){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const m of f)if(m.type===0)u+=m.value;else if(m.type===1){const{value:E,repeatable:w,optional:I}=m,P=E in c?c[E]:"";if(be(P)&&!w)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const N=be(P)?P.join("/"):P;if(!N)if(I)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${E}"`);u+=N}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Xy(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Jy(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Xy(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(ju(r))return 1;if(ju(s))return-1}return s.length-r.length}function ju(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Zy={type:0,value:""},tE=/[a-zA-Z0-9_]/;function eE(e){if(!e)return[[]];if(e==="/")return[[Zy]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:tE.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function nE(e,t,n){const r=Yy(eE(e.path),n),s=pt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function rE(e,t){const n=[],r=new Map;t=zu({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,f){const m=!f,E=sE(u);E.aliasOf=f&&f.record;const w=zu(t,u),I=[E];if("alias"in u){const L=typeof u.alias=="string"?[u.alias]:u.alias;for(const K of L)I.push(pt({},E,{components:f?f.record.components:E.components,path:K,aliasOf:f?f.record:E}))}let P,N;for(const L of I){const{path:K}=L;if(h&&K[0]!=="/"){const U=h.record.path,ut=U[U.length-1]==="/"?"":"/";L.path=h.record.path+(K&&ut+K)}if(P=nE(L,h,w),f?f.alias.push(P):(N=N||P,N!==P&&N.alias.push(P),m&&u.name&&!Hu(P)&&o(u.name)),E.children){const U=E.children;for(let ut=0;ut<U.length;ut++)i(U[ut],P,f&&f.children[ut])}f=f||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&l(P)}return N?()=>{o(N)}:as}function o(u){if(pd(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&Jy(u,n[h])>=0&&(u.record.path!==n[h].record.path||!gd(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Hu(u)&&r.set(u.record.name,u)}function c(u,h){let f,m={},E,w;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Cr(1,{location:u});w=f.record.name,m=pt(qu(h.params,f.keys.filter(N=>!N.optional).map(N=>N.name)),u.params&&qu(u.params,f.keys.map(N=>N.name))),E=f.stringify(m)}else if("path"in u)E=u.path,f=n.find(N=>N.re.test(E)),f&&(m=f.parse(E),w=f.record.name);else{if(f=h.name?r.get(h.name):n.find(N=>N.re.test(h.path)),!f)throw Cr(1,{location:u,currentLocation:h});w=f.record.name,m=pt({},h.params,u.params),E=f.stringify(m)}const I=[];let P=f;for(;P;)I.unshift(P.record),P=P.parent;return{name:w,path:E,params:m,matched:I,meta:oE(I)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function qu(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function sE(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:iE(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function iE(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Hu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function oE(e){return e.reduce((t,n)=>pt(t,n.meta),{})}function zu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function gd(e,t){return t.children.some(n=>n===e||gd(e,n))}const _d=/#/g,aE=/&/g,lE=/\//g,cE=/=/g,uE=/\?/g,yd=/\+/g,hE=/%5B/g,fE=/%5D/g,Ed=/%5E/g,dE=/%60/g,vd=/%7B/g,pE=/%7C/g,Td=/%7D/g,mE=/%20/g;function Hl(e){return encodeURI(""+e).replace(pE,"|").replace(hE,"[").replace(fE,"]")}function gE(e){return Hl(e).replace(vd,"{").replace(Td,"}").replace(Ed,"^")}function Ua(e){return Hl(e).replace(yd,"%2B").replace(mE,"+").replace(_d,"%23").replace(aE,"%26").replace(dE,"`").replace(vd,"{").replace(Td,"}").replace(Ed,"^")}function _E(e){return Ua(e).replace(cE,"%3D")}function yE(e){return Hl(e).replace(_d,"%23").replace(uE,"%3F")}function EE(e){return e==null?"":yE(e).replace(lE,"%2F")}function Ni(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function vE(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(yd," "),o=i.indexOf("="),a=Ni(o<0?i:i.slice(0,o)),l=o<0?null:Ni(i.slice(o+1));if(a in t){let c=t[a];be(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Ku(e){let t="";for(let n in e){const r=e[n];if(n=_E(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(be(r)?r.map(i=>i&&Ua(i)):[r&&Ua(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function TE(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=be(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const wE=Symbol(""),Gu=Symbol(""),mo=Symbol(""),zl=Symbol(""),$a=Symbol("");function Wr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function pn(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Cr(4,{from:n,to:t})):h instanceof Error?a(h):Gy(h)?a(Cr(2,{from:t,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},c=e.call(r&&r.instances[s],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function oa(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if(IE(a)){const c=(a.__vccOpts||a)[t];c&&s.push(pn(c,n,r,i,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=by(c)?c.default:c;i.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&pn(f,n,r,i,o)()}))}}return s}function IE(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Wu(e){const t=Pe(mo),n=Pe(zl),r=de(()=>t.resolve(ae(e.to))),s=de(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Rr.bind(null,u));if(f>-1)return f;const m=Qu(l[c-2]);return c>1&&Qu(u)===m&&h[h.length-1].path!==m?h.findIndex(Rr.bind(null,l[c-2])):f}),i=de(()=>s.value>-1&&PE(n.params,r.value.params)),o=de(()=>s.value>-1&&s.value===n.matched.length-1&&fd(n.params,r.value.params));function a(l={}){return CE(l)?t[ae(e.replace)?"replace":"push"](ae(e.to)).catch(as):Promise.resolve()}return{route:r,href:de(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const AE=ue({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Wu,setup(e,{slots:t}){const n=no(Wu(e)),{options:r}=Pe(mo),s=de(()=>({[Yu(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Yu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:jl("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),RE=AE;function CE(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function PE(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!be(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Qu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Yu=(e,t,n)=>e??t??n,SE=ue({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Pe($a),s=de(()=>e.route||r.value),i=Pe(Gu,0),o=de(()=>{let c=ae(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=de(()=>s.value.matched[o.value]);wi(Gu,de(()=>o.value+1)),wi(wE,a),wi($a,s);const l=$s();return ss(()=>[l.value,a.value,e.name],([c,u,h],[f,m,E])=>{u&&(u.instances[h]=c,m&&m!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!Rr(u,m)||!f)&&(u.enterCallbacks[h]||[]).forEach(w=>w(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Xu(n.default,{Component:f,route:c});const m=h.props[u],E=m?m===!0?c.params:typeof m=="function"?m(c):m:null,I=jl(f,pt({},E,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Xu(n.default,{Component:I,route:c})||I}}});function Xu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const wd=SE;function bE(e){const t=rE(e.routes,e),n=e.parseQuery||vE,r=e.stringifyQuery||Ku,s=e.history,i=Wr(),o=Wr(),a=Wr(),l=Lg(un);let c=un;lr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=sa.bind(null,y=>""+y),h=sa.bind(null,EE),f=sa.bind(null,Ni);function m(y,O){let V,$;return pd(y)?(V=t.getRecordMatcher(y),$=O):$=y,t.addRoute($,V)}function E(y){const O=t.getRecordMatcher(y);O&&t.removeRoute(O)}function w(){return t.getRoutes().map(y=>y.record)}function I(y){return!!t.getRecordMatcher(y)}function P(y,O){if(O=pt({},O||l.value),typeof y=="string"){const g=ia(n,y,O.path),_=t.resolve({path:g.path},O),T=s.createHref(g.fullPath);return pt(g,_,{params:f(_.params),hash:Ni(g.hash),redirectedFrom:void 0,href:T})}let V;if("path"in y)V=pt({},y,{path:ia(n,y.path,O.path).path});else{const g=pt({},y.params);for(const _ in g)g[_]==null&&delete g[_];V=pt({},y,{params:h(g)}),O.params=h(O.params)}const $=t.resolve(V,O),ft=y.hash||"";$.params=u(f($.params));const d=xy(r,pt({},y,{hash:gE(ft),path:$.path})),p=s.createHref(d);return pt({fullPath:d,hash:ft,query:r===Ku?TE(y.query):y.query||{}},$,{redirectedFrom:void 0,href:p})}function N(y){return typeof y=="string"?ia(n,y,l.value.path):pt({},y)}function L(y,O){if(c!==y)return Cr(8,{from:O,to:y})}function K(y){return At(y)}function U(y){return K(pt(N(y),{replace:!0}))}function ut(y){const O=y.matched[y.matched.length-1];if(O&&O.redirect){const{redirect:V}=O;let $=typeof V=="function"?V(y):V;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=N($):{path:$},$.params={}),pt({query:y.query,hash:y.hash,params:"path"in $?{}:y.params},$)}}function At(y,O){const V=c=P(y),$=l.value,ft=y.state,d=y.force,p=y.replace===!0,g=ut(V);if(g)return At(pt(N(g),{state:typeof g=="object"?pt({},ft,g.state):ft,force:d,replace:p}),O||V);const _=V;_.redirectedFrom=O;let T;return!d&&Ny(r,$,V)&&(T=Cr(16,{to:_,from:$}),xe($,$,!0,!1)),(T?Promise.resolve(T):lt(_,$)).catch(A=>Qe(A)?Qe(A,2)?A:on(A):ht(A,_,$)).then(A=>{if(A){if(Qe(A,2))return At(pt({replace:p},N(A.to),{state:typeof A.to=="object"?pt({},ft,A.to.state):ft,force:d}),O||_)}else A=B(_,$,!0,p,ft);return Nt(_,$,A),A})}function J(y,O){const V=L(y,O);return V?Promise.reject(V):Promise.resolve()}function yt(y){const O=sr.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(y):y()}function lt(y,O){let V;const[$,ft,d]=VE(y,O);V=oa($.reverse(),"beforeRouteLeave",y,O);for(const g of $)g.leaveGuards.forEach(_=>{V.push(pn(_,y,O))});const p=J.bind(null,y,O);return V.push(p),Kt(V).then(()=>{V=[];for(const g of i.list())V.push(pn(g,y,O));return V.push(p),Kt(V)}).then(()=>{V=oa(ft,"beforeRouteUpdate",y,O);for(const g of ft)g.updateGuards.forEach(_=>{V.push(pn(_,y,O))});return V.push(p),Kt(V)}).then(()=>{V=[];for(const g of d)if(g.beforeEnter)if(be(g.beforeEnter))for(const _ of g.beforeEnter)V.push(pn(_,y,O));else V.push(pn(g.beforeEnter,y,O));return V.push(p),Kt(V)}).then(()=>(y.matched.forEach(g=>g.enterCallbacks={}),V=oa(d,"beforeRouteEnter",y,O),V.push(p),Kt(V))).then(()=>{V=[];for(const g of o.list())V.push(pn(g,y,O));return V.push(p),Kt(V)}).catch(g=>Qe(g,8)?g:Promise.reject(g))}function Nt(y,O,V){a.list().forEach($=>yt(()=>$(y,O,V)))}function B(y,O,V,$,ft){const d=L(y,O);if(d)return d;const p=O===un,g=lr?history.state:{};V&&($||p?s.replace(y.fullPath,pt({scroll:p&&g&&g.scroll},ft)):s.push(y.fullPath,ft)),l.value=y,xe(y,O,V,p),on()}let dt;function ne(){dt||(dt=s.listen((y,O,V)=>{if(!ri.listening)return;const $=P(y),ft=ut($);if(ft){At(pt(ft,{replace:!0}),$).catch(as);return}c=$;const d=l.value;lr&&$y(Fu(d.fullPath,V.delta),po()),lt($,d).catch(p=>Qe(p,12)?p:Qe(p,2)?(At(p.to,$).then(g=>{Qe(g,20)&&!V.delta&&V.type===vs.pop&&s.go(-1,!1)}).catch(as),Promise.reject()):(V.delta&&s.go(-V.delta,!1),ht(p,$,d))).then(p=>{p=p||B($,d,!1),p&&(V.delta&&!Qe(p,8)?s.go(-V.delta,!1):V.type===vs.pop&&Qe(p,20)&&s.go(-1,!1)),Nt($,d,p)}).catch(as)}))}let Ge=Wr(),St=Wr(),gt;function ht(y,O,V){on(y);const $=St.list();return $.length?$.forEach(ft=>ft(y,O,V)):console.error(y),Promise.reject(y)}function We(){return gt&&l.value!==un?Promise.resolve():new Promise((y,O)=>{Ge.add([y,O])})}function on(y){return gt||(gt=!y,ne(),Ge.list().forEach(([O,V])=>y?V(y):O()),Ge.reset()),y}function xe(y,O,V,$){const{scrollBehavior:ft}=e;if(!lr||!ft)return Promise.resolve();const d=!V&&jy(Fu(y.fullPath,0))||($||!V)&&history.state&&history.state.scroll||null;return Mf().then(()=>ft(y,O,d)).then(p=>p&&Uy(p)).catch(p=>ht(p,y,O))}const ie=y=>s.go(y);let rr;const sr=new Set,ri={currentRoute:l,listening:!0,addRoute:m,removeRoute:E,hasRoute:I,getRoutes:w,resolve:P,options:e,push:K,replace:U,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:St.add,isReady:We,install(y){const O=this;y.component("RouterLink",RE),y.component("RouterView",wd),y.config.globalProperties.$router=O,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>ae(l)}),lr&&!rr&&l.value===un&&(rr=!0,K(s.location).catch(ft=>{}));const V={};for(const ft in un)Object.defineProperty(V,ft,{get:()=>l.value[ft],enumerable:!0});y.provide(mo,O),y.provide(zl,Sf(V)),y.provide($a,l);const $=y.unmount;sr.add(y),y.unmount=function(){sr.delete(y),sr.size<1&&(c=un,dt&&dt(),dt=null,l.value=un,rr=!1,gt=!1),$()}}};function Kt(y){return y.reduce((O,V)=>O.then(()=>yt(V)),Promise.resolve())}return ri}function VE(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(c=>Rr(c,a))?r.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Rr(c,l))||s.push(l))}return[n,r,s]}function DE(){return Pe(mo)}function C1(){return Pe(zl)}const xE=X("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"},null,-1),NE=[xE],Id=ue({__name:"IconGithub",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",{style:ze({fill:t.color??"#fff"}),viewBox:"0 0 98 96",xmlns:"http://www.w3.org/2000/svg"},NE,4))}}),kE=ue({__name:"IconHome",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",{style:ze({fill:t.color??"#fff"}),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[X("path",{style:ze({fill:t.color??"#fff"}),d:"M512 128 128 447.936V896h255.936V640H640v256h255.936V447.936z"},null,4)],4))}}),OE={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ME=ue({__name:"IconMenu",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",OE,[X("path",{style:ze({stroke:t.color??"#fff"}),id:"Vector",d:"M11 17H19M5 12H19M11 7H19","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,4)]))}}),Kl=e=>(kl("data-v-ade3f470"),e=e(),Ol(),e),LE={class:"bar"},FE=Kl(()=>X("span",{id:"bingo"},"BINGO",-1)),BE={class:"mobile-menu-container"},UE={class:"menu-container"},$E={target:"_blank",rel:"noopener noreferrer",href:"https://github.com/BelgianNoise",class:"github"},jE={class:"mobile-menu-slide-in"},qE=Kl(()=>X("hr",null,null,-1)),HE=Kl(()=>X("hr",null,null,-1)),zE=ue({__name:"HeaderComponent",setup(e){DE().afterEach((r,s)=>{r.fullPath!==s.fullPath&&(n.value=!1)});let n=$s(!1);return(r,s)=>{const i=Ml("RouterLink");return Xt(),me("header",{class:to({mobileSlideOutVisible:ae(n)})},[X("div",LE,[FE,X("div",BE,[nt(i,{to:"/"},{default:ye(()=>[nt(kE,{color:"var(--color-foreground)",class:"icon"})]),_:1}),X("button",{onClick:s[0]||(s[0]=o=>te(n)?n.value=!ae(n):n=!ae(n))},[nt(ME,{color:"var(--color-foreground)",class:"icon"})])]),X("div",UE,[nt(i,{to:"/"},{default:ye(()=>[Oe(" Home ")]),_:1}),nt(i,{to:"/pricing"},{default:ye(()=>[Oe(" Pricing ")]),_:1}),nt(i,{to:"/create"},{default:ye(()=>[Oe(" Create New ")]),_:1}),X("a",$E,[nt(Id,{class:"icon",color:"var(--color-foreground)"})])])]),nt(fo,{name:"slide"},{default:ye(()=>[r_(X("div",jE,[nt(i,{to:"/"},{default:ye(()=>[Oe(" Home ")]),_:1}),qE,nt(i,{to:"/pricing"},{default:ye(()=>[Oe(" Pricing ")]),_:1}),HE,nt(i,{to:"/create"},{default:ye(()=>[Oe(" Create New ")]),_:1})],512),[[oy,ae(n)]])]),_:1})],2)}}}),js=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},KE=js(zE,[["__scopeId","data-v-ade3f470"]]),GE="/linkedin.png",WE={viewBox:"0 -28.5 256 256",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid",fill:"transparent"},QE=ue({__name:"IconDiscord",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",WE,[X("g",null,[X("path",{style:ze({fill:t.color??"#5865F2"}),d:"M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z","fill-rule":"nonzero"},null,4)])]))}}),go=e=>(kl("data-v-4de5ad3e"),e=e(),Ol(),e),YE=go(()=>X("hr",null,null,-1)),XE=go(()=>X("p",{class:"disclaimer"}," Since you do not require an account to use this app, all data is public in some way or another. Please do not keep any sensitive data in your games, and do not try to circumvent the makeshift security and ruin the fun for others. ",-1)),JE=go(()=>X("p",null,[Oe(" made by "),X("span",{class:"name"},"Arthur Joppart"),Oe(" using "),X("a",{class:"vue-green",href:"https://vuejs.org/",target:"_blank",rel:"noreferrer"},"Vue.js")],-1)),ZE={class:"socials"},tv={href:"https://github.com/BelgianNoise",target:"_blank",rel:"noreferrer"},ev=go(()=>X("a",{href:"https://www.linkedin.com/in/arthur-joppart-728a7817a/",target:"_blank",rel:"noreferrer"},[X("img",{src:GE,alt:"linkedin"})],-1)),nv={href:"https://discordapp.com/users/125339040613531648",target:"_blank",rel:"noreferrer"},rv=ue({__name:"FooterComponent",setup(e){return(t,n)=>(Xt(),me("footer",null,[YE,XE,JE,X("div",ZE,[X("a",tv,[nt(Id)]),ev,X("a",nv,[nt(QE,{color:"var(--color-foreground-light)"})])])]))}}),sv=js(rv,[["__scopeId","data-v-4de5ad3e"]]),iv=ue({__name:"App",setup(e){return(t,n)=>(Xt(),me(Ee,null,[nt(KE),X("main",null,[nt(fo,{name:"fade",duration:{enter:100,leave:100}},{default:ye(()=>[nt(ae(wd))]),_:1})]),nt(sv)],64))}}),ov=js(iv,[["__scopeId","data-v-e7b6c176"]]),av="modulepreload",lv=function(e){return"/"+e},Ju={},or=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(o=>{if(o=lv(o),o in Ju)return;Ju[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":av,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var Zu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},cv=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Rd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ad(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):cv(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new uv;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class uv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hv=function(e){const t=Ad(e);return Rd.encodeByteArray(t,!0)},ki=function(e){return hv(e).replace(/\./g,"")},fv=function(e){try{return Rd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=()=>dv().__FIREBASE_DEFAULTS__,mv=()=>{if(typeof process>"u"||typeof Zu>"u")return;const e=Zu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},gv=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&fv(e[1]);return t&&JSON.parse(t)},Cd=()=>{try{return pv()||mv()||gv()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},_v=e=>{var t,n;return(n=(t=Cd())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},yv=e=>{const t=_v(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Pd=()=>{var e;return(e=Cd())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ki(JSON.stringify(n)),ki(JSON.stringify(o)),""].join(".")}function Tv(){try{return typeof indexedDB=="object"}catch{return!1}}function wv(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="FirebaseError";class Lr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Iv,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sd.prototype.create)}}class Sd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?Av(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Lr(s,a,r)}}function Av(e,t){return e.replace(Rv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Rv=/\{\$([^}]+)}/g;function ja(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(th(i)&&th(o)){if(!ja(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function th(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(e){return e&&e._delegate?e._delegate:e}class Ts{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Ev;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Sv(t))try{this.getOrInitializeService({instanceIdentifier:On})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=On){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=On){return this.instances.has(t)}getOptions(t=On){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pv(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=On){return this.component?this.component.multipleInstances?t:On:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pv(e){return e===On?void 0:e}function Sv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Cv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const Vv={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},Dv=ot.INFO,xv={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},Nv=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=xv[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bd{constructor(t){this.name=t,this._logLevel=Dv,this._logHandler=Nv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Vv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const kv=(e,t)=>t.some(n=>e instanceof n);let eh,nh;function Ov(){return eh||(eh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mv(){return nh||(nh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vd=new WeakMap,qa=new WeakMap,Dd=new WeakMap,aa=new WeakMap,Gl=new WeakMap;function Lv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(En(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Vd.set(n,e)}).catch(()=>{}),Gl.set(t,e),t}function Fv(e){if(qa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});qa.set(e,t)}let Ha={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return qa.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Dd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return En(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Bv(e){Ha=e(Ha)}function Uv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(la(this),t,...n);return Dd.set(r,t.sort?t.sort():[t]),En(r)}:Mv().includes(e)?function(...t){return e.apply(la(this),t),En(Vd.get(this))}:function(...t){return En(e.apply(la(this),t))}}function $v(e){return typeof e=="function"?Uv(e):(e instanceof IDBTransaction&&Fv(e),kv(e,Ov())?new Proxy(e,Ha):e)}function En(e){if(e instanceof IDBRequest)return Lv(e);if(aa.has(e))return aa.get(e);const t=$v(e);return t!==e&&(aa.set(e,t),Gl.set(t,e)),t}const la=e=>Gl.get(e);function jv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=En(o);return r&&o.addEventListener("upgradeneeded",l=>{r(En(o.result),l.oldVersion,l.newVersion,En(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const qv=["get","getKey","getAll","getAllKeys","count"],Hv=["put","add","delete","clear"],ca=new Map;function rh(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ca.get(t))return ca.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Hv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qv.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ca.set(t,i),i}Bv(e=>({...e,get:(t,n,r)=>rh(t,n)||e.get(t,n,r),has:(t,n)=>!!rh(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Kv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const za="@firebase/app",sh="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new bd("@firebase/app"),Gv="@firebase/app-compat",Wv="@firebase/analytics-compat",Qv="@firebase/analytics",Yv="@firebase/app-check-compat",Xv="@firebase/app-check",Jv="@firebase/auth",Zv="@firebase/auth-compat",tT="@firebase/database",eT="@firebase/database-compat",nT="@firebase/functions",rT="@firebase/functions-compat",sT="@firebase/installations",iT="@firebase/installations-compat",oT="@firebase/messaging",aT="@firebase/messaging-compat",lT="@firebase/performance",cT="@firebase/performance-compat",uT="@firebase/remote-config",hT="@firebase/remote-config-compat",fT="@firebase/storage",dT="@firebase/storage-compat",pT="@firebase/firestore",mT="@firebase/firestore-compat",gT="firebase",_T="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="[DEFAULT]",yT={[za]:"fire-core",[Gv]:"fire-core-compat",[Qv]:"fire-analytics",[Wv]:"fire-analytics-compat",[Xv]:"fire-app-check",[Yv]:"fire-app-check-compat",[Jv]:"fire-auth",[Zv]:"fire-auth-compat",[tT]:"fire-rtdb",[eT]:"fire-rtdb-compat",[nT]:"fire-fn",[rT]:"fire-fn-compat",[sT]:"fire-iid",[iT]:"fire-iid-compat",[oT]:"fire-fcm",[aT]:"fire-fcm-compat",[lT]:"fire-perf",[cT]:"fire-perf-compat",[uT]:"fire-rc",[hT]:"fire-rc-compat",[fT]:"fire-gcs",[dT]:"fire-gcs-compat",[pT]:"fire-fst",[mT]:"fire-fst-compat","fire-js":"fire-js",[gT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new Map,Ga=new Map;function ET(e,t){try{e.container.addComponent(t)}catch(n){Wn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Mi(e){const t=e.name;if(Ga.has(t))return Wn.debug(`There were multiple attempts to register component ${t}.`),!1;Ga.set(t,e);for(const n of Oi.values())ET(n,e);return!0}function vT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},vn=new Sd("app","Firebase",TT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=_T;function xd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Ka,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw vn.create("bad-app-name",{appName:String(s)});if(n||(n=Pd()),!n)throw vn.create("no-options");const i=Oi.get(s);if(i){if(ja(n,i.options)&&ja(r,i.config))return i;throw vn.create("duplicate-app",{appName:s})}const o=new bv(s);for(const l of Ga.values())o.addComponent(l);const a=new wT(n,r,o);return Oi.set(s,a),a}function AT(e=Ka){const t=Oi.get(e);if(!t&&e===Ka&&Pd())return xd();if(!t)throw vn.create("no-app",{appName:e});return t}function yr(e,t,n){var r;let s=(r=yT[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Wn.warn(a.join(" "));return}Mi(new Ts(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="firebase-heartbeat-database",CT=1,ws="firebase-heartbeat-store";let ua=null;function Nd(){return ua||(ua=jv(RT,CT,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(ws)}}}).catch(e=>{throw vn.create("idb-open",{originalErrorMessage:e.message})})),ua}async function PT(e){try{return await(await Nd()).transaction(ws).objectStore(ws).get(kd(e))}catch(t){if(t instanceof Lr)Wn.warn(t.message);else{const n=vn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Wn.warn(n.message)}}}async function ih(e,t){try{const r=(await Nd()).transaction(ws,"readwrite");await r.objectStore(ws).put(t,kd(e)),await r.done}catch(n){if(n instanceof Lr)Wn.warn(n.message);else{const r=vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wn.warn(r.message)}}}function kd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=1024,bT=30*24*60*60*1e3;class VT{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=oh();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=bT}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oh(),{heartbeatsToSend:r,unsentEntries:s}=DT(this._heartbeatsCache.heartbeats),i=ki(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function oh(){return new Date().toISOString().substring(0,10)}function DT(e,t=ST){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ah(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ah(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tv()?wv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ih(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ih(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function ah(e){return ki(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(e){Mi(new Ts("platform-logger",t=>new zv(t),"PRIVATE")),Mi(new Ts("heartbeat",t=>new VT(t),"PRIVATE")),yr(za,sh,e),yr(za,sh,"esm2017"),yr("fire-js","")}NT("");var kT="firebase",OT="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(kT,OT,"app");var MT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D,Wl=Wl||{},W=MT||self;function _o(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function qs(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function LT(e){return Object.prototype.hasOwnProperty.call(e,ha)&&e[ha]||(e[ha]=++FT)}var ha="closure_uid_"+(1e9*Math.random()>>>0),FT=0;function BT(e,t,n){return e.call.apply(e.bind,arguments)}function UT(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Jt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Jt=BT:Jt=UT,Jt.apply(null,arguments)}function hi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ut(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function Sn(){this.s=this.s,this.o=this.o}var $T=0;Sn.prototype.s=!1;Sn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),$T!=0)&&LT(this)};Sn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Od=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ql(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function lh(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(_o(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Zt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var jT=function(){if(!W.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};W.addEventListener("test",n,t),W.removeEventListener("test",n,t)}catch{}return e}();function Is(e){return/^[\s\xa0]*$/.test(e)}function yo(){var e=W.navigator;return e&&(e=e.userAgent)?e:""}function Fe(e){return yo().indexOf(e)!=-1}function Yl(e){return Yl[" "](e),e}Yl[" "]=function(){};function qT(e,t){var n=Ow;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var HT=Fe("Opera"),Pr=Fe("Trident")||Fe("MSIE"),Md=Fe("Edge"),Wa=Md||Pr,Ld=Fe("Gecko")&&!(yo().toLowerCase().indexOf("webkit")!=-1&&!Fe("Edge"))&&!(Fe("Trident")||Fe("MSIE"))&&!Fe("Edge"),zT=yo().toLowerCase().indexOf("webkit")!=-1&&!Fe("Edge");function Fd(){var e=W.document;return e?e.documentMode:void 0}var Qa;t:{var fa="",da=function(){var e=yo();if(Ld)return/rv:([^\);]+)(\)|;)/.exec(e);if(Md)return/Edge\/([\d\.]+)/.exec(e);if(Pr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(zT)return/WebKit\/(\S+)/.exec(e);if(HT)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(da&&(fa=da?da[1]:""),Pr){var pa=Fd();if(pa!=null&&pa>parseFloat(fa)){Qa=String(pa);break t}}Qa=fa}var Ya;if(W.document&&Pr){var ch=Fd();Ya=ch||parseInt(Qa,10)||void 0}else Ya=void 0;var KT=Ya;function As(e,t){if(Zt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ld){t:{try{Yl(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:GT[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&As.$.h.call(this)}}Ut(As,Zt);var GT={2:"touch",3:"pen",4:"mouse"};As.prototype.h=function(){As.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Hs="closure_listenable_"+(1e6*Math.random()|0),WT=0;function QT(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++WT,this.fa=this.ia=!1}function Eo(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Xl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function YT(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Bd(e){const t={};for(const n in e)t[n]=e[n];return t}const uh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ud(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<uh.length;i++)n=uh[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function vo(e){this.src=e,this.g={},this.h=0}vo.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Ja(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new QT(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function Xa(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Od(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Eo(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Ja(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Jl="closure_lm_"+(1e6*Math.random()|0),ma={};function $d(e,t,n,r,s){if(r&&r.once)return qd(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)$d(e,t[i],n,r,s);return null}return n=ec(n),e&&e[Hs]?e.O(t,n,qs(r)?!!r.capture:!!r,s):jd(e,t,n,!1,r,s)}function jd(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=qs(s)?!!s.capture:!!s,a=tc(e);if(a||(e[Jl]=a=new vo(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=XT(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)jT||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(zd(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function XT(){function e(n){return t.call(e.src,e.listener,n)}const t=JT;return e}function qd(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)qd(e,t[i],n,r,s);return null}return n=ec(n),e&&e[Hs]?e.P(t,n,qs(r)?!!r.capture:!!r,s):jd(e,t,n,!0,r,s)}function Hd(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Hd(e,t[i],n,r,s);else r=qs(r)?!!r.capture:!!r,n=ec(n),e&&e[Hs]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Ja(i,n,r,s),-1<n&&(Eo(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=tc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ja(t,n,r,s)),(n=-1<e?t[e]:null)&&Zl(n))}function Zl(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Hs])Xa(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(zd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tc(t))?(Xa(n,e),n.h==0&&(n.src=null,t[Jl]=null)):Eo(e)}}}function zd(e){return e in ma?ma[e]:ma[e]="on"+e}function JT(e,t){if(e.fa)e=!0;else{t=new As(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Zl(e),e=n.call(r,t)}return e}function tc(e){return e=e[Jl],e instanceof vo?e:null}var ga="__closure_events_fn_"+(1e9*Math.random()>>>0);function ec(e){return typeof e=="function"?e:(e[ga]||(e[ga]=function(t){return e.handleEvent(t)}),e[ga])}function Bt(){Sn.call(this),this.i=new vo(this),this.S=this,this.J=null}Ut(Bt,Sn);Bt.prototype[Hs]=!0;Bt.prototype.removeEventListener=function(e,t,n,r){Hd(this,e,t,n,r)};function Ht(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Zt(t,e);else if(t instanceof Zt)t.target=t.target||e;else{var s=t;t=new Zt(r,e),Ud(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=fi(o,r,!0,t)&&s}if(o=t.g=e,s=fi(o,r,!0,t)&&s,s=fi(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=fi(o,r,!1,t)&&s}Bt.prototype.N=function(){if(Bt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Eo(n[r]);delete e.g[t],e.h--}}this.J=null};Bt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Bt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function fi(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Xa(e.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var nc=W.JSON.stringify;class ZT{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function tw(){var e=rc;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class ew{constructor(){this.h=this.g=null}add(t,n){const r=Kd.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Kd=new ZT(()=>new nw,e=>e.reset());class nw{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function rw(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function sw(e){W.setTimeout(()=>{throw e},0)}let Rs,Cs=!1,rc=new ew,Gd=()=>{const e=W.Promise.resolve(void 0);Rs=()=>{e.then(iw)}};var iw=()=>{for(var e;e=tw();){try{e.h.call(e.g)}catch(n){sw(n)}var t=Kd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Cs=!1};function To(e,t){Bt.call(this),this.h=e||1,this.g=t||W,this.j=Jt(this.qb,this),this.l=Date.now()}Ut(To,Bt);D=To.prototype;D.ga=!1;D.T=null;D.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ht(this,"tick"),this.ga&&(sc(this),this.start()))}};D.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function sc(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}D.N=function(){To.$.N.call(this),sc(this),delete this.g};function ic(e,t,n){if(typeof e=="function")n&&(e=Jt(e,n));else if(e&&typeof e.handleEvent=="function")e=Jt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:W.setTimeout(e,t||0)}function Wd(e){e.g=ic(()=>{e.g=null,e.i&&(e.i=!1,Wd(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class ow extends Sn{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Wd(this)}N(){super.N(),this.g&&(W.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(e){Sn.call(this),this.h=e,this.g={}}Ut(Ps,Sn);var hh=[];function Qd(e,t,n,r){Array.isArray(n)||(n&&(hh[0]=n.toString()),n=hh);for(var s=0;s<n.length;s++){var i=$d(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Yd(e){Xl(e.g,function(t,n){this.g.hasOwnProperty(n)&&Zl(t)},e),e.g={}}Ps.prototype.N=function(){Ps.$.N.call(this),Yd(this)};Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wo(){this.g=!0}wo.prototype.Ea=function(){this.g=!1};function aw(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function lw(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function dr(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+uw(e,n)+(r?" "+r:"")})}function cw(e,t){e.info(function(){return"TIMEOUT: "+t})}wo.prototype.info=function(){};function uw(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return nc(n)}catch{return t}}var tr={},fh=null;function Io(){return fh=fh||new Bt}tr.Ta="serverreachability";function Xd(e){Zt.call(this,tr.Ta,e)}Ut(Xd,Zt);function Ss(e){const t=Io();Ht(t,new Xd(t))}tr.STAT_EVENT="statevent";function Jd(e,t){Zt.call(this,tr.STAT_EVENT,e),this.stat=t}Ut(Jd,Zt);function se(e){const t=Io();Ht(t,new Jd(t,e))}tr.Ua="timingevent";function Zd(e,t){Zt.call(this,tr.Ua,e),this.size=t}Ut(Zd,Zt);function zs(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return W.setTimeout(function(){e()},t)}var Ao={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},tp={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oc(){}oc.prototype.h=null;function dh(e){return e.h||(e.h=e.i())}function ep(){}var Ks={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ac(){Zt.call(this,"d")}Ut(ac,Zt);function lc(){Zt.call(this,"c")}Ut(lc,Zt);var Za;function Ro(){}Ut(Ro,oc);Ro.prototype.g=function(){return new XMLHttpRequest};Ro.prototype.i=function(){return{}};Za=new Ro;function Gs(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ps(this),this.P=hw,e=Wa?125:void 0,this.V=new To(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new np}function np(){this.i=null,this.g="",this.h=!1}var hw=45e3,rp={},tl={};D=Gs.prototype;D.setTimeout=function(e){this.P=e};function el(e,t,n){e.L=1,e.A=Po(en(t)),e.u=n,e.S=!0,sp(e,null)}function sp(e,t){e.G=Date.now(),Ws(e),e.B=en(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),fp(n.i,"t",r),e.o=0,n=e.l.J,e.h=new np,e.g=Np(e.l,n?t:null,!e.u),0<e.O&&(e.M=new ow(Jt(e.Pa,e,e.g),e.O)),Qd(e.U,e.g,"readystatechange",e.nb),t=e.I?Bd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ss(),aw(e.j,e.v,e.B,e.m,e.W,e.u)}D.nb=function(e){e=e.target;const t=this.M;t&&Be(e)==3?t.l():this.Pa(e)};D.Pa=function(e){try{if(e==this.g)t:{const u=Be(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Wa||this.g&&(this.h.h||this.g.ja()||_h(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?Ss(3):Ss(2)),Co(this);var n=this.g.da();this.ca=n;e:if(ip(this)){var r=_h(this.g);e="";var s=r.length,i=Be(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),cs(this);var o="";break e}this.h.i=new W.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,lw(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Is(a)){var c=a;break e}}c=null}if(n=c)dr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nl(this,n);else{this.i=!1,this.s=3,se(12),Fn(this),cs(this);break t}}this.S?(op(this,u,o),Wa&&this.i&&u==3&&(Qd(this.U,this.V,"tick",this.mb),this.V.start())):(dr(this.j,this.m,o,null),nl(this,o)),u==4&&Fn(this),this.i&&!this.J&&(u==4?bp(this.l,this):(this.i=!1,Ws(this)))}else xw(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),Fn(this),cs(this)}}}catch{}finally{}};function ip(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function op(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=fw(e,n),s==tl){t==4&&(e.s=4,se(14),r=!1),dr(e.j,e.m,null,"[Incomplete Response]");break}else if(s==rp){e.s=4,se(15),dr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else dr(e.j,e.m,s,null),nl(e,s);ip(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,se(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),pc(t),t.M=!0,se(11))):(dr(e.j,e.m,n,"[Invalid Chunked Response]"),Fn(e),cs(e))}D.mb=function(){if(this.g){var e=Be(this.g),t=this.g.ja();this.o<t.length&&(Co(this),op(this,e,t),this.i&&e!=4&&Ws(this))}};function fw(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?tl:(n=Number(t.substring(n,r)),isNaN(n)?rp:(r+=1,r+n>t.length?tl:(t=t.slice(r,r+n),e.o=r+n,t)))}D.cancel=function(){this.J=!0,Fn(this)};function Ws(e){e.Y=Date.now()+e.P,ap(e,e.P)}function ap(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=zs(Jt(e.lb,e),t)}function Co(e){e.C&&(W.clearTimeout(e.C),e.C=null)}D.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(cw(this.j,this.B),this.L!=2&&(Ss(),se(17)),Fn(this),this.s=2,cs(this)):ap(this,this.Y-e)};function cs(e){e.l.H==0||e.J||bp(e.l,e)}function Fn(e){Co(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,sc(e.V),Yd(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function nl(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||rl(n.i,e))){if(!e.K&&rl(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Bi(n),Do(n);else break t;dc(n),se(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=zs(Jt(n.ib,n),6e3));if(1>=mp(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Bn(n,11)}else if((e.K||n.g==e)&&Bi(n),!Is(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=e.g;if(m){const E=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var i=r.i;i.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(cc(i,i.h),i.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,wt(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=xp(r,r.J?r.pa:null,r.Y),o.K){gp(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Co(a),Ws(a)),r.g=o}else Pp(r);0<n.j.length&&xo(n)}else c[0]!="stop"&&c[0]!="close"||Bn(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Bn(n,7):fc(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Ss(4)}catch{}}function dw(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(_o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function pw(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(_o(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function lp(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(_o(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=pw(e),r=dw(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var cp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mw(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Hn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Hn){this.h=e.h,Li(this,e.j),this.s=e.s,this.g=e.g,Fi(this,e.m),this.l=e.l;var t=e.i,n=new bs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ph(this,n),this.o=e.o}else e&&(t=String(e).match(cp))?(this.h=!1,Li(this,t[1]||"",!0),this.s=Zr(t[2]||""),this.g=Zr(t[3]||"",!0),Fi(this,t[4]),this.l=Zr(t[5]||"",!0),ph(this,t[6]||"",!0),this.o=Zr(t[7]||"")):(this.h=!1,this.i=new bs(null,this.h))}Hn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ts(t,mh,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(ts(t,mh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(ts(n,n.charAt(0)=="/"?yw:_w,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ts(n,vw)),e.join("")};function en(e){return new Hn(e)}function Li(e,t,n){e.j=n?Zr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Fi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ph(e,t,n){t instanceof bs?(e.i=t,Tw(e.i,e.h)):(n||(t=ts(t,Ew)),e.i=new bs(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function Po(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ts(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,gw),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gw(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var mh=/[#\/\?@]/g,_w=/[#\?:]/g,yw=/[#\?]/g,Ew=/[#\?@]/g,vw=/#/g;function bs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bn(e){e.g||(e.g=new Map,e.h=0,e.i&&mw(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}D=bs.prototype;D.add=function(e,t){bn(this),this.i=null,e=Fr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function up(e,t){bn(e),t=Fr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function hp(e,t){return bn(e),t=Fr(e,t),e.g.has(t)}D.forEach=function(e,t){bn(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};D.ta=function(){bn(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};D.Z=function(e){bn(this);let t=[];if(typeof e=="string")hp(this,e)&&(t=t.concat(this.g.get(Fr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};D.set=function(e,t){return bn(this),this.i=null,e=Fr(this,e),hp(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};D.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function fp(e,t,n){up(e,t),0<n.length&&(e.i=null,e.g.set(Fr(e,t),Ql(n)),e.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function Fr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tw(e,t){t&&!e.j&&(bn(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(up(this,r),fp(this,s,n))},e)),e.j=t}var ww=class{constructor(e,t){this.g=e,this.map=t}};function dp(e){this.l=e||Iw,W.PerformanceNavigationTiming?(e=W.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(W.g&&W.g.Ka&&W.g.Ka()&&W.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Iw=10;function pp(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function mp(e){return e.h?1:e.g?e.g.size:0}function rl(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function cc(e,t){e.g?e.g.add(t):e.h=t}function gp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}dp.prototype.cancel=function(){if(this.i=_p(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function _p(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ql(e.i)}var Aw=class{stringify(e){return W.JSON.stringify(e,void 0)}parse(e){return W.JSON.parse(e,void 0)}};function Rw(){this.g=new Aw}function Cw(e,t,n){const r=n||"";try{lp(e,function(s,i){let o=s;qs(s)&&(o=nc(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Pw(e,t){const n=new wo;if(W.Image){const r=new Image;r.onload=hi(di,n,r,"TestLoadImage: loaded",!0,t),r.onerror=hi(di,n,r,"TestLoadImage: error",!1,t),r.onabort=hi(di,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=hi(di,n,r,"TestLoadImage: timeout",!1,t),W.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function di(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function So(e){this.l=e.ec||null,this.j=e.ob||!1}Ut(So,oc);So.prototype.g=function(){return new bo(this.l,this.j)};So.prototype.i=function(e){return function(){return e}}({});function bo(e,t){Bt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=uc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ut(bo,Bt);var uc=0;D=bo.prototype;D.open=function(e,t){if(this.readyState!=uc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Vs(this)};D.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||W).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qs(this)),this.readyState=uc};D.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Vs(this)),this.g&&(this.readyState=3,Vs(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof W.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yp(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function yp(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}D.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qs(this):Vs(this),this.readyState==3&&yp(this)}};D.Za=function(e){this.g&&(this.response=this.responseText=e,Qs(this))};D.Ya=function(e){this.g&&(this.response=e,Qs(this))};D.ka=function(){this.g&&Qs(this)};function Qs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Vs(e)}D.setRequestHeader=function(e,t){this.v.append(e,t)};D.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Vs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var Sw=W.JSON.parse;function Pt(e){Bt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ep,this.L=this.M=!1}Ut(Pt,Bt);var Ep="",bw=/^https?$/i,Vw=["POST","PUT"];D=Pt.prototype;D.Oa=function(e){this.M=e};D.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Za.g(),this.C=this.u?dh(this.u):dh(Za),this.g.onreadystatechange=Jt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){gh(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=W.FormData&&e instanceof W.FormData,!(0<=Od(Vw,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wp(this),0<this.B&&((this.L=Dw(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jt(this.ua,this)):this.A=ic(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){gh(this,i)}};function Dw(e){return Pr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}D.ua=function(){typeof Wl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ht(this,"timeout"),this.abort(8))};function gh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,vp(e),Vo(e)}function vp(e){e.F||(e.F=!0,Ht(e,"complete"),Ht(e,"error"))}D.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ht(this,"complete"),Ht(this,"abort"),Vo(this))};D.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vo(this,!0)),Pt.$.N.call(this)};D.La=function(){this.s||(this.G||this.v||this.l?Tp(this):this.kb())};D.kb=function(){Tp(this)};function Tp(e){if(e.h&&typeof Wl<"u"&&(!e.C[1]||Be(e)!=4||e.da()!=2)){if(e.v&&Be(e)==4)ic(e.La,0,e);else if(Ht(e,"readystatechange"),Be(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(cp)[1]||null;!s&&W.self&&W.self.location&&(s=W.self.location.protocol.slice(0,-1)),r=!bw.test(s?s.toLowerCase():"")}n=r}if(n)Ht(e,"complete"),Ht(e,"success");else{e.m=6;try{var i=2<Be(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",vp(e)}}finally{Vo(e)}}}}function Vo(e,t){if(e.g){wp(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ht(e,"ready");try{n.onreadystatechange=r}catch{}}}function wp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(W.clearTimeout(e.A),e.A=null)}D.isActive=function(){return!!this.g};function Be(e){return e.g?e.g.readyState:0}D.da=function(){try{return 2<Be(this)?this.g.status:-1}catch{return-1}};D.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Sw(t)}};function _h(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ep:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function xw(e){const t={};e=(e.g&&2<=Be(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Is(e[r]))continue;var n=rw(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}YT(t,function(r){return r.join(", ")})}D.Ia=function(){return this.m};D.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Ip(e){let t="";return Xl(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function hc(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Ip(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):wt(e,t,n))}function Qr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ap(e){this.Ga=0,this.j=[],this.l=new wo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Qr("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Qr("baseRetryDelayMs",5e3,e),this.hb=Qr("retryDelaySeedMs",1e4,e),this.eb=Qr("forwardChannelMaxRetries",2,e),this.xa=Qr("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new dp(e&&e.concurrentRequestLimit),this.Ja=new Rw,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}D=Ap.prototype;D.ra=8;D.H=1;function fc(e){if(Rp(e),e.H==3){var t=e.W++,n=en(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),Ys(e,n),t=new Gs(e,e.l,t),t.L=2,t.A=Po(en(n)),n=!1,W.navigator&&W.navigator.sendBeacon)try{n=W.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&W.Image&&(new Image().src=t.A,n=!0),n||(t.g=Np(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Ws(t)}Dp(e)}function Do(e){e.g&&(pc(e),e.g.cancel(),e.g=null)}function Rp(e){Do(e),e.u&&(W.clearTimeout(e.u),e.u=null),Bi(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&W.clearTimeout(e.m),e.m=null)}function xo(e){if(!pp(e.i)&&!e.m){e.m=!0;var t=e.Na;Rs||Gd(),Cs||(Rs(),Cs=!0),rc.add(t,e),e.C=0}}function Nw(e,t){return mp(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=zs(Jt(e.Na,e,t),Vp(e,e.C)),e.C++,!0)}D.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Gs(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Bd(i),Ud(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Cp(this,s,t),n=en(this.I),wt(n,"RID",e),wt(n,"CVER",22),this.F&&wt(n,"X-HTTP-Session-Id",this.F),Ys(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ip(i)))+"&"+t:this.o&&hc(n,this.o,i)),cc(this.i,s),this.bb&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),s.aa=!0,el(s,n,null)):el(s,n,t),this.H=2}}else this.H==3&&(e?yh(this,e):this.j.length==0||pp(this.i)||yh(this))};function yh(e,t){var n;t?n=t.m:n=e.W++;const r=en(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.V),Ys(e,r),e.o&&e.s&&hc(r,e.o,e.s),n=new Gs(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Cp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),cc(e.i,n),el(n,r,t)}function Ys(e,t){e.na&&Xl(e.na,function(n,r){wt(t,r,n)}),e.h&&lp({},function(n,r){wt(t,r,n)})}function Cp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Jt(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{Cw(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function Pp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Rs||Gd(),Cs||(Rs(),Cs=!0),rc.add(t,e),e.A=0}}function dc(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=zs(Jt(e.Ma,e),Vp(e,e.A)),e.A++,!0)}D.Ma=function(){if(this.u=null,Sp(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=zs(Jt(this.jb,this),e)}};D.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,se(10),Do(this),Sp(this))};function pc(e){e.B!=null&&(W.clearTimeout(e.B),e.B=null)}function Sp(e){e.g=new Gs(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=en(e.wa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.V),wt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&wt(t,"TO",e.qa),wt(t,"TYPE","xmlhttp"),Ys(e,t),e.o&&e.s&&hc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Po(en(t)),n.u=null,n.S=!0,sp(n,e)}D.ib=function(){this.v!=null&&(this.v=null,Do(this),dc(this),se(19))};function Bi(e){e.v!=null&&(W.clearTimeout(e.v),e.v=null)}function bp(e,t){var n=null;if(e.g==t){Bi(e),pc(e),e.g=null;var r=2}else if(rl(e.i,t))n=t.F,gp(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=Io(),Ht(r,new Zd(r,n)),xo(e)}else Pp(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&Nw(e,t)||r==2&&dc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:Bn(e,5);break;case 4:Bn(e,10);break;case 3:Bn(e,6);break;default:Bn(e,2)}}}function Vp(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Bn(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Jt(e.pb,e);n||(n=new Hn("//www.google.com/images/cleardot.gif"),W.location&&W.location.protocol=="http"||Li(n,"https"),Po(n)),Pw(n.toString(),r)}else se(2);e.H=0,e.h&&e.h.za(t),Dp(e),Rp(e)}D.pb=function(e){e?(this.l.info("Successfully pinged google.com"),se(2)):(this.l.info("Failed to ping google.com"),se(1))};function Dp(e){if(e.H=0,e.ma=[],e.h){const t=_p(e.i);(t.length!=0||e.j.length!=0)&&(lh(e.ma,t),lh(e.ma,e.j),e.i.i.length=0,Ql(e.j),e.j.length=0),e.h.ya()}}function xp(e,t,n){var r=n instanceof Hn?en(n):new Hn(n);if(r.g!="")t&&(r.g=t+"."+r.g),Fi(r,r.m);else{var s=W.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Hn(null);r&&Li(i,r),t&&(i.g=t),s&&Fi(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&wt(r,n,t),wt(r,"VER",e.ra),Ys(e,r),r}function Np(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Pt(new So({ob:n})):new Pt(e.va),t.Oa(e.J),t}D.isActive=function(){return!!this.h&&this.h.isActive(this)};function kp(){}D=kp.prototype;D.Ba=function(){};D.Aa=function(){};D.za=function(){};D.ya=function(){};D.isActive=function(){return!0};D.Va=function(){};function Ui(){if(Pr&&!(10<=Number(KT)))throw Error("Environmental error: no available transport.")}Ui.prototype.g=function(e,t){return new ge(e,t)};function ge(e,t){Bt.call(this),this.g=new Ap(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Is(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Is(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Br(this)}Ut(ge,Bt);ge.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;se(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=xp(e,null,e.Y),xo(e)};ge.prototype.close=function(){fc(this.g)};ge.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=nc(e),e=n);t.j.push(new ww(t.fb++,e)),t.H==3&&xo(t)};ge.prototype.N=function(){this.g.h=null,delete this.j,fc(this.g),delete this.g,ge.$.N.call(this)};function Op(e){ac.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ut(Op,ac);function Mp(){lc.call(this),this.status=1}Ut(Mp,lc);function Br(e){this.g=e}Ut(Br,kp);Br.prototype.Ba=function(){Ht(this.g,"a")};Br.prototype.Aa=function(e){Ht(this.g,new Op(e))};Br.prototype.za=function(e){Ht(this.g,new Mp)};Br.prototype.ya=function(){Ht(this.g,"b")};function kw(){this.blockSize=-1}function Ve(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ut(Ve,kw);Ve.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function _a(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}Ve.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)_a(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){_a(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){_a(this,r),s=0;break}}this.h=s,this.i+=t};Ve.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function mt(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var Ow={};function mc(e){return-128<=e&&128>e?qT(e,function(t){return new mt([t|0],0>t?-1:0)}):new mt([e|0],0>e?-1:0)}function Ue(e){if(isNaN(e)||!isFinite(e))return Er;if(0>e)return jt(Ue(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=sl;return new mt(t,0)}function Lp(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return jt(Lp(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ue(Math.pow(t,8)),r=Er,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Ue(Math.pow(t,i)),r=r.R(i).add(Ue(o))):(r=r.R(n),r=r.add(Ue(o)))}return r}var sl=4294967296,Er=mc(0),il=mc(1),Eh=mc(16777216);D=mt.prototype;D.ea=function(){if(ve(this))return-jt(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:sl+r)*t,t*=sl}return e};D.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Je(this))return"0";if(ve(this))return"-"+jt(this).toString(e);for(var t=Ue(Math.pow(e,6)),n=this,r="";;){var s=ji(n,t).g;n=$i(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Je(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};D.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Je(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function ve(e){return e.h==-1}D.X=function(e){return e=$i(this,e),ve(e)?-1:Je(e)?0:1};function jt(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new mt(n,~e.h).add(il)}D.abs=function(){return ve(this)?jt(this):this};D.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new mt(n,n[n.length-1]&-2147483648?-1:0)};function $i(e,t){return e.add(jt(t))}D.R=function(e){if(Je(this)||Je(e))return Er;if(ve(this))return ve(e)?jt(this).R(jt(e)):jt(jt(this).R(e));if(ve(e))return jt(this.R(jt(e)));if(0>this.X(Eh)&&0>e.X(Eh))return Ue(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,l=e.D(s)&65535;n[2*r+2*s]+=o*l,pi(n,2*r+2*s),n[2*r+2*s+1]+=i*l,pi(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,pi(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,pi(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new mt(n,0)};function pi(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Yr(e,t){this.g=e,this.h=t}function ji(e,t){if(Je(t))throw Error("division by zero");if(Je(e))return new Yr(Er,Er);if(ve(e))return t=ji(jt(e),t),new Yr(jt(t.g),jt(t.h));if(ve(t))return t=ji(e,jt(t)),new Yr(jt(t.g),t.h);if(30<e.g.length){if(ve(e)||ve(t))throw Error("slowDivide_ only works with positive integers.");for(var n=il,r=t;0>=r.X(e);)n=vh(n),r=vh(r);var s=ar(n,1),i=ar(r,1);for(r=ar(r,2),n=ar(n,2);!Je(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=ar(r,1),n=ar(n,1)}return t=$i(e,s.R(t)),new Yr(s,t)}for(s=Er;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Ue(n),o=i.R(t);ve(o)||0<o.X(e);)n-=r,i=Ue(n),o=i.R(t);Je(i)&&(i=il),s=s.add(i),e=$i(e,o)}return new Yr(s,e)}D.gb=function(e){return ji(this,e).h};D.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new mt(n,this.h&e.h)};D.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new mt(n,this.h|e.h)};D.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new mt(n,this.h^e.h)};function vh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new mt(n,e.h)}function ar(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new mt(s,e.h)}Ui.prototype.createWebChannel=Ui.prototype.g;ge.prototype.send=ge.prototype.u;ge.prototype.open=ge.prototype.m;ge.prototype.close=ge.prototype.close;Ao.NO_ERROR=0;Ao.TIMEOUT=8;Ao.HTTP_ERROR=6;tp.COMPLETE="complete";ep.EventType=Ks;Ks.OPEN="a";Ks.CLOSE="b";Ks.ERROR="c";Ks.MESSAGE="d";Bt.prototype.listen=Bt.prototype.O;Pt.prototype.listenOnce=Pt.prototype.P;Pt.prototype.getLastError=Pt.prototype.Sa;Pt.prototype.getLastErrorCode=Pt.prototype.Ia;Pt.prototype.getStatus=Pt.prototype.da;Pt.prototype.getResponseJson=Pt.prototype.Wa;Pt.prototype.getResponseText=Pt.prototype.ja;Pt.prototype.send=Pt.prototype.ha;Pt.prototype.setWithCredentials=Pt.prototype.Oa;Ve.prototype.digest=Ve.prototype.l;Ve.prototype.reset=Ve.prototype.reset;Ve.prototype.update=Ve.prototype.j;mt.prototype.add=mt.prototype.add;mt.prototype.multiply=mt.prototype.R;mt.prototype.modulo=mt.prototype.gb;mt.prototype.compare=mt.prototype.X;mt.prototype.toNumber=mt.prototype.ea;mt.prototype.toString=mt.prototype.toString;mt.prototype.getBits=mt.prototype.D;mt.fromNumber=Ue;mt.fromString=Lp;var Mw=function(){return new Ui},Lw=function(){return Io()},ya=Ao,Fw=tp,Bw=tr,Th={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},mi=ep,Uw=Pt,$w=Ve,vr=mt;const wh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new bd("@firebase/firestore");function Xr(){return Qn.logLevel}function F(e,...t){if(Qn.logLevel<=ot.DEBUG){const n=t.map(gc);Qn.debug(`Firestore (${Ur}): ${e}`,...n)}}function nn(e,...t){if(Qn.logLevel<=ot.ERROR){const n=t.map(gc);Qn.error(`Firestore (${Ur}): ${e}`,...n)}}function Sr(e,...t){if(Qn.logLevel<=ot.WARN){const n=t.map(gc);Qn.warn(`Firestore (${Ur}): ${e}`,...n)}}function gc(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e="Unexpected state"){const t=`FIRESTORE (${Ur}) INTERNAL ASSERTION FAILED: `+e;throw nn(t),new Error(t)}function vt(e,t){e||G()}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Lr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Wt.UNAUTHENTICATED))}shutdown(){}}class qw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Hw{constructor(t){this.t=t,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zn,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt(typeof r.accessToken=="string"),new Fp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return vt(t===null||typeof t=="string"),new Wt(t)}}class zw{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Kw{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new zw(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ww{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(vt(typeof n.token=="string"),this.R=n.token,new Gw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=Qw(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function br(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return kt.fromMillis(Date.now())}static fromDate(t){return kt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new kt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Y(t)}static min(){return new Y(new kt(0,0))}static max(){return new Y(new kt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,n,r){n===void 0?n=0:n>t.length&&G(),r===void 0?r=t.length-n:r>t.length-n&&G(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Ds.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ds?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class It extends Ds{construct(t,n,r){return new It(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new M(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new It(n)}static emptyPath(){return new It([])}}const Yw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Ds{construct(t,n,r){return new qt(t,n,r)}static isValidIdentifier(t){return Yw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new M(v.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new M(v.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.path=t}static fromPath(t){return new H(It.fromString(t))}static fromName(t){return new H(It.fromString(t).popFirst(5))}static empty(){return new H(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&It.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return It.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new H(new It(t.slice()))}}function Xw(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new Rn(s,H.empty(),t)}function Jw(e){return new Rn(e.readTime,e.key,-1)}class Rn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Rn(Y.min(),H.empty(),-1)}static max(){return new Rn(Y.max(),H.empty(),-1)}}function Zw(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=H.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(e){if(e.code!==v.FAILED_PRECONDITION||e.message!==t0)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new R((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):R.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):R.reject(n)}static resolve(t){return new R((n,r)=>{n(t)})}static reject(t){return new R((n,r)=>{r(t)})}static waitFor(t){return new R((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(t){let n=R.resolve(!1);for(const r of t)n=n.next(s=>s?R.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new R((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new R((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function Js(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}_c._e=-1;function No(e){return e==null}function qi(e){return e===0&&1/e==-1/0}function n0(e){return typeof e=="number"&&Number.isInteger(e)&&!qi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $r(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Up(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t,n){this.comparator=t,this.root=n||$t.EMPTY}insert(t,n){return new Ct(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(t){return new Ct(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$t.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gi(this.root,t,this.comparator,!1)}getReverseIterator(){return new gi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gi(this.root,t,this.comparator,!0)}}class gi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $t{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??$t.RED,this.left=s??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new $t(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return $t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const t=this.left.check();if(t!==this.right.check())throw G();return t+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(t,n,r,s,i){return this}insert(t,n,r){return new $t(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t){this.comparator=t,this.data=new Ct(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ah(this.data.getIterator())}getIteratorFrom(t){return new Ah(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof zt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new zt(this.comparator);return n.data=t,n}}class Ah{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.fields=t,t.sort(qt.comparator)}static empty(){return new Ce([])}unionWith(t){let n=new zt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ce(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return br(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $p("Invalid base64 string: "+i):i}}(t);return new ee(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new ee(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ee.EMPTY_BYTE_STRING=new ee("");const r0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(e){if(vt(!!e),typeof e=="string"){let t=0;const n=r0.exec(e);if(vt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vt(e.seconds),nanos:Vt(e.nanos)}}function Vt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Yn(e){return typeof e=="string"?ee.fromBase64String(e):ee.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ec(e){const t=e.mapValue.fields.__previous_value__;return yc(t)?Ec(t):t}function xs(e){const t=Cn(e.mapValue.fields.__local_write_time__.timestampValue);return new kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(t,n,r,s,i,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ns{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Ns("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Ns&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yc(e)?4:i0(e)?9007199254740991:10:G()}function Ke(e,t){if(e===t)return!0;const n=Xn(e);if(n!==Xn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xs(e).isEqual(xs(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Cn(s.timestampValue),a=Cn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Yn(s.bytesValue).isEqual(Yn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Vt(s.geoPointValue.latitude)===Vt(i.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Vt(s.integerValue)===Vt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Vt(s.doubleValue),a=Vt(i.doubleValue);return o===a?qi(o)===qi(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return br(e.arrayValue.values||[],t.arrayValue.values||[],Ke);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Ih(o)!==Ih(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ke(o[l],a[l])))return!1;return!0}(e,t);default:return G()}}function ks(e,t){return(e.values||[]).find(n=>Ke(n,t))!==void 0}function Vr(e,t){if(e===t)return 0;const n=Xn(e),r=Xn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=Vt(i.integerValue||i.doubleValue),l=Vt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Rh(e.timestampValue,t.timestampValue);case 4:return Rh(xs(e),xs(t));case 5:return ct(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Yn(i),l=Yn(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ct(a[c],l[c]);if(u!==0)return u}return ct(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=ct(Vt(i.latitude),Vt(o.latitude));return a!==0?a:ct(Vt(i.longitude),Vt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Vr(a[c],l[c]);if(u)return u}return ct(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===_i.mapValue&&o===_i.mapValue)return 0;if(i===_i.mapValue)return 1;if(o===_i.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=ct(l[h],u[h]);if(f!==0)return f;const m=Vr(a[l[h]],c[u[h]]);if(m!==0)return m}return ct(l.length,u.length)}(e.mapValue,t.mapValue);default:throw G()}}function Rh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=Cn(e),r=Cn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Dr(e){return ol(e)}function ol(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Cn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Yn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return H.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ol(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ol(n.fields[o])}`;return s+"}"}(e.mapValue):G()}function Ch(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function al(e){return!!e&&"integerValue"in e}function vc(e){return!!e&&"arrayValue"in e}function Ph(e){return!!e&&"nullValue"in e}function Sh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ai(e){return!!e&&"mapValue"in e}function us(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $r(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=us(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=us(e.arrayValue.values[n]);return t}return Object.assign({},e)}function i0(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.value=t}static empty(){return new Te({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ai(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=us(n)}setAll(t){let n=qt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=us(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ai(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ke(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ai(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){$r(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Te(us(this.value))}}function jp(e){const t=[];return $r(e.fields,(n,r)=>{const s=new qt([n]);if(Ai(r)){const i=jp(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new Ce(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Qt(t,0,Y.min(),Y.min(),Y.min(),Te.empty(),0)}static newFoundDocument(t,n,r,s){return new Qt(t,1,n,Y.min(),r,s,0)}static newNoDocument(t,n){return new Qt(t,2,n,Y.min(),Y.min(),Te.empty(),0)}static newUnknownDocument(t,n){return new Qt(t,3,n,Y.min(),Y.min(),Te.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Te.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Te.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Qt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,n){this.position=t,this.inclusive=n}}function bh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Vr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ke(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(t,n="asc"){this.field=t,this.dir=n}}function o0(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{}class Dt extends qp{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new l0(t,n,r):n==="array-contains"?new h0(t,r):n==="in"?new f0(t,r):n==="not-in"?new d0(t,r):n==="array-contains-any"?new p0(t,r):new Dt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new c0(t,r):new u0(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vr(n,this.value)):n!==null&&Xn(this.value)===Xn(n)&&this.matchesComparison(Vr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class De extends qp{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new De(t,n)}matches(t){return Hp(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Hp(e){return e.op==="and"}function zp(e){return a0(e)&&Hp(e)}function a0(e){for(const t of e.filters)if(t instanceof De)return!1;return!0}function ll(e){if(e instanceof Dt)return e.field.canonicalString()+e.op.toString()+Dr(e.value);if(zp(e))return e.filters.map(t=>ll(t)).join(",");{const t=e.filters.map(n=>ll(n)).join(",");return`${e.op}(${t})`}}function Kp(e,t){return e instanceof Dt?function(r,s){return s instanceof Dt&&r.op===s.op&&r.field.isEqual(s.field)&&Ke(r.value,s.value)}(e,t):e instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Kp(o,s.filters[a]),!0):!1}(e,t):void G()}function Gp(e){return e instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Dr(n.value)}`}(e):e instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(Gp).join(" ,")+"}"}(e):"Filter"}class l0 extends Dt{constructor(t,n,r){super(t,n,r),this.key=H.fromName(r.referenceValue)}matches(t){const n=H.comparator(t.key,this.key);return this.matchesComparison(n)}}class c0 extends Dt{constructor(t,n){super(t,"in",n),this.keys=Wp("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class u0 extends Dt{constructor(t,n){super(t,"not-in",n),this.keys=Wp("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Wp(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class h0 extends Dt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vc(n)&&ks(n.arrayValue,this.value)}}class f0 extends Dt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ks(this.value.arrayValue,n)}}class d0 extends Dt{constructor(t,n){super(t,"not-in",n)}matches(t){if(ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!ks(this.value.arrayValue,n)}}class p0 extends Dt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ks(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Dh(e,t=null,n=[],r=[],s=null,i=null,o=null){return new m0(e,t,n,r,s,i,o)}function Tc(e){const t=tt(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>ll(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),No(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Dr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Dr(r)).join(",")),t.ce=n}return t.ce}function wc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!o0(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Kp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Vh(e.startAt,t.startAt)&&Vh(e.endAt,t.endAt)}function cl(e){return H.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function g0(e,t,n,r,s,i,o,a){return new jr(e,t,n,r,s,i,o,a)}function Ic(e){return new jr(e)}function xh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Qp(e){return e.collectionGroup!==null}function hs(e){const t=tt(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zt(qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new Os(i,r))}),n.has(qt.keyField().canonicalString())||t.le.push(new Os(qt.keyField(),r))}return t.le}function $e(e){const t=tt(e);return t.he||(t.he=_0(t,hs(e))),t.he}function _0(e,t){if(e.limitType==="F")return Dh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Os(s.field,i)});const n=e.endAt?new Hi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hi(e.startAt.position,e.startAt.inclusive):null;return Dh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ul(e,t){const n=e.filters.concat([t]);return new jr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zi(e,t,n){return new jr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ko(e,t){return wc($e(e),$e(t))&&e.limitType===t.limitType}function Yp(e){return`${Tc($e(e))}|lt:${e.limitType}`}function cr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Gp(s)).join(", ")}]`),No(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Dr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Dr(s)).join(",")),`Target(${r})`}($e(e))}; limitType=${e.limitType})`}function Oo(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):H.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of hs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=bh(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,hs(r),s)||r.endAt&&!function(o,a,l){const c=bh(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,hs(r),s))}(e,t)}function y0(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xp(e){return(t,n)=>{let r=!1;for(const s of hs(e)){const i=E0(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function E0(e,t,n){const r=e.field.isKeyField()?H.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Vr(l,c):G()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){$r(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Up(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new Ct(H.comparator);function rn(){return v0}const Jp=new Ct(H.comparator);function es(...e){let t=Jp;for(const n of e)t=t.insert(n.key,n);return t}function Zp(e){let t=Jp;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Un(){return fs()}function tm(){return fs()}function fs(){return new qr(e=>e.toString(),(e,t)=>e.isEqual(t))}const T0=new Ct(H.comparator),w0=new zt(H.comparator);function rt(...e){let t=w0;for(const n of e)t=t.add(n);return t}const I0=new zt(ct);function A0(){return I0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qi(t)?"-0":t}}function nm(e){return{integerValue:""+e}}function R0(e,t){return n0(t)?nm(t):em(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this._=void 0}}function C0(e,t,n){return e instanceof Ki?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&yc(i)&&(i=Ec(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof Ms?sm(e,t):e instanceof Ls?im(e,t):function(s,i){const o=rm(s,i),a=Nh(o)+Nh(s.Ie);return al(o)&&al(s.Ie)?nm(a):em(s.serializer,a)}(e,t)}function P0(e,t,n){return e instanceof Ms?sm(e,t):e instanceof Ls?im(e,t):n}function rm(e,t){return e instanceof Gi?function(r){return al(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Ki extends Mo{}class Ms extends Mo{constructor(t){super(),this.elements=t}}function sm(e,t){const n=om(t);for(const r of e.elements)n.some(s=>Ke(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ls extends Mo{constructor(t){super(),this.elements=t}}function im(e,t){let n=om(t);for(const r of e.elements)n=n.filter(s=>!Ke(s,r));return{arrayValue:{values:n}}}class Gi extends Mo{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Nh(e){return Vt(e.integerValue||e.doubleValue)}function om(e){return vc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function S0(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Ms&&s instanceof Ms||r instanceof Ls&&s instanceof Ls?br(r.elements,s.elements,Ke):r instanceof Gi&&s instanceof Gi?Ke(r.Ie,s.Ie):r instanceof Ki&&s instanceof Ki}(e.transform,t.transform)}class b0{constructor(t,n){this.version=t,this.transformResults=n}}class je{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new je}static exists(t){return new je(void 0,t)}static updateTime(t){return new je(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ri(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Lo{}function am(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new cm(e.key,je.none()):new Zs(e.key,e.data,je.none());{const n=e.data,r=Te.empty();let s=new zt(qt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new er(e.key,r,new Ce(s.toArray()),je.none())}}function V0(e,t,n){e instanceof Zs?function(s,i,o){const a=s.value.clone(),l=Oh(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof er?function(s,i,o){if(!Ri(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Oh(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(lm(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function ds(e,t,n,r){return e instanceof Zs?function(i,o,a,l){if(!Ri(i.precondition,o))return a;const c=i.value.clone(),u=Mh(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof er?function(i,o,a,l){if(!Ri(i.precondition,o))return a;const c=Mh(i.fieldTransforms,l,o),u=o.data;return u.setAll(lm(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return Ri(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function D0(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=rm(r.transform,s||null);i!=null&&(n===null&&(n=Te.empty()),n.set(r.field,i))}return n||null}function kh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&br(r,s,(i,o)=>S0(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Zs extends Lo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class er extends Lo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lm(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Oh(e,t,n){const r=new Map;vt(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,P0(o,a,n[s]))}return r}function Mh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,C0(i,o,t))}return r}class cm extends Lo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x0 extends Lo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&V0(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ds(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ds(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=tm();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=am(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),rt())}isEqual(t){return this.batchId===t.batchId&&br(this.mutations,t.mutations,(n,r)=>kh(n,r))&&br(this.baseMutations,t.baseMutations,(n,r)=>kh(n,r))}}class Ac{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){vt(t.mutations.length===r.length);let s=function(){return T0}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ac(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,st;function M0(e){switch(e){default:return G();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function um(e){if(e===void 0)return nn("GRPC error has no .code"),v.UNKNOWN;switch(e){case bt.OK:return v.OK;case bt.CANCELLED:return v.CANCELLED;case bt.UNKNOWN:return v.UNKNOWN;case bt.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case bt.INTERNAL:return v.INTERNAL;case bt.UNAVAILABLE:return v.UNAVAILABLE;case bt.UNAUTHENTICATED:return v.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case bt.NOT_FOUND:return v.NOT_FOUND;case bt.ALREADY_EXISTS:return v.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return v.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case bt.ABORTED:return v.ABORTED;case bt.OUT_OF_RANGE:return v.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return v.UNIMPLEMENTED;case bt.DATA_LOSS:return v.DATA_LOSS;default:return G()}}(st=bt||(bt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=new vr([4294967295,4294967295],0);function Lh(e){const t=L0().encode(e),n=new $w;return n.update(t),new Uint8Array(n.digest())}function Fh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new vr([n,r],0),new vr([s,i],0)]}class Rc{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ns(`Invalid padding: ${n}`);if(r<0)throw new ns(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ns(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ns(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=vr.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(vr.fromNumber(r)));return s.compare(F0)===1&&(s=new vr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Lh(t),[r,s]=Fh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Rc(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Lh(t),[r,s]=Fh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ns extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,ti.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Fo(Y.min(),s,new Ct(ct),rn(),rt())}}class ti{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ti(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class hm{constructor(t,n){this.targetId=t,this.fe=n}}class fm{constructor(t,n,r=ee.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Bh{constructor(){this.ge=0,this.pe=$h(),this.ye=ee.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=rt(),n=rt(),r=rt();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G()}}),new ti(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=$h()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,vt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class B0{constructor(t){this.Le=t,this.ke=new Map,this.qe=rn(),this.Qe=Uh(),this.Ke=new Ct(ct)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:G()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(cl(i))if(r===0){const o=new H(i.path);this.We(n,o,Qt.newNoDocument(o,Y.min()))}else vt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Yn(r).toUint8Array()}catch(l){if(l instanceof $p)return Sr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rc(o,s,i)}catch(l){return Sr(l instanceof ns?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&cl(a.target)){const l=new H(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Qt.newNoDocument(l,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=rt();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new Fo(t,n,this.Ke,this.qe,r);return this.qe=rn(),this.Qe=Uh(),this.Ke=new Ct(ct),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Bh,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new zt(ct),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Bh),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Uh(){return new Ct(H.comparator)}function $h(){return new Ct(H.comparator)}const U0={asc:"ASCENDING",desc:"DESCENDING"},$0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j0={and:"AND",or:"OR"};class q0{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function hl(e,t){return e.useProto3Json||No(t)?t:{value:t}}function Wi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function dm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function H0(e,t){return Wi(e,t.toTimestamp())}function qe(e){return vt(!!e),Y.fromTimestamp(function(n){const r=Cn(n);return new kt(r.seconds,r.nanos)}(e))}function Cc(e,t){return function(r){return new It(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function pm(e){const t=It.fromString(e);return vt(ym(t)),t}function fl(e,t){return Cc(e.databaseId,t.path)}function Ea(e,t){const n=pm(t);if(n.get(1)!==e.databaseId.projectId)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new H(mm(n))}function dl(e,t){return Cc(e.databaseId,t)}function z0(e){const t=pm(e);return t.length===4?It.emptyPath():mm(t)}function pl(e){return new It(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function mm(e){return vt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function jh(e,t,n){return{name:fl(e,t),fields:n.value.mapValue.fields}}function K0(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:G()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(vt(u===void 0||typeof u=="string"),ee.fromBase64String(u||"")):(vt(u===void 0||u instanceof Uint8Array),ee.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?v.UNKNOWN:um(c.code);return new M(u,c.message||"")}(o);n=new fm(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ea(e,r.document.name),i=qe(r.document.updateTime),o=r.document.createTime?qe(r.document.createTime):Y.min(),a=new Te({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ci(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ea(e,r.document),i=r.readTime?qe(r.readTime):Y.min(),o=Qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ci([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ea(e,r.document),i=r.removedTargetIds||[];n=new Ci([],i,s,null)}else{if(!("filter"in t))return G();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new O0(s,i),a=r.targetId;n=new hm(a,o)}}return n}function G0(e,t){let n;if(t instanceof Zs)n={update:jh(e,t.key,t.value)};else if(t instanceof cm)n={delete:fl(e,t.key)};else if(t instanceof er)n={update:jh(e,t.key,t.data),updateMask:nI(t.fieldMask)};else{if(!(t instanceof x0))return G();n={verify:fl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ms)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ls)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw G()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:H0(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(e,t.precondition)),n}function W0(e,t){return e&&e.length>0?(vt(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?qe(s.updateTime):qe(i);return o.isEqual(Y.min())&&(o=qe(i)),new b0(o,s.transformResults||[])}(n,t))):[]}function Q0(e,t){return{documents:[dl(e,t.path)]}}function Y0(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=dl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=dl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return _m(De.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:ur(h.field),direction:Z0(h.dir)}}(c))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=hl(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function X0(e){let t=z0(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=gm(h);return f instanceof De&&zp(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Os(hr(E.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,No(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Hi(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Hi(m,f)}(n.endAt)),g0(t,s,o,i,a,"F",l,c)}function J0(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function gm(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hr(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=hr(n.unaryFilter.field);return Dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=hr(n.unaryFilter.field);return Dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hr(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(e):e.fieldFilter!==void 0?function(n){return Dt.create(hr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(r=>gm(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(e):G()}function Z0(e){return U0[e]}function tI(e){return $0[e]}function eI(e){return j0[e]}function ur(e){return{fieldPath:e.canonicalString()}}function hr(e){return qt.fromServerFormat(e.fieldPath)}function _m(e){return e instanceof Dt?function(n){if(n.op==="=="){if(Sh(n.value))return{unaryFilter:{field:ur(n.field),op:"IS_NAN"}};if(Ph(n.value))return{unaryFilter:{field:ur(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sh(n.value))return{unaryFilter:{field:ur(n.field),op:"IS_NOT_NAN"}};if(Ph(n.value))return{unaryFilter:{field:ur(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ur(n.field),op:tI(n.op),value:n.value}}}(e):e instanceof De?function(n){const r=n.getFilters().map(s=>_m(s));return r.length===1?r[0]:{compositeFilter:{op:eI(n.op),filters:r}}}(e):G()}function nI(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function ym(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,n,r,s,i=Y.min(),o=Y.min(),a=ee.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new gn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t){this.ut=t}}function sI(e){const t=X0({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?zi(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.on=new oI}addToCollectionParentIndex(t,n){return this.on.add(n),R.resolve()}getCollectionParents(t,n){return R.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return R.resolve()}deleteFieldIndex(t,n){return R.resolve()}deleteAllFieldIndexes(t){return R.resolve()}createTargetIndexes(t,n){return R.resolve()}getDocumentsMatchingTarget(t,n){return R.resolve(null)}getIndexType(t,n){return R.resolve(0)}getFieldIndexes(t,n){return R.resolve([])}getNextCollectionGroupToUpdate(t){return R.resolve(null)}getMinOffset(t,n){return R.resolve(Rn.min())}getMinOffsetFromCollectionGroup(t,n){return R.resolve(Rn.min())}updateCollectionGroup(t,n,r){return R.resolve()}updateIndexEntries(t,n){return R.resolve()}}class oI{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new zt(It.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new zt(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new xr(0)}static Nn(){return new xr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.changes=new qr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Qt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&ds(r.mutation,s,Ce.empty(),kt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,rt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=rt()){const s=Un();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=es();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Un();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,rt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=rn();const o=fs(),a=function(){return fs()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof er)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ds(u.mutation,c,u.mutation.getFieldMask(),kt.now())):o.set(c.key,Ce.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new lI(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=fs();let s=new Ct((o,a)=>o-a),i=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Ce.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||rt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=tm();u.forEach(f=>{if(!i.has(f)){const m=am(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Qp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):R.resolve(Un());let a=-1,l=i;return o.next(c=>R.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?R.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,rt())).next(u=>({batchId:a,changes:Zp(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new H(n)).next(r=>{let s=es();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=es();return this.indexManager.getCollectionParents(t,i).next(a=>R.forEach(a,l=>{const c=function(h,f){return new jr(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Qt.newInvalidDocument(u)))});let a=es();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&ds(u.mutation,c,Ce.empty(),kt.now()),Oo(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return R.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(s){return{id:s.id,version:s.version,createTime:qe(s.createTime)}}(n)),R.resolve()}getNamedQuery(t,n){return R.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(s){return{name:s.name,query:sI(s.bundledQuery),readTime:qe(s.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.overlays=new Ct(H.comparator),this.lr=new Map}getOverlay(t,n){return R.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Un();return R.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.lt(t,n,i)}),R.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.lr.delete(r)),R.resolve()}getOverlaysForCollection(t,n,r){const s=Un(),i=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return R.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Ct((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Un(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Un(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return R.resolve(a)}lt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new k0(n,r));let i=this.lr.get(n);i===void 0&&(i=rt(),this.lr.set(n,i)),this.lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(){this.hr=new zt(Lt.Pr),this.Ir=new zt(Lt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new Lt(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new Lt(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new H(new It([])),r=new Lt(n,t),s=new Lt(n,t+1),i=[];return this.Ir.forEachInRange([r,s],o=>{this.dr(o),i.push(o.key)}),i}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new H(new It([])),r=new Lt(n,t),s=new Lt(n,t+1);let i=rt();return this.Ir.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Lt(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Lt{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return H.comparator(t.key,n.key)||ct(t.gr,n.gr)}static Tr(t,n){return ct(t.gr,n.gr)||H.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new zt(Lt.Pr)}checkEmpty(t){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new N0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.yr=this.yr.add(new Lt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(t,n){return R.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Sr(r),i=s<0?0:s;return R.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Lt(n,0),s=new Lt(n,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([r,s],o=>{const a=this.wr(o.gr);i.push(a)}),R.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new zt(ct);return n.forEach(s=>{const i=new Lt(s,0),o=new Lt(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([i,o],a=>{r=r.add(a.gr)})}),R.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new Lt(new H(i),0);let a=new zt(ct);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.gr)),!0)},o),R.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const s=this.wr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){vt(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return R.forEach(n.mutations,s=>{const i=new Lt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new Lt(n,0),s=this.yr.firstAfterOrEqual(r);return R.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,R.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t){this.Cr=t,this.docs=function(){return new Ct(H.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(t,n){let r=rn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qt.newInvalidDocument(s))}),R.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=rn();const o=n.path,a=new H(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Zw(Jw(u),r)<=0||(s.has(u.key)||Oo(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return R.resolve(i)}getAllFromCollectionGroup(t,n,r,s){G()}vr(t,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new pI(this)}getSize(t){return R.resolve(this.size)}}class pI extends aI{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this._r.addEntry(t,s)):this._r.removeEntry(r)}),R.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(t){this.persistence=t,this.Fr=new qr(n=>Tc(n),wc),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Pc,this.targetCount=0,this.Nr=xr.On()}forEachTarget(t,n){return this.Fr.forEach((r,s)=>n(s)),R.resolve()}getLastRemoteSnapshotVersion(t){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return R.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),R.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new xr(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,R.resolve()}updateTargetData(t,n){return this.kn(n),R.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),R.waitFor(i).next(()=>s)}getTargetCount(t){return R.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return R.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),R.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),R.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),R.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return R.resolve(r)}containsKey(t,n){return R.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t,n){this.Br={},this.overlays={},this.Lr=new _c(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new mI(this),this.indexManager=new iI,this.remoteDocumentCache=function(s){return new dI(s)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new rI(n),this.Kr=new uI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new hI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new fI(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){F("MemoryPersistence","Starting transaction:",t);const s=new _I(this.Lr.next());return this.referenceDelegate.$r(),r(s).next(i=>this.referenceDelegate.Ur(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Wr(t,n){return R.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class _I extends e0{constructor(t){super(),this.currentSequenceNumber=t}}class Sc{constructor(t){this.persistence=t,this.Gr=new Pc,this.zr=null}static jr(t){return new Sc(t)}get Hr(){if(this.zr)return this.zr;throw G()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),R.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),R.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Hr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Hr,r=>{const s=H.fromPath(r);return this.Jr(t,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return R.or([()=>R.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=s}static Qi(t,n){let r=rt(),s=rt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new bc(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.zi(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ji(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new yI;return this.Hi(t,n,o).next(a=>{if(i.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>i.result)}Ji(t,n,r,s){return r.documentReadCount<this.Ui?(Xr()<=ot.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",cr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),R.resolve()):(Xr()<=ot.DEBUG&&F("QueryEngine","Query:",cr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(Xr()<=ot.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",cr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$e(n))):R.resolve())}zi(t,n){if(xh(n))return R.resolve(null);let r=$e(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=zi(n,null,"F"),r=$e(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=rt(...i);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.Yi(n,a);return this.Zi(n,c,o,l.readTime)?this.zi(t,zi(n,null,"F")):this.Xi(t,c,n,l)}))})))}ji(t,n,r,s){return xh(n)||s.isEqual(Y.min())?R.resolve(null):this.Gi.getDocuments(t,r).next(i=>{const o=this.Yi(n,i);return this.Zi(n,o,r,s)?R.resolve(null):(Xr()<=ot.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),cr(n)),this.Xi(t,o,n,Xw(s,-1)).next(a=>a))})}Yi(t,n){let r=new zt(Xp(t));return n.forEach((s,i)=>{Oo(t,i)&&(r=r.add(i))}),r}Zi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Hi(t,n,r){return Xr()<=ot.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",cr(n)),this.Gi.getDocumentsMatchingQuery(t,n,Rn.min(),r)}Xi(t,n,r,s){return this.Gi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t,n,r,s){this.persistence=t,this.es=n,this.serializer=s,this.ts=new Ct(ct),this.ns=new qr(i=>Tc(i),wc),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cI(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function TI(e,t,n,r){return new vI(e,t,n,r)}async function Em(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=rt();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function wI(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let m=R.resolve();return f.forEach(E=>{m=m.next(()=>u.getEntry(l,E)).next(w=>{const I=c.docVersions.get(E);vt(I!==null),w.version.compareTo(I)<0&&(h.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=rt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function vm(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function II(e,t){const n=tt(e),r=t.snapshotVersion;let s=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});s=n.ts;const a=[];t.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.qr.addMatchingKeys(i,u.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?m=m.withResumeToken(ee.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(w,I,P){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(f,m,u)&&a.push(n.qr.updateTargetData(i,m))});let l=rn(),c=rt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(AI(i,o,t.documentUpdates).next(u=>{l=u.us,c=u.cs})),!r.isEqual(Y.min())){const u=n.qr.getLastRemoteSnapshotVersion(i).next(h=>n.qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return R.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ts=s,i))}function AI(e,t,n){let r=rt(),s=rt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=rn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Y.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:s}})}function RI(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function CI(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.qr.getTargetData(r,t).next(i=>i?(s=i,R.resolve(s)):n.qr.allocateTargetId(r).next(o=>(s=new gn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function ml(e,t,n){const r=tt(e),s=r.ts.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Js(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(s.target)}function qh(e,t,n){const r=tt(e);let s=Y.min(),i=rt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=tt(l),f=h.ns.get(u);return f!==void 0?R.resolve(h.ts.get(f)):h.qr.getTargetData(c,u)}(r,o,$e(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?s:Y.min(),n?i:rt())).next(a=>(PI(r,y0(t),a),{documents:a,ls:i})))}function PI(e,t,n){let r=e.rs.get(t)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.rs.set(t,r)}class Hh{constructor(){this.activeTargetIds=A0()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class SI{constructor(){this.eo=new Hh,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new Hh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yi=null;function va(){return yi===null?yi=function(){return 268435456+Math.round(2147483648*Math.random())}():yi++,"0x"+yi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class xI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${s}/databases/${i}`,this.po=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get yo(){return!1}wo(n,r,s,i,o){const a=va(),l=this.So(n,r);F("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,i,o),this.Do(n,l,c,s).then(u=>(F("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Sr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Co(n,r,s,i,o,a){return this.wo(n,r,s,i,o)}bo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ur}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}So(n,r){const s=VI[n];return`${this.mo}/v1/${r}:${s}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,s){const i=va();return new Promise((o,a)=>{const l=new Uw;l.setWithCredentials(!0),l.listenOnce(Fw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ya.NO_ERROR:const u=l.getResponseJson();F(Gt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case ya.TIMEOUT:F(Gt,`RPC '${t}' ${i} timed out`),a(new M(v.DEADLINE_EXCEEDED,"Request time out"));break;case ya.HTTP_ERROR:const h=l.getStatus();if(F(Gt,`RPC '${t}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const E=function(I){const P=I.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(P)>=0?P:v.UNKNOWN}(m.status);a(new M(E,m.message))}else a(new M(v.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new M(v.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{F(Gt,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);F(Gt,`RPC '${t}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}vo(t,n,r){const s=va(),i=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Mw(),a=Lw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");F(Gt,`Creating RPC '${t}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,m=!1;const E=new DI({co:I=>{m?F(Gt,`Not sending because RPC '${t}' stream ${s} is closed:`,I):(f||(F(Gt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),F(Gt,`RPC '${t}' stream ${s} sending:`,I),h.send(I))},lo:()=>h.close()}),w=(I,P,N)=>{I.listen(P,L=>{try{N(L)}catch(K){setTimeout(()=>{throw K},0)}})};return w(h,mi.EventType.OPEN,()=>{m||F(Gt,`RPC '${t}' stream ${s} transport opened.`)}),w(h,mi.EventType.CLOSE,()=>{m||(m=!0,F(Gt,`RPC '${t}' stream ${s} transport closed`),E.Ro())}),w(h,mi.EventType.ERROR,I=>{m||(m=!0,Sr(Gt,`RPC '${t}' stream ${s} transport errored:`,I),E.Ro(new M(v.UNAVAILABLE,"The operation could not be completed")))}),w(h,mi.EventType.MESSAGE,I=>{var P;if(!m){const N=I.data[0];vt(!!N);const L=N,K=L.error||((P=L[0])===null||P===void 0?void 0:P.error);if(K){F(Gt,`RPC '${t}' stream ${s} received error:`,K);const U=K.status;let ut=function(yt){const lt=bt[yt];if(lt!==void 0)return um(lt)}(U),At=K.message;ut===void 0&&(ut=v.INTERNAL,At="Unknown error status: "+U+" with message "+K.message),m=!0,E.Ro(new M(ut,At)),h.close()}else F(Gt,`RPC '${t}' stream ${s} received:`,N),E.Vo(N)}}),w(a,Bw.STAT_EVENT,I=>{I.stat===Th.PROXY?F(Gt,`RPC '${t}' stream ${s} detected buffering proxy`):I.stat===Th.NOPROXY&&F(Gt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function Ta(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(e){return new q0(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(t,n,r=1e3,s=1.5,i=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=s,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(t,n,r,s,i,o,a,l){this.si=t,this.Ko=r,this.$o=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Tm(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(nn(n.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Uo===n&&this.s_(r,s)},r=>{t(()=>{const s=new M(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(s)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(s=>{r(()=>this.o_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return F("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NI extends wm{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=K0(this.serializer,t),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?qe(o.readTime):Y.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=pl(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=cl(l)?{documents:Q0(i,l)}:{query:Y0(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dm(i,o.resumeToken);const c=hl(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=Wi(i,o.snapshotVersion.toTimestamp());const c=hl(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=J0(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=pl(this.serializer),n.removeTarget=t,this.e_(n)}}class kI extends wm{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(vt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=W0(t.writeResults,t.commitTime),r=qe(t.commitTime);return this.listener.I_(r,n)}return vt(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=pl(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>G0(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.d_=!1}A_(){if(this.d_)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.wo(t,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(v.UNKNOWN,s.toString())})}Co(t,n,r,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(t,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(v.UNKNOWN,i.toString())})}terminate(){this.d_=!0}}class MI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(nn(n),this.f_=!1):F("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro(o=>{r.enqueueAndForget(async()=>{nr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=tt(l);c.C_.add(4),await ei(c),c.M_.set("Unknown"),c.C_.delete(4),await Uo(c)}(this))})}),this.M_=new MI(r,s)}}async function Uo(e){if(nr(e))for(const t of e.v_)await t(!0)}async function ei(e){for(const t of e.v_)await t(!1)}function Im(e,t){const n=tt(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),xc(n)?Dc(n):Hr(n).Ho()&&Vc(n,t))}function Am(e,t){const n=tt(e),r=Hr(n);n.D_.delete(t),r.Ho()&&Rm(n,t),n.D_.size===0&&(r.Ho()?r.Zo():nr(n)&&n.M_.set("Unknown"))}function Vc(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hr(e).u_(t)}function Rm(e,t){e.x_.Oe(t),Hr(e).c_(t)}function Dc(e){e.x_=new B0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Hr(e).start(),e.M_.g_()}function xc(e){return nr(e)&&!Hr(e).jo()&&e.D_.size>0}function nr(e){return tt(e).C_.size===0}function Cm(e){e.x_=void 0}async function FI(e){e.D_.forEach((t,n)=>{Vc(e,t)})}async function BI(e,t){Cm(e),xc(e)?(e.M_.w_(t),Dc(e)):e.M_.set("Unknown")}async function UI(e,t,n){if(e.M_.set("Online"),t instanceof fm&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.D_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.D_.delete(a),s.x_.removeTarget(a))}(e,t)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Qi(e,r)}else if(t instanceof Ci?e.x_.$e(t):t instanceof hm?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Y.min()))try{const r=await vm(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.x_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.D_.get(c);u&&i.D_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.D_.get(l);if(!u)return;i.D_.set(l,u.withResumeToken(ee.EMPTY_BYTE_STRING,u.snapshotVersion)),Rm(i,l);const h=new gn(u.target,l,c,u.sequenceNumber);Vc(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){F("RemoteStore","Failed to raise snapshot:",r),await Qi(e,r)}}async function Qi(e,t,n){if(!Js(t))throw t;e.C_.add(1),await ei(e),e.M_.set("Offline"),n||(n=()=>vm(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Uo(e)})}function Pm(e,t){return t().catch(n=>Qi(e,n,t))}async function $o(e){const t=tt(e),n=Pn(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;$I(t);)try{const s=await RI(t.localStore,r);if(s===null){t.b_.length===0&&n.Zo();break}r=s.batchId,jI(t,s)}catch(s){await Qi(t,s)}Sm(t)&&bm(t)}function $I(e){return nr(e)&&e.b_.length<10}function jI(e,t){e.b_.push(t);const n=Pn(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Sm(e){return nr(e)&&!Pn(e).jo()&&e.b_.length>0}function bm(e){Pn(e).start()}async function qI(e){Pn(e).E_()}async function HI(e){const t=Pn(e);for(const n of e.b_)t.P_(n.mutations)}async function zI(e,t,n){const r=e.b_.shift(),s=Ac.from(r,t,n);await Pm(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await $o(e)}async function KI(e,t){t&&Pn(e).h_&&await async function(r,s){if(function(o){return M0(o)&&o!==v.ABORTED}(s.code)){const i=r.b_.shift();Pn(r).Yo(),await Pm(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $o(r)}}(e,t),Sm(e)&&bm(e)}async function Kh(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const r=nr(n);n.C_.add(3),await ei(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Uo(n)}async function GI(e,t){const n=tt(e);t?(n.C_.delete(2),await Uo(n)):t||(n.C_.add(2),await ei(n),n.M_.set("Unknown"))}function Hr(e){return e.O_||(e.O_=function(n,r,s){const i=tt(n);return i.A_(),new NI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:FI.bind(null,e),Io:BI.bind(null,e),a_:UI.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),xc(e)?Dc(e):e.M_.set("Unknown")):(await e.O_.stop(),Cm(e))})),e.O_}function Pn(e){return e.N_||(e.N_=function(n,r,s){const i=tt(n);return i.A_(),new kI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:qI.bind(null,e),Io:KI.bind(null,e),T_:HI.bind(null,e),I_:zI.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await $o(e)):(await e.N_.stop(),e.b_.length>0&&(F("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new Nc(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(v.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kc(e,t){if(nn("AsyncQueue",`${t}: ${e}`),Js(e))return new M(v.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this.comparator=t?(n,r)=>t(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=es(),this.sortedSet=new Ct(this.comparator)}static emptySet(t){return new Tr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Tr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Tr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this.B_=new Ct(H.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):G():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Nr{constructor(t,n,r,s,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nr(t,n,Tr.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ko(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.k_=void 0,this.listeners=[]}}class QI{constructor(){this.queries=new qr(t=>Yp(t),ko),this.onlineState="Unknown",this.q_=new Set}}async function YI(e,t){const n=tt(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new WI),s)try{i.k_=await n.onListen(r)}catch(o){const a=kc(o,`Initialization of query '${cr(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.listeners.push(t),t.Q_(n.onlineState),i.k_&&t.K_(i.k_)&&Oc(n)}async function XI(e,t){const n=tt(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(t);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function JI(e,t){const n=tt(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.K_(s)&&(r=!0);o.k_=s}}r&&Oc(n)}function ZI(e,t,n){const r=tt(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function Oc(e){e.q_.forEach(t=>{t.next()})}class tA{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Nr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=Nr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t){this.key=t}}class Dm{constructor(t){this.key=t}}class eA{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=rt(),this.mutatedKeys=rt(),this._a=Xp(t),this.aa=new Tr(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new Gh,s=n?n.aa:this.aa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const f=s.get(u),m=Oo(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?E!==w&&(r.track({type:3,doc:m}),I=!0):this.ha(f,m)||(r.track({type:2,doc:m}),I=!0,(l&&this._a(m,l)>0||c&&this._a(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),I=!0):f&&!m&&(r.track({type:1,doc:f}),I=!0,(l||c)&&(a=!0)),I&&(m?(o=o.add(m),i=w?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{aa:o,la:r,Zi:a,mutatedKeys:i}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((u,h)=>function(m,E){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return w(m)-w(E)}(u.type,h.type)||this._a(u.doc,h.doc)),this.Pa(r),s=s!=null&&s;const a=n&&!s?this.Ia():[],l=this.oa.size===0&&this.current&&!s?1:0,c=l!==this.sa;return this.sa=l,o.length!==0||c?{snapshot:new Nr(this.query,t.aa,i,o,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Gh,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=rt(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new Dm(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new Vm(r))}),n}da(t){this.ia=t.ls,this.oa=rt();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return Nr.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class nA{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class rA{constructor(t){this.key=t,this.Ra=!1}}class sA{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new qr(a=>Yp(a),ko),this.fa=new Map,this.ga=new Set,this.pa=new Ct(H.comparator),this.ya=new Map,this.wa=new Pc,this.Sa={},this.ba=new Map,this.Da=xr.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function iA(e,t){const n=mA(e);let r,s;const i=n.ma.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Aa();else{const o=await CI(n.localStore,$e(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await oA(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&Im(n.remoteStore,o)}return s}async function oA(e,t,n,r,s){e.va=(h,f,m)=>async function(w,I,P,N){let L=I.view.ca(P);L.Zi&&(L=await qh(w.localStore,I.query,!1).then(({documents:At})=>I.view.ca(At,L)));const K=N&&N.targetChanges.get(I.targetId),U=N&&N.targetMismatches.get(I.targetId)!=null,ut=I.view.applyChanges(L,w.isPrimaryClient,K,U);return Qh(w,I.targetId,ut.Ta),ut.snapshot}(e,h,f,m);const i=await qh(e.localStore,t,!0),o=new eA(t,i.ls),a=o.ca(i.documents),l=ti.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);Qh(e,n,c.Ta);const u=new nA(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function aA(e,t){const n=tt(e),r=n.ma.get(t),s=n.fa.get(r.targetId);if(s.length>1)return n.fa.set(r.targetId,s.filter(i=>!ko(i,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ml(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Am(n.remoteStore,r.targetId),gl(n,r.targetId)}).catch(Xs)):(gl(n,r.targetId),await ml(n.localStore,r.targetId,!0))}async function lA(e,t,n){const r=gA(e);try{const s=await function(o,a){const l=tt(o),c=kt.now(),u=a.reduce((m,E)=>m.add(E.key),rt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=rn(),w=rt();return l.ss.getEntries(m,u).next(I=>{E=I,E.forEach((P,N)=>{N.isValidDocument()||(w=w.add(P))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(I=>{h=I;const P=[];for(const N of a){const L=D0(N,h.get(N.key).overlayedDocument);L!=null&&P.push(new er(N.key,L,jp(L.value.mapValue),je.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,P,a)}).next(I=>{f=I;const P=I.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(m,I.batchId,P)})}).then(()=>({batchId:f.batchId,changes:Zp(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new Ct(ct)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(r,s.batchId,n),await ni(r,s.changes),await $o(r.remoteStore)}catch(s){const i=kc(s,"Failed to persist write");n.reject(i)}}async function xm(e,t){const n=tt(e);try{const r=await II(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.ya.get(i);o&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ra=!0:s.modifiedDocuments.size>0?vt(o.Ra):s.removedDocuments.size>0&&(vt(o.Ra),o.Ra=!1))}),await ni(n,r,t)}catch(r){await Xs(r)}}function Wh(e,t,n){const r=tt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ma.forEach((i,o)=>{const a=o.view.Q_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.listeners)f.Q_(a)&&(c=!0)}),c&&Oc(l)}(r.eventManager,t),s.length&&r.Va.a_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function cA(e,t,n){const r=tt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.ya.get(t),i=s&&s.key;if(i){let o=new Ct(H.comparator);o=o.insert(i,Qt.newNoDocument(i,Y.min()));const a=rt().add(i),l=new Fo(Y.min(),new Map,new Ct(ct),o,a);await xm(r,l),r.pa=r.pa.remove(i),r.ya.delete(t),Mc(r)}else await ml(r.localStore,t,!1).then(()=>gl(r,t,n)).catch(Xs)}async function uA(e,t){const n=tt(e),r=t.batch.batchId;try{const s=await wI(n.localStore,t);km(n,r,null),Nm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ni(n,s)}catch(s){await Xs(s)}}async function hA(e,t,n){const r=tt(e);try{const s=await function(o,a){const l=tt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(vt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,t);km(r,t,n),Nm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ni(r,s)}catch(s){await Xs(s)}}function Nm(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function km(e,t,n){const r=tt(e);let s=r.Sa[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Sa[r.currentUser.toKey()]=s}}function gl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||Om(e,r)})}function Om(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(Am(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Mc(e))}function Qh(e,t,n){for(const r of n)r instanceof Vm?(e.wa.addReference(r.key,t),fA(e,r)):r instanceof Dm?(F("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||Om(e,r.key)):G()}function fA(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(F("SyncEngine","New document in limbo: "+n),e.ga.add(r),Mc(e))}function Mc(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new H(It.fromString(t)),r=e.Da.next();e.ya.set(r,new rA(n)),e.pa=e.pa.insert(n,r),Im(e.remoteStore,new gn($e(Ic(n.path)),r,"TargetPurposeLimboResolution",_c._e))}}async function ni(e,t,n){const r=tt(e),s=[],i=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,t,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=bc.Qi(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.Va.a_(s),await async function(l,c){const u=tt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>R.forEach(c,f=>R.forEach(f.ki,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>R.forEach(f.qi,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Js(h))throw h;F("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.ts.get(f),E=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(E);u.ts=u.ts.insert(f,w)}}}(r.localStore,i))}async function dA(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){F("SyncEngine","User change. New user:",t.toKey());const r=await Em(n.localStore,t);n.currentUser=t,function(i,o){i.ba.forEach(a=>{a.forEach(l=>{l.reject(new M(v.CANCELLED,o))})}),i.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ni(n,r._s)}}function pA(e,t){const n=tt(e),r=n.ya.get(t);if(r&&r.Ra)return rt().add(r.key);{let s=rt();const i=n.fa.get(t);if(!i)return s;for(const o of i){const a=n.ma.get(o);s=s.unionWith(a.view.ua)}return s}}function mA(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=cA.bind(null,t),t.Va.a_=JI.bind(null,t.eventManager),t.Va.Fa=ZI.bind(null,t.eventManager),t}function gA(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=uA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hA.bind(null,t),t}class Yh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Bo(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return TI(this.persistence,new EI,t.initialUser,this.serializer)}createPersistence(t){return new gI(Sc.jr,this.serializer)}createSharedClientState(t){return new SI}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _A{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dA.bind(null,this.syncEngine),await GI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new QI}()}createDatastore(t){const n=Bo(t.databaseInfo.databaseId),r=function(i){return new xI(i)}(t.databaseInfo);return function(i,o,a,l){return new OI(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new LI(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Wh(this.syncEngine,n,0),function(){return zh.D()?new zh:new bI}())}createSyncEngine(t,n){return function(s,i,o,a,l,c,u){const h=new sA(s,i,o,a,l,c);return u&&(h.Ca=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=tt(n);F("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await ei(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):nn("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Wt.UNAUTHENTICATED,this.clientId=Bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{F("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(F("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=kc(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function wa(e,t){e.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Em(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Xh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await TA(e);F("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(s=>Kh(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>Kh(t.remoteStore,i)),e._onlineComponents=t}function vA(e){return e.name==="FirebaseError"?e.code===v.FAILED_PRECONDITION||e.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function TA(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{await wa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!vA(n))throw n;Sr("Error using user provided cache. Falling back to memory cache: "+n),await wa(e,new Yh)}}else F("FirestoreClient","Using default OfflineComponentProvider"),await wa(e,new Yh);return e._offlineComponents}async function Mm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),await Xh(e,e._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),await Xh(e,new _A))),e._onlineComponents}function wA(e){return Mm(e).then(t=>t.syncEngine)}async function Jh(e){const t=await Mm(e),n=t.eventManager;return n.onListen=iA.bind(null,t.syncEngine),n.onUnlisten=aA.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(e,t,n){if(!n)throw new M(v.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function IA(e,t,n,r){if(t===!0&&r===!0)throw new M(v.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function tf(e){if(!H.isDocumentKey(e))throw new M(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ef(e){if(H.isDocumentKey(e))throw new M(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function jo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":G()}function Kn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jo(e);throw new M(v.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function AA(e,t){if(t<=0)throw new M(v.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new M(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new M(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}IA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lm((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class qo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new M(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nf(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jw;switch(r.type){case"firstParty":return new Kw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Zh.get(n);r&&(F("ComponentProvider","Removing Datastore"),Zh.delete(n),r.terminate())}(this),Promise.resolve()}}function RA(e,t,n,r={}){var s;const i=(e=Kn(e,qo))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Wt.MOCK_USER;else{a=vv(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new M(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Wt(c)}e._authCredentials=new qw(new Fp(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Vn(this.firestore,t,this._query)}}class le{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new le(this.firestore,t,this._key)}}class Tn extends Vn{constructor(t,n,r){super(t,n,Ic(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new le(this.firestore,null,new H(t))}withConverter(t){return new Tn(this.firestore,t,this._path)}}function CA(e,t,...n){if(e=Gn(e),Fm("collection","path",t),e instanceof qo){const r=It.fromString(t,...n);return ef(r),new Tn(e,null,r)}{if(!(e instanceof le||e instanceof Tn))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(It.fromString(t,...n));return ef(r),new Tn(e.firestore,null,r)}}function PA(e,t,...n){if(e=Gn(e),arguments.length===1&&(t=Bp.newId()),Fm("doc","path",t),e instanceof qo){const r=It.fromString(t,...n);return tf(r),new le(e,null,new H(r))}{if(!(e instanceof le||e instanceof Tn))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(It.fromString(t,...n));return tf(r),new le(e.firestore,e instanceof Tn?e.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Tm(this,"async_queue_retry"),this.iu=()=>{const n=Ta();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=Ta();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=Ta();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new zn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!Js(t))throw t;F("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw nn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const s=Nc.createAndSchedule(this,t,n,r,i=>this.au(i));return this.Xa.push(s),s}su(){this.eu&&G()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}function rf(e){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(e,["next","error","complete"])}class Fs extends qo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new SA}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Um(this),this._firestoreClient.terminate()}}function bA(e,t){const n=typeof e=="object"?e:AT(),r=typeof e=="string"?e:t||"(default)",s=vT(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yv("firestore");i&&RA(s,...i)}return s}function Bm(e){return e._firestoreClient||Um(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Um(e){var t,n,r;const s=e._freezeSettings(),i=function(a,l,c,u){return new s0(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Lm(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new EA(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new kr(ee.fromBase64String(t))}catch(n){throw new M(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new kr(ee.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new M(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new M(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new M(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=/^__.*__$/;class DA{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new er(t,this.data,this.fieldMask,n,this.fieldTransforms):new Zs(t,this.data,n,this.fieldTransforms)}}function jm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class Bc{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new Bc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tu({path:r,du:!1});return s.Au(t),s}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tu({path:r,du:!1});return s.Pu(),s}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return Yi(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(jm(this.Iu)&&VA.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class xA{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Bo(t)}pu(t,n,r,s=!1){return new Bc({Iu:t,methodName:n,gu:r,path:qt.emptyPath(),du:!1,fu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uc(e){const t=e._freezeSettings(),n=Bo(e._databaseId);return new xA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qm(e,t,n,r,s,i={}){const o=e.pu(i.merge||i.mergeFields?2:0,t,n,s);Km("Data must be an object, but it was:",o,r);const a=Hm(r,o);let l,c;if(i.merge)l=new Ce(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const f=kA(t,h,n);if(!o.contains(f))throw new M(v.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);MA(u,f)||u.push(f)}l=new Ce(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new DA(new Te(a),l,c)}function NA(e,t,n,r=!1){return $c(n,e.pu(r?4:3,t))}function $c(e,t){if(zm(e=Gn(e)))return Km("Unsupported field value:",t,e),Hm(e,t);if(e instanceof $m)return function(r,s){if(!jm(s.Iu))throw s.mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=$c(a,s.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=Gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=kt.fromDate(r);return{timestampValue:Wi(s.serializer,i)}}if(r instanceof kt){const i=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wi(s.serializer,i)}}if(r instanceof Fc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:dm(s.serializer,r._byteString)};if(r instanceof le){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Cc(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.mu(`Unsupported field value: ${jo(r)}`)}(e,t)}function Hm(e,t){const n={};return Up(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(e,(r,s)=>{const i=$c(s,t.Eu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function zm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof kt||e instanceof Fc||e instanceof kr||e instanceof le||e instanceof $m)}function Km(e,t,n){if(!zm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=jo(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function kA(e,t,n){if((t=Gn(t))instanceof Lc)return t._internalPath;if(typeof t=="string")return Gm(e,t);throw Yi("Field path arguments must be of type string or ",e,!1,void 0,n)}const OA=new RegExp("[~\\*/\\[\\]]");function Gm(e,t,n){if(t.search(OA)>=0)throw Yi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Lc(...t.split("."))._internalPath}catch{throw Yi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Yi(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new M(v.INVALID_ARGUMENT,a+e+l)}function MA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ho("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LA extends Wm{data(){return super.data()}}function Ho(e,t){return typeof t=="string"?Gm(e,t):t instanceof Lc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new M(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jc{}class qc extends jc{}function BA(e,t,...n){let r=[];t instanceof jc&&r.push(t),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Hc).length,a=i.filter(l=>l instanceof zo).length;if(o>1||o>0&&a>0)throw new M(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class zo extends qc{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new zo(t,n,r)}_apply(t){const n=this._parse(t);return Qm(t._query,n),new Vn(t.firestore,t.converter,ul(t._query,n))}_parse(t){const n=Uc(t.firestore);return function(i,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new M(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){of(h,u);const m=[];for(const E of h)m.push(sf(l,i,E));f={arrayValue:{values:m}}}else f=sf(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||of(h,u),f=NA(a,o,h,u==="in"||u==="not-in");return Dt.create(c,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function V1(e,t,n){const r=t,s=Ho("where",e);return zo._create(s,r,n)}class Hc extends jc{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Hc(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:De.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Qm(o,l),o=ul(o,l)}(t._query,n),new Vn(t.firestore,t.converter,ul(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zc extends qc{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new zc(t,n)}_apply(t){const n=function(s,i,o){if(s.startAt!==null)throw new M(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new M(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Os(i,o)}(t._query,this._field,this._direction);return new Vn(t.firestore,t.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new jr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function UA(e,t="asc"){const n=t,r=Ho("orderBy",e);return zc._create(r,n)}class Kc extends qc{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new Kc(t,n,r)}_apply(t){return new Vn(t.firestore,t.converter,zi(t._query,this._limit,this._limitType))}}function $A(e){return AA("limit",e),Kc._create("limit",e,"F")}function sf(e,t,n){if(typeof(n=Gn(n))=="string"){if(n==="")throw new M(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qp(t)&&n.indexOf("/")!==-1)throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(It.fromString(n));if(!H.isDocumentKey(r))throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ch(e,new H(r))}if(n instanceof le)return Ch(e,n._key);throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jo(n)}.`)}function of(e,t){if(!Array.isArray(e)||e.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Qm(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new M(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new M(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class jA{convertValue(t,n="none"){switch(Xn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Yn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw G()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return $r(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new Fc(Vt(t.latitude),Vt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ec(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xs(t));default:return null}}convertTimestamp(t){const n=Cn(t);return new kt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=It.fromString(t);vt(ym(r));const s=new Ns(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||nn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Xm extends Wm{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Ho("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pi extends Xm{data(t={}){return super.data(t)}}class qA{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new rs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Pi(this._firestore,this._userDataWriter,r.key,r,new rs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Pi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new rs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Pi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new rs(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:HA(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}class Jm extends jA{constructor(t){super(),this.firestore=t}convertBytes(t){return new kr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new le(this.firestore,null,n)}}function D1(e,t,n){e=Kn(e,le);const r=Kn(e.firestore,Fs),s=Ym(e.converter,t,n);return Zm(r,[qm(Uc(r),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,je.none())])}function x1(e,t){const n=Kn(e.firestore,Fs),r=PA(e),s=Ym(e.converter,t);return Zm(n,[qm(Uc(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,je.exists(!1))]).then(()=>r)}function af(e,...t){var n,r,s;e=Gn(e);let i={includeMetadataChanges:!1},o=0;typeof t[o]!="object"||rf(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(rf(t[o])){const h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),t[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(e instanceof le)c=Kn(e.firestore,Fs),u=Ic(e._key.path),l={next:h=>{t[o]&&t[o](zA(c,e,h))},error:t[o+1],complete:t[o+2]};else{const h=Kn(e,Vn);c=Kn(h.firestore,Fs),u=h._query;const f=new Jm(c);l={next:m=>{t[o]&&t[o](new qA(c,f,h,m))},error:t[o+1],complete:t[o+2]},FA(e._query)}return function(f,m,E,w){const I=new yA(w),P=new tA(m,I,E);return f.asyncQueue.enqueueAndForget(async()=>YI(await Jh(f),P)),()=>{I.Na(),f.asyncQueue.enqueueAndForget(async()=>XI(await Jh(f),P))}}(Bm(c),u,a,l)}function Zm(e,t){return function(r,s){const i=new zn;return r.asyncQueue.enqueueAndForget(async()=>lA(await wA(r),s,i)),i.promise}(Bm(e),t)}function zA(e,t,n){const r=n.docs.get(t._key),s=new Jm(e);return new Xm(e,s,t._key,r,new rs(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){Ur=s})(IT),Mi(new Ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Fs(new Hw(r.getProvider("auth-internal")),new Ww(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new M(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ns(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),yr(wh,"4.4.0",t),yr(wh,"4.4.0","esm2017")})();const KA={apiKey:"AIzaSyBmx3k3Fn9-2uF2rFmmE7TeAvRdnBmcqHw",authDomain:"bingo-card-generator-7335a.firebaseapp.com",projectId:"bingo-card-generator-7335a",storageBucket:"bingo-card-generator-7335a.appspot.com",messagingSenderId:"307692627485",appId:"1:307692627485:web:29128c71c307033f3c88f4"},GA=xd(KA),WA=bA(GA);function _l(e){return gf()?(gg(e),!0):!1}function QA(e){return typeof e=="function"?e():ae(e)}const YA=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const XA=e=>typeof e<"u";function JA(e,t,n={}){const{immediate:r=!0}=n,s=$s(!1);let i=null;function o(){i&&(clearTimeout(i),i=null)}function a(){s.value=!1,o()}function l(...c){o(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,e(...c)},QA(t))}return r&&(s.value=!0,YA&&l()),_l(a),{isPending:bl(s),start:l,stop:a}}function lf(e){const t=e.data();return t&&Object.defineProperty(t,"id",{value:e.id.toString(),writable:!1}),t}function ZA(e){var t;return(((t=e.path)==null?void 0:t.match(/\//g))||[]).length%2!==0}function t1(e,t=void 0,n={}){const{errorHandler:r=l=>console.error(l),autoDispose:s=!0}=n,i=te(e)?e:de(()=>e);let o=()=>{};const a=$s(t);return ss(i,l=>{o(),i.value?ZA(i.value)?o=af(l,c=>{a.value=lf(c)||null},r):o=af(l,c=>{a.value=c.docs.map(lf).filter(XA)},r):a.value=t},{immediate:!0}),s===!0?_l(()=>{o()}):typeof s=="number"&&_l(()=>{JA(()=>{o()},s)}),a}const e1={fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"8.5 6 7 12"},yl=ue({__name:"IconCaret",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",e1,[X("path",{style:ze({fill:t.color??"#fff"}),"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.79289 6.29289C9.18342 5.90237 9.81658 5.90237 10.2071 6.29289L15.2071 11.2929C15.5976 11.6834 15.5976 12.3166 15.2071 12.7071L10.2071 17.7071C9.81658 18.0976 9.18342 18.0976 8.79289 17.7071C8.40237 17.3166 8.40237 16.6834 8.79289 16.2929L13.0858 12L8.79289 7.70711C8.40237 7.31658 8.40237 6.68342 8.79289 6.29289Z"},null,4)]))}});function cf(e){const t=Math.floor((new Date().getTime()-e)/1e3);let n=Math.floor(t/31536e3);return n>=1?n+" years ago":(n=Math.floor(t/2592e3),n>=1?n+" months ago":(n=Math.floor(t/86400),n>=1?n+" days ago":(n=Math.floor(t/3600),n>=1?n+" hours ago":(n=Math.floor(t/60),n>=1?n+" minutes ago":t>5?Math.floor(t)+" seconds ago":t>-10?"just now":"in the future "))))}const n1={class:"game"},r1={class:"description"},s1={class:"time-ago"},i1=ue({__name:"GameCard",props:{id:{},title:{},description:{},updatedAt:{},createdAt:{}},setup(e){const t=e,n=de(()=>t.updatedAt===t.createdAt?`Created ${cf(t.createdAt)}`:`Updated ${cf(t.updatedAt)}`);return(r,s)=>{const i=Ml("RouterLink");return Xt(),Bl(i,{to:`/game/${r.id}`},{default:ye(()=>[X("div",n1,[X("h2",null,Wo(r.title),1),X("p",r1,Wo(r.description),1),X("p",s1,Wo(n.value),1),nt(yl,{color:"var(--color-background)",class:"arrow"})])]),_:1},8,["to"])}}}),o1=js(i1,[["__scopeId","data-v-edce75ee"]]),a1={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l1=ue({__name:"IconPlus",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",a1,[X("path",{style:ze({stroke:t.color??"#fff"}),d:"M4 12H20M12 4V20",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,4)]))}}),Ko=e=>(kl("data-v-2d27884a"),e=e(),Ol(),e),c1={class:"intro"},u1=Ko(()=>X("h1",null,[X("span",null,"Create and play."),X("br"),Oe(" Fun custom bingo games! ")],-1)),h1=Ko(()=>X("p",{class:"intro-text"}," A lot of boring meetings or simply want to make an event more fun? Create your own bingo game and share it with your friends and colleagues! ",-1)),f1={class:"button-container"},d1=Ko(()=>X("span",null,"Create a new game",-1)),p1=Ko(()=>X("p",null,"check out popular games",-1)),m1=ue({__name:"IntroComponent",emits:["scroll-to-games","example"],setup(e,{emit:t}){return(n,r)=>{const s=Ml("RouterLink");return Xt(),me("div",c1,[u1,h1,X("div",f1,[nt(s,{to:"/create",class:"start-new-button"},{default:ye(()=>[nt(l1,{color:"var(--color-foreground-light)",class:"plus"}),d1]),_:1}),X("button",{class:"demo",onClick:r[0]||(r[0]=i=>n.$emit("scroll-to-games"))},[nt(yl,{color:"var(--color-primary-dark)",class:"arrow-down"}),p1,nt(yl,{color:"var(--color-primary-dark)",class:"arrow-down"})])])])}}}),g1=js(m1,[["__scopeId","data-v-2d27884a"]]),_1=X("h1",null,"Most popular Bingo games",-1),y1={key:1,class:"no-games"},E1=ue({__name:"HomeView",setup(e){const t=BA(CA(WA,"games"),UA("updatedAt","desc"),$A(5)),n=t1(t,void 0,{autoDispose:!1}),r=$s(null),s=()=>{if(!r.value)return;const o=r.value.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:o,behavior:"smooth"})};return(i,o)=>{var a;return Xt(),me("div",null,[nt(g1,{onScrollToGames:s}),X("div",{class:"games-container",ref_key:"gamesContainer",ref:r},[_1,(a=ae(n))!=null&&a.length?(Xt(!0),me(Ee,{key:0},__(ae(n),l=>(Xt(),Bl(o1,{key:l.id,id:l.id,title:l.name,description:l.description,updatedAt:l.updatedAt,createdAt:l.createdAt},null,8,["id","title","description","updatedAt","createdAt"]))),128)):(Xt(),me("p",y1,"No games found"))],512)])}}}),v1=bE({history:Ky("/"),scrollBehavior(){return{top:0}},routes:[{path:"/",name:"home",component:E1},{path:"/game/:id",name:"game",component:()=>or(()=>import("./GameView-Y-qhPt7t.js"),__vite__mapDeps([0,1,2]))},{path:"/game/:id/play/new",name:"play-new",component:()=>or(()=>import("./PlayNewView-DNZFo8i8.js"),__vite__mapDeps([]))},{path:"/game/:id/play/:cardId",name:"play",component:()=>or(()=>import("./PlayView-sFETcmAW.js"),__vite__mapDeps([]))},{path:"/pricing",name:"pricing",component:()=>or(()=>import("./PricingView-oehurldU.js"),__vite__mapDeps([]))},{path:"/create",name:"create",component:()=>or(()=>import("./CreateView--MZvB5AN.js"),__vite__mapDeps([3,1,4]))},{path:"/error",name:"error",component:()=>or(()=>import("./ErrorView-R0JFsBwC.js"),__vite__mapDeps([]))}]}),tg=Cy(ov);tg.use(v1);tg.mount("#app");export{UA as A,V1 as B,CA as C,__ as D,C1 as E,Ee as F,de as G,to as H,oy as I,yl as J,R1 as K,x1 as L,D1 as M,fo as T,js as _,X as a,nt as b,me as c,ue as d,Oe as e,PA as f,WA as g,Bl as h,ae as i,T1 as j,r_ as k,cf as l,I1 as m,ze as n,Xt as o,A1 as p,l1 as q,$s as r,t1 as s,Wo as t,DE as u,w1 as v,ye as w,kl as x,Ol as y,BA as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/GameView-Y-qhPt7t.js","assets/firestore-F2Wt9bnv.js","assets/GameView-fCI2FIcI.css","assets/CreateView--MZvB5AN.js","assets/CreateView-KZRtBxVl.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}