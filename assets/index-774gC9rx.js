(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Tl(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Tt={},gr=[],we=()=>{},lg=()=>!1,Ji=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),wl=e=>e.startsWith("onUpdate:"),Ot=Object.assign,Il=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},cg=Object.prototype.hasOwnProperty,it=(e,t)=>cg.call(e,t),q=Array.isArray,_r=e=>Us(e)==="[object Map]",Lr=e=>Us(e)==="[object Set]",eu=e=>Us(e)==="[object Date]",Z=e=>typeof e=="function",xt=e=>typeof e=="string",Rn=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",pf=e=>(Et(e)||Z(e))&&Z(e.then)&&Z(e.catch),mf=Object.prototype.toString,Us=e=>mf.call(e),ug=e=>Us(e).slice(8,-1),gf=e=>Us(e)==="[object Object]",Al=e=>xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,vi=Tl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},hg=/-(\w)/g,Ke=Zi(e=>e.replace(hg,(t,n)=>n?n.toUpperCase():"")),fg=/\B([A-Z])/g,Zn=Zi(e=>e.replace(fg,"-$1").toLowerCase()),to=Zi(e=>e.charAt(0).toUpperCase()+e.slice(1)),Qo=Zi(e=>e?`on${to(e)}`:""),Cn=(e,t)=>!Object.is(e,t),Ti=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Si=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},bi=e=>{const t=parseFloat(e);return isNaN(t)?e:t},dg=e=>{const t=xt(e)?Number(e):NaN;return isNaN(t)?e:t};let nu;const _f=()=>nu||(nu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ze(e){if(q(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=xt(r)?_g(r):ze(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(xt(e)||Et(e))return e}const pg=/;(?![^(]*\))/g,mg=/:([^]+)/,gg=/\/\*[^]*?\*\//g;function _g(e){const t={};return e.replace(gg,"").split(pg).forEach(n=>{if(n){const r=n.split(mg);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function eo(e){let t="";if(xt(e))t=e;else if(q(e))for(let n=0;n<e.length;n++){const r=eo(e[n]);r&&(t+=r+" ")}else if(Et(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const yg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Eg=Tl(yg);function yf(e){return!!e||e===""}function vg(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=$s(e[r],t[r]);return n}function $s(e,t){if(e===t)return!0;let n=eu(e),r=eu(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Rn(e),r=Rn(t),n||r)return e===t;if(n=q(e),r=q(t),n||r)return n&&r?vg(e,t):!1;if(n=Et(e),r=Et(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!$s(e[o],t[o]))return!1}}return String(e)===String(t)}function Rl(e,t){return e.findIndex(n=>$s(n,t))}const Yo=e=>xt(e)?e:e==null?"":q(e)||Et(e)&&(e.toString===mf||!Z(e.toString))?JSON.stringify(e,Ef,2):String(e),Ef=(e,t)=>t&&t.__v_isRef?Ef(e,t.value):_r(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Xo(r,i)+" =>"]=s,n),{})}:Lr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Xo(n))}:Rn(t)?Xo(t):Et(t)&&!q(t)&&!gf(t)?String(t):t,Xo=(e,t="")=>{var n;return Rn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let me;class Tg{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=me,!t&&me&&(this.index=(me.scopes||(me.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=me;try{return me=this,t()}finally{me=n}}}on(){me=this}off(){me=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function wg(e,t=me){t&&t.active&&t.effects.push(e)}function vf(){return me}function Ig(e){me&&me.cleanups.push(e)}let qn;class Cl{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=3,this._trackId=0,this._runnings=0,this._queryings=0,this._depsLength=0,wg(this,s)}get dirty(){if(this._dirtyLevel===1){this._dirtyLevel=0,this._queryings++,tr();for(const t of this.deps)if(t.computed&&(Ag(t.computed),this._dirtyLevel>=2))break;er(),this._queryings--}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?3:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=En,n=qn;try{return En=!0,qn=this,this._runnings++,ru(this),this.fn()}finally{su(this),this._runnings--,qn=n,En=t}}stop(){var t;this.active&&(ru(this),su(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Ag(e){return e.value}function ru(e){e._trackId++,e._depsLength=0}function su(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Tf(e.deps[t],e);e.deps.length=e._depsLength}}function Tf(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let En=!0,Ra=0;const wf=[];function tr(){wf.push(En),En=!1}function er(){const e=wf.pop();En=e===void 0?!0:e}function Pl(){Ra++}function Sl(){for(Ra--;!Ra&&Ca.length;)Ca.shift()()}function If(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&Tf(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Ca=[];function Af(e,t,n){Pl();for(const r of e.keys())if(!(!r.allowRecurse&&r._runnings)&&r._dirtyLevel<t&&(!r._runnings||t!==2)){const s=r._dirtyLevel;r._dirtyLevel=t,s===0&&(!r._queryings||t!==2)&&(r.trigger(),r.scheduler&&Ca.push(r.scheduler))}Sl()}const Rf=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Pa=new WeakMap,Hn=Symbol(""),Sa=Symbol("");function fe(e,t,n){if(En&&qn){let r=Pa.get(e);r||Pa.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=Rf(()=>r.delete(n))),If(qn,s)}}function tn(e,t,n,r,s,i){const o=Pa.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&q(e)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!Rn(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":q(e)?Al(n)&&a.push(o.get("length")):(a.push(o.get(Hn)),_r(e)&&a.push(o.get(Sa)));break;case"delete":q(e)||(a.push(o.get(Hn)),_r(e)&&a.push(o.get(Sa)));break;case"set":_r(e)&&a.push(o.get(Hn));break}Pl();for(const l of a)l&&Af(l,3);Sl()}const Rg=Tl("__proto__,__v_isRef,__isVue"),Cf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Rn)),iu=Cg();function Cg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=at(this);for(let i=0,o=this.length;i<o;i++)fe(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(at)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){tr(),Pl();const r=at(this)[t].apply(this,n);return Sl(),er(),r}}),e}function Pg(e){const t=at(this);return fe(t,"has",e),t.hasOwnProperty(e)}class Pf{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Ug:Df:i?Vf:bf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=q(t);if(!s){if(o&&it(iu,n))return Reflect.get(iu,n,r);if(n==="hasOwnProperty")return Pg}const a=Reflect.get(t,n,r);return(Rn(n)?Cf.has(n):Rg(n))||(s||fe(t,"get",n),i)?a:ee(a)?o&&Al(n)?a:a.value:Et(a)?s?Dl(a):ro(a):a}}class Sf extends Pf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._shallow){const l=Ar(i);if(!pr(r)&&!Ar(r)&&(i=at(i),r=at(r)),!q(t)&&ee(i)&&!ee(r))return l?!1:(i.value=r,!0)}const o=q(t)&&Al(n)?Number(n)<t.length:it(t,n),a=Reflect.set(t,n,r,s);return t===at(s)&&(o?Cn(r,i)&&tn(t,"set",n,r):tn(t,"add",n,r)),a}deleteProperty(t,n){const r=it(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&tn(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Rn(n)||!Cf.has(n))&&fe(t,"has",n),r}ownKeys(t){return fe(t,"iterate",q(t)?"length":Hn),Reflect.ownKeys(t)}}class Sg extends Pf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const bg=new Sf,Vg=new Sg,Dg=new Sf(!0),bl=e=>e,no=e=>Reflect.getPrototypeOf(e);function ii(e,t,n=!1,r=!1){e=e.__v_raw;const s=at(e),i=at(t);n||(Cn(t,i)&&fe(s,"get",t),fe(s,"get",i));const{has:o}=no(s),a=r?bl:n?Nl:gs;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function oi(e,t=!1){const n=this.__v_raw,r=at(n),s=at(e);return t||(Cn(e,s)&&fe(r,"has",e),fe(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function ai(e,t=!1){return e=e.__v_raw,!t&&fe(at(e),"iterate",Hn),Reflect.get(e,"size",e)}function ou(e){e=at(e);const t=at(this);return no(t).has.call(t,e)||(t.add(e),tn(t,"add",e,e)),this}function au(e,t){t=at(t);const n=at(this),{has:r,get:s}=no(n);let i=r.call(n,e);i||(e=at(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?Cn(t,o)&&tn(n,"set",e,t):tn(n,"add",e,t),this}function lu(e){const t=at(this),{has:n,get:r}=no(t);let s=n.call(t,e);s||(e=at(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&tn(t,"delete",e,void 0),i}function cu(){const e=at(this),t=e.size!==0,n=e.clear();return t&&tn(e,"clear",void 0,void 0),n}function li(e,t){return function(r,s){const i=this,o=i.__v_raw,a=at(o),l=t?bl:e?Nl:gs;return!e&&fe(a,"iterate",Hn),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function ci(e,t,n){return function(...r){const s=this.__v_raw,i=at(s),o=_r(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?bl:t?Nl:gs;return!t&&fe(i,"iterate",l?Sa:Hn),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function cn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function xg(){const e={get(i){return ii(this,i)},get size(){return ai(this)},has:oi,add:ou,set:au,delete:lu,clear:cu,forEach:li(!1,!1)},t={get(i){return ii(this,i,!1,!0)},get size(){return ai(this)},has:oi,add:ou,set:au,delete:lu,clear:cu,forEach:li(!1,!0)},n={get(i){return ii(this,i,!0)},get size(){return ai(this,!0)},has(i){return oi.call(this,i,!0)},add:cn("add"),set:cn("set"),delete:cn("delete"),clear:cn("clear"),forEach:li(!0,!1)},r={get(i){return ii(this,i,!0,!0)},get size(){return ai(this,!0)},has(i){return oi.call(this,i,!0)},add:cn("add"),set:cn("set"),delete:cn("delete"),clear:cn("clear"),forEach:li(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=ci(i,!1,!1),n[i]=ci(i,!0,!1),t[i]=ci(i,!1,!0),r[i]=ci(i,!0,!0)}),[e,n,t,r]}const[Ng,kg,Og,Mg]=xg();function Vl(e,t){const n=t?e?Mg:Og:e?kg:Ng;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(it(n,s)&&s in r?n:r,s,i)}const Lg={get:Vl(!1,!1)},Fg={get:Vl(!1,!0)},Bg={get:Vl(!0,!1)},bf=new WeakMap,Vf=new WeakMap,Df=new WeakMap,Ug=new WeakMap;function $g(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jg(e){return e.__v_skip||!Object.isExtensible(e)?0:$g(ug(e))}function ro(e){return Ar(e)?e:xl(e,!1,bg,Lg,bf)}function xf(e){return xl(e,!1,Dg,Fg,Vf)}function Dl(e){return xl(e,!0,Vg,Bg,Df)}function xl(e,t,n,r,s){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=jg(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function yr(e){return Ar(e)?yr(e.__v_raw):!!(e&&e.__v_isReactive)}function Ar(e){return!!(e&&e.__v_isReadonly)}function pr(e){return!!(e&&e.__v_isShallow)}function Nf(e){return yr(e)||Ar(e)}function at(e){const t=e&&e.__v_raw;return t?at(t):e}function kf(e){return Si(e,"__v_skip",!0),e}const gs=e=>Et(e)?ro(e):e,Nl=e=>Et(e)?Dl(e):e;class Of{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Cl(()=>t(this._value),()=>ba(this,1)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=at(this);return Mf(t),(!t._cacheable||t.effect.dirty)&&Cn(t._value,t._value=t.effect.run())&&ba(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function qg(e,t,n=!1){let r,s;const i=Z(e);return i?(r=e,s=we):(r=e.get,s=e.set),new Of(r,s,i||!s,n)}function Mf(e){En&&qn&&(e=at(e),If(qn,e.dep||(e.dep=Rf(()=>e.dep=void 0,e instanceof Of?e:void 0))))}function ba(e,t=3,n){e=at(e);const r=e.dep;r&&Af(r,t)}function ee(e){return!!(e&&e.__v_isRef===!0)}function js(e){return Lf(e,!1)}function Hg(e){return Lf(e,!0)}function Lf(e,t){return ee(e)?e:new Kg(e,t)}class Kg{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:at(t),this._value=n?t:gs(t)}get value(){return Mf(this),this._value}set value(t){const n=this.__v_isShallow||pr(t)||Ar(t);t=n?t:at(t),Cn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:gs(t),ba(this,3))}}function ue(e){return ee(e)?e.value:e}const zg={get:(e,t,n)=>ue(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ee(s)&&!ee(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Ff(e){return yr(e)?e:new Proxy(e,zg)}function vn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){so(i,t,n)}return s}function Ie(e,t,n,r){if(Z(e)){const i=vn(e,t,n,r);return i&&pf(i)&&i.catch(o=>{so(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(Ie(e[i],t,n,r));return s}function so(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/errors/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){vn(l,null,10,[e,o,a]);return}}Gg(e,n,s,r)}function Gg(e,t,n,r=!0){console.error(e)}let _s=!1,Va=!1;const Jt=[];let Fe=0;const Er=[];let Xe=null,Fn=0;const Bf=Promise.resolve();let kl=null;function Uf(e){const t=kl||Bf;return e?t.then(this?e.bind(this):e):t}function Wg(e){let t=Fe+1,n=Jt.length;for(;t<n;){const r=t+n>>>1,s=Jt[r],i=ys(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function Ol(e){(!Jt.length||!Jt.includes(e,_s&&e.allowRecurse?Fe+1:Fe))&&(e.id==null?Jt.push(e):Jt.splice(Wg(e.id),0,e),$f())}function $f(){!_s&&!Va&&(Va=!0,kl=Bf.then(qf))}function Qg(e){const t=Jt.indexOf(e);t>Fe&&Jt.splice(t,1)}function Yg(e){q(e)?Er.push(...e):(!Xe||!Xe.includes(e,e.allowRecurse?Fn+1:Fn))&&Er.push(e),$f()}function uu(e,t,n=_s?Fe+1:0){for(;n<Jt.length;n++){const r=Jt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Jt.splice(n,1),n--,r()}}}function jf(e){if(Er.length){const t=[...new Set(Er)];if(Er.length=0,Xe){Xe.push(...t);return}for(Xe=t,Xe.sort((n,r)=>ys(n)-ys(r)),Fn=0;Fn<Xe.length;Fn++)Xe[Fn]();Xe=null,Fn=0}}const ys=e=>e.id==null?1/0:e.id,Xg=(e,t)=>{const n=ys(e)-ys(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function qf(e){Va=!1,_s=!0,Jt.sort(Xg);try{for(Fe=0;Fe<Jt.length;Fe++){const t=Jt[Fe];t&&t.active!==!1&&vn(t,null,14)}}finally{Fe=0,Jt.length=0,jf(),_s=!1,kl=null,(Jt.length||Er.length)&&qf()}}function Jg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Tt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[u]||Tt;f&&(s=n.map(m=>xt(m)?m.trim():m)),h&&(s=n.map(bi))}let a,l=r[a=Qo(t)]||r[a=Qo(Ke(t))];!l&&i&&(l=r[a=Qo(Zn(t))]),l&&Ie(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ie(c,e,6,s)}}function Hf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!Z(e)){const l=c=>{const u=Hf(c,t,!0);u&&(a=!0,Ot(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(Et(e)&&r.set(e,null),null):(q(i)?i.forEach(l=>o[l]=null):Ot(o,i),Et(e)&&r.set(e,o),o)}function io(e,t){return!e||!Ji(t)?!1:(t=t.slice(2).replace(/Once$/,""),it(e,t[0].toLowerCase()+t.slice(1))||it(e,Zn(t))||it(e,t))}let Ht=null,oo=null;function Vi(e){const t=Ht;return Ht=e,oo=e&&e.type.__scopeId||null,t}function Ml(e){oo=e}function Ll(){oo=null}function Ee(e,t=Ht,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&wu(-1);const i=Vi(t);let o;try{o=e(...s)}finally{Vi(i),r._d&&wu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Jo(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:m,ctx:E,inheritAttrs:w}=e;let I,P;const N=Vi(e);try{if(n.shapeFlag&4){const z=s||r,U=z;I=Le(u.call(U,z,h,i,m,f,E)),P=l}else{const z=t;I=Le(z.length>1?z(i,{attrs:l,slots:a,emit:c}):z(i,null)),P=t.props?l:Zg(l)}}catch(z){ls.length=0,so(z,e,1),I=et(Ae)}let L=I;if(P&&w!==!1){const z=Object.keys(P),{shapeFlag:U}=L;z.length&&U&7&&(o&&z.some(wl)&&(P=t_(P,o)),L=Pn(L,P))}return n.dirs&&(L=Pn(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),I=L,Vi(N),I}const Zg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ji(n))&&((t||(t={}))[n]=e[n]);return t},t_=(e,t)=>{const n={};for(const r in e)(!wl(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function e_(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?hu(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!io(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?hu(r,o,c):!0:!!o;return!1}function hu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!io(n,i))return!0}return!1}function n_({vnode:e,parent:t},n){if(n)for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Kf="components";function Fl(e,t){return s_(Kf,e,!0,t)||e}const r_=Symbol.for("v-ndc");function s_(e,t,n=!0,r=!1){const s=Ht||Ft;if(s){const i=s.type;if(e===Kf){const a=ey(i,!1);if(a&&(a===t||a===Ke(t)||a===to(Ke(t))))return i}const o=fu(s[e]||i[e],t)||fu(s.appContext[e],t);return!o&&r?i:o}}function fu(e,t){return e&&(e[t]||e[Ke(t)]||e[to(Ke(t))])}const i_=e=>e.__isSuspense;function o_(e,t){t&&t.pendingBranch?q(e)?t.effects.push(...e):t.effects.push(e):Yg(e)}const a_=Symbol.for("v-scx"),l_=()=>Se(a_),ui={};function is(e,t,n){return zf(e,t,n)}function zf(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=Tt){var l;if(t&&i){const U=t;t=(...ut)=>{U(...ut),z()}}const c=vf()===((l=Ft)==null?void 0:l.scope)?Ft:null;let u,h=!1,f=!1;if(ee(e)?(u=()=>e.value,h=pr(e)):yr(e)?(u=pr(e)||r===!1?()=>Je(e,1):()=>Je(e),h=!0):q(e)?(f=!0,h=e.some(U=>yr(U)||pr(U)),u=()=>e.map(U=>{if(ee(U))return U.value;if(yr(U))return Je(U,pr(U)||r===!1?1:void 0);if(Z(U))return vn(U,c,2)})):Z(e)?t?u=()=>vn(e,c,2):u=()=>{if(!(c&&c.isUnmounted))return m&&m(),Ie(e,c,3,[E])}:u=we,t&&r){const U=u;u=()=>Je(U())}let m,E=U=>{m=L.onStop=()=>{vn(U,c,4),m=L.onStop=void 0}},w;if(fo)if(E=we,t?n&&Ie(t,c,3,[u(),f?[]:void 0,E]):u(),s==="sync"){const U=l_();w=U.__watcherHandles||(U.__watcherHandles=[])}else return we;let I=f?new Array(e.length).fill(ui):ui;const P=()=>{if(!(!L.active||!L.dirty))if(t){const U=L.run();(r||h||(f?U.some((ut,At)=>Cn(ut,I[At])):Cn(U,I)))&&(m&&m(),Ie(t,c,3,[U,I===ui?void 0:f&&I[0]===ui?[]:I,E]),I=U)}else L.run()};P.allowRecurse=!!t;let N;s==="sync"?N=P:s==="post"?N=()=>ae(P,c&&c.suspense):(P.pre=!0,c&&(P.id=c.uid),N=()=>Ol(P));const L=new Cl(u,we,N),z=()=>{L.stop(),c&&c.scope&&Il(c.scope.effects,L)};return t?n?P():I=L.run():s==="post"?ae(L.run.bind(L),c&&c.suspense):L.run(),w&&w.push(z),z}function c_(e,t,n){const r=this.proxy,s=xt(e)?e.includes(".")?Gf(r,e):()=>r[e]:e.bind(r,r);let i;Z(t)?i=t:(i=t.handler,n=t);const o=Ft;Rr(this);const a=zf(s,i.bind(r),n);return o?Rr(o):Kn(),a}function Gf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Je(e,t,n=0,r){if(!Et(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),ee(e))Je(e.value,t,n,r);else if(q(e))for(let s=0;s<e.length;s++)Je(e[s],t,n,r);else if(Lr(e)||_r(e))e.forEach(s=>{Je(s,t,n,r)});else if(gf(e))for(const s in e)Je(e[s],t,n,r);return e}function u_(e,t){const n=Ht;if(n===null)return e;const r=po(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,l,c=Tt]=t[i];o&&(Z(o)&&(o={mounted:o,updated:o}),o.deep&&Je(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Nn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(tr(),Ie(l,n,8,[e.el,a,e,t]),er())}}const dn=Symbol("_leaveCb"),hi=Symbol("_enterCb");function h_(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jf(()=>{e.isMounted=!0}),Zf(()=>{e.isUnmounting=!0}),e}const ye=[Function,Array],Wf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ye,onEnter:ye,onAfterEnter:ye,onEnterCancelled:ye,onBeforeLeave:ye,onLeave:ye,onAfterLeave:ye,onLeaveCancelled:ye,onBeforeAppear:ye,onAppear:ye,onAfterAppear:ye,onAppearCancelled:ye},f_={name:"BaseTransition",props:Wf,setup(e,{slots:t}){const n=Y_(),r=h_();let s;return()=>{const i=t.default&&Yf(t.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const w of i)if(w.type!==Ae){o=w;break}}const a=at(e),{mode:l}=a;if(r.isLeaving)return Zo(o);const c=du(o);if(!c)return Zo(o);const u=Da(c,a,r,n);xa(c,u);const h=n.subTree,f=h&&du(h);let m=!1;const{getTransitionKey:E}=c.type;if(E){const w=E();s===void 0?s=w:w!==s&&(s=w,m=!0)}if(f&&f.type!==Ae&&(!Bn(c,f)||m)){const w=Da(f,a,r,n);if(xa(f,w),l==="out-in")return r.isLeaving=!0,w.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Zo(o);l==="in-out"&&c.type!==Ae&&(w.delayLeave=(I,P,N)=>{const L=Qf(r,f);L[String(f.key)]=f,I[dn]=()=>{P(),I[dn]=void 0,delete u.delayedLeave},u.delayedLeave=N})}return o}}},d_=f_;function Qf(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Da(e,t,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:E,onBeforeAppear:w,onAppear:I,onAfterAppear:P,onAppearCancelled:N}=t,L=String(e.key),z=Qf(n,e),U=(J,yt)=>{J&&Ie(J,r,9,yt)},ut=(J,yt)=>{const lt=yt[1];U(J,yt),q(J)?J.every(Nt=>Nt.length<=1)&&lt():J.length<=1&&lt()},At={mode:i,persisted:o,beforeEnter(J){let yt=a;if(!n.isMounted)if(s)yt=w||a;else return;J[dn]&&J[dn](!0);const lt=z[L];lt&&Bn(e,lt)&&lt.el[dn]&&lt.el[dn](),U(yt,[J])},enter(J){let yt=l,lt=c,Nt=u;if(!n.isMounted)if(s)yt=I||l,lt=P||c,Nt=N||u;else return;let B=!1;const dt=J[hi]=re=>{B||(B=!0,re?U(Nt,[J]):U(lt,[J]),At.delayedLeave&&At.delayedLeave(),J[hi]=void 0)};yt?ut(yt,[J,dt]):dt()},leave(J,yt){const lt=String(e.key);if(J[hi]&&J[hi](!0),n.isUnmounting)return yt();U(h,[J]);let Nt=!1;const B=J[dn]=dt=>{Nt||(Nt=!0,yt(),dt?U(E,[J]):U(m,[J]),J[dn]=void 0,z[lt]===e&&delete z[lt])};z[lt]=e,f?ut(f,[J,B]):B()},clone(J){return Da(J,t,n,r)}};return At}function Zo(e){if(ao(e))return e=Pn(e),e.children=null,e}function du(e){return ao(e)?e.children?e.children[0]:void 0:e}function xa(e,t){e.shapeFlag&6&&e.component?xa(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Yf(e,t=!1,n){let r=[],s=0;for(let i=0;i<e.length;i++){let o=e[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===le?(o.patchFlag&128&&s++,r=r.concat(Yf(o.children,t,a))):(t||o.type!==Ae)&&r.push(a!=null?Pn(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function de(e,t){return Z(e)?Ot({name:e.name},t,{setup:e}):e}const os=e=>!!e.type.__asyncLoader,ao=e=>e.type.__isKeepAlive;function p_(e,t){Xf(e,"a",t)}function m_(e,t){Xf(e,"da",t)}function Xf(e,t,n=Ft){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(lo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)ao(s.parent.vnode)&&g_(r,t,n,s),s=s.parent}}function g_(e,t,n,r){const s=lo(t,e,r,!0);td(()=>{Il(r[t],s)},n)}function lo(e,t,n=Ft,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;tr(),Rr(n);const a=Ie(t,n,e,o);return Kn(),er(),a});return r?s.unshift(i):s.push(i),i}}const on=e=>(t,n=Ft)=>(!fo||e==="sp")&&lo(e,(...r)=>t(...r),n),__=on("bm"),Jf=on("m"),y_=on("bu"),E_=on("u"),Zf=on("bum"),td=on("um"),v_=on("sp"),T_=on("rtg"),w_=on("rtc");function I_(e,t=Ft){lo("ec",e,t)}function A_(e,t,n,r){let s;const i=n&&n[r];if(q(e)||xt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(Et(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function A1(e,t,n={},r,s){if(Ht.isCE||Ht.parent&&os(Ht.parent)&&Ht.parent.isCE)return t!=="default"&&(n.name=t),et("slot",n,r&&r());let i=e[t];i&&i._c&&(i._d=!1),Kt();const o=i&&ed(i(n)),a=uo(le,{key:n.key||o&&o.key||`_${t}`},o||(r?r():[]),o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function ed(e){return e.some(t=>Ni(t)?!(t.type===Ae||t.type===le&&!ed(t.children)):!0)?e:null}const Na=e=>e?dd(e)?po(e)||e.proxy:Na(e.parent):null,as=Ot(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Na(e.parent),$root:e=>Na(e.root),$emit:e=>e.emit,$options:e=>Bl(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Ol(e.update)}),$nextTick:e=>e.n||(e.n=Uf.bind(e.proxy)),$watch:e=>c_.bind(e)}),ta=(e,t)=>e!==Tt&&!e.__isScriptSetup&&it(e,t),R_={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(ta(r,t))return o[t]=1,r[t];if(s!==Tt&&it(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&it(c,t))return o[t]=3,i[t];if(n!==Tt&&it(n,t))return o[t]=4,n[t];ka&&(o[t]=0)}}const u=as[t];let h,f;if(u)return t==="$attrs"&&fe(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==Tt&&it(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,it(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return ta(s,t)?(s[t]=n,!0):r!==Tt&&it(r,t)?(r[t]=n,!0):it(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==Tt&&it(e,o)||ta(t,o)||(a=i[0])&&it(a,o)||it(r,o)||it(as,o)||it(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:it(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function pu(e){return q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ka=!0;function C_(e){const t=Bl(e),n=e.proxy,r=e.ctx;ka=!1,t.beforeCreate&&mu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:E,activated:w,deactivated:I,beforeDestroy:P,beforeUnmount:N,destroyed:L,unmounted:z,render:U,renderTracked:ut,renderTriggered:At,errorCaptured:J,serverPrefetch:yt,expose:lt,inheritAttrs:Nt,components:B,directives:dt,filters:re}=t;if(c&&P_(c,r,null),o)for(const gt in o){const ht=o[gt];Z(ht)&&(r[gt]=ht.bind(n))}if(s){const gt=s.call(n,n);Et(gt)&&(e.data=ro(gt))}if(ka=!0,i)for(const gt in i){const ht=i[gt],Qe=Z(ht)?ht.bind(n,n):Z(ht.get)?ht.get.bind(n,n):we,ln=!Z(ht)&&Z(ht.set)?ht.set.bind(n):we,Ne=ce({get:Qe,set:ln});Object.defineProperty(r,gt,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:oe=>Ne.value=oe})}if(a)for(const gt in a)nd(a[gt],r,n,gt);if(l){const gt=Z(l)?l.call(n):l;Reflect.ownKeys(gt).forEach(ht=>{wi(ht,gt[ht])})}u&&mu(u,e,"c");function St(gt,ht){q(ht)?ht.forEach(Qe=>gt(Qe.bind(n))):ht&&gt(ht.bind(n))}if(St(__,h),St(Jf,f),St(y_,m),St(E_,E),St(p_,w),St(m_,I),St(I_,J),St(w_,ut),St(T_,At),St(Zf,N),St(td,z),St(v_,yt),q(lt))if(lt.length){const gt=e.exposed||(e.exposed={});lt.forEach(ht=>{Object.defineProperty(gt,ht,{get:()=>n[ht],set:Qe=>n[ht]=Qe})})}else e.exposed||(e.exposed={});U&&e.render===we&&(e.render=U),Nt!=null&&(e.inheritAttrs=Nt),B&&(e.components=B),dt&&(e.directives=dt)}function P_(e,t,n=we){q(e)&&(e=Oa(e));for(const r in e){const s=e[r];let i;Et(s)?"default"in s?i=Se(s.from||r,s.default,!0):i=Se(s.from||r):i=Se(s),ee(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function mu(e,t,n){Ie(q(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function nd(e,t,n,r){const s=r.includes(".")?Gf(n,r):()=>n[r];if(xt(e)){const i=t[e];Z(i)&&is(s,i)}else if(Z(e))is(s,e.bind(n));else if(Et(e))if(q(e))e.forEach(i=>nd(i,t,n,r));else{const i=Z(e.handler)?e.handler.bind(n):t[e.handler];Z(i)&&is(s,i,e)}}function Bl(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>Di(l,c,o,!0)),Di(l,t,o)),Et(t)&&i.set(t,l),l}function Di(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Di(e,i,n,!0),s&&s.forEach(o=>Di(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=S_[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const S_={data:gu,props:_u,emits:_u,methods:Zr,computed:Zr,beforeCreate:se,created:se,beforeMount:se,mounted:se,beforeUpdate:se,updated:se,beforeDestroy:se,beforeUnmount:se,destroyed:se,unmounted:se,activated:se,deactivated:se,errorCaptured:se,serverPrefetch:se,components:Zr,directives:Zr,watch:V_,provide:gu,inject:b_};function gu(e,t){return t?e?function(){return Ot(Z(e)?e.call(this,this):e,Z(t)?t.call(this,this):t)}:t:e}function b_(e,t){return Zr(Oa(e),Oa(t))}function Oa(e){if(q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function se(e,t){return e?[...new Set([].concat(e,t))]:t}function Zr(e,t){return e?Ot(Object.create(null),e,t):t}function _u(e,t){return e?q(e)&&q(t)?[...new Set([...e,...t])]:Ot(Object.create(null),pu(e),pu(t??{})):t}function V_(e,t){if(!e)return t;if(!t)return e;const n=Ot(Object.create(null),e);for(const r in t)n[r]=se(e[r],t[r]);return n}function rd(){return{app:null,config:{isNativeTag:lg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let D_=0;function x_(e,t){return function(r,s=null){Z(r)||(r=Ot({},r)),s!=null&&!Et(s)&&(s=null);const i=rd(),o=new WeakSet;let a=!1;const l=i.app={_uid:D_++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ry,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&Z(c.install)?(o.add(c),c.install(l,...u)):Z(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const f=et(r,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(f,c):e(f,c,h),a=!0,l._container=c,c.__vue_app__=l,po(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){xi=l;try{return c()}finally{xi=null}}};return l}}let xi=null;function wi(e,t){if(Ft){let n=Ft.provides;const r=Ft.parent&&Ft.parent.provides;r===n&&(n=Ft.provides=Object.create(r)),n[e]=t}}function Se(e,t,n=!1){const r=Ft||Ht;if(r||xi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:xi._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Z(t)?t.call(r&&r.proxy):t}}function N_(e,t,n,r=!1){const s={},i={};Si(i,ho,1),e.propsDefaults=Object.create(null),sd(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:xf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function k_(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=at(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(io(e.emitsOptions,f))continue;const m=t[f];if(l)if(it(i,f))m!==i[f]&&(i[f]=m,c=!0);else{const E=Ke(f);s[E]=Ma(l,a,E,m,e,!1)}else m!==i[f]&&(i[f]=m,c=!0)}}}else{sd(e,t,s,i)&&(c=!0);let u;for(const h in a)(!t||!it(t,h)&&((u=Zn(h))===h||!it(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Ma(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!it(t,h))&&(delete i[h],c=!0)}c&&tn(e,"set","$attrs")}function sd(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(vi(l))continue;const c=t[l];let u;s&&it(s,u=Ke(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:io(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=at(n),c=a||Tt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Ma(s,l,h,c[h],e,!it(c,h))}}return o}function Ma(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=it(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Z(l)){const{propsDefaults:c}=s;n in c?r=c[n]:(Rr(s),r=c[n]=l.call(null,t),Kn())}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Zn(n))&&(r=!0))}return r}function id(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!Z(e)){const u=h=>{l=!0;const[f,m]=id(h,t,!0);Ot(o,f),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return Et(e)&&r.set(e,gr),gr;if(q(i))for(let u=0;u<i.length;u++){const h=Ke(i[u]);yu(h)&&(o[h]=Tt)}else if(i)for(const u in i){const h=Ke(u);if(yu(h)){const f=i[u],m=o[h]=q(f)||Z(f)?{type:f}:Ot({},f);if(m){const E=Tu(Boolean,m.type),w=Tu(String,m.type);m[0]=E>-1,m[1]=w<0||E<w,(E>-1||it(m,"default"))&&a.push(h)}}}const c=[o,a];return Et(e)&&r.set(e,c),c}function yu(e){return e[0]!=="$"}function Eu(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function vu(e,t){return Eu(e)===Eu(t)}function Tu(e,t){return q(t)?t.findIndex(n=>vu(n,e)):Z(t)&&vu(t,e)?0:-1}const od=e=>e[0]==="_"||e==="$stable",Ul=e=>q(e)?e.map(Le):[Le(e)],O_=(e,t,n)=>{if(t._n)return t;const r=Ee((...s)=>Ul(t(...s)),n);return r._c=!1,r},ad=(e,t,n)=>{const r=e._ctx;for(const s in e){if(od(s))continue;const i=e[s];if(Z(i))t[s]=O_(s,i,r);else if(i!=null){const o=Ul(i);t[s]=()=>o}}},ld=(e,t)=>{const n=Ul(t);e.slots.default=()=>n},M_=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=at(t),Si(t,"_",n)):ad(t,e.slots={})}else e.slots={},t&&ld(e,t);Si(e.slots,ho,1)},L_=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=Tt;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Ot(s,t),!n&&a===1&&delete s._):(i=!t.$stable,ad(t,s)),o=t}else t&&(ld(e,t),o={default:1});if(i)for(const a in s)!od(a)&&o[a]==null&&delete s[a]};function La(e,t,n,r,s=!1){if(q(e)){e.forEach((f,m)=>La(f,t&&(q(t)?t[m]:t),n,r,s));return}if(os(r)&&!s)return;const i=r.shapeFlag&4?po(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Tt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(xt(c)?(u[c]=null,it(h,c)&&(h[c]=null)):ee(c)&&(c.value=null)),Z(l))vn(l,a,12,[o,u]);else{const f=xt(l),m=ee(l);if(f||m){const E=()=>{if(e.f){const w=f?it(h,l)?h[l]:u[l]:l.value;s?q(w)&&Il(w,i):q(w)?w.includes(i)||w.push(i):f?(u[l]=[i],it(h,l)&&(h[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else f?(u[l]=o,it(h,l)&&(h[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(E.id=-1,ae(E,n)):E()}}}const ae=o_;function F_(e){return B_(e)}function B_(e,t){const n=_f();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=we,insertStaticContent:E}=e,w=(d,p,g,_=null,T=null,A=null,x=void 0,S=null,b=!!p.dynamicChildren)=>{if(d===p)return;d&&!Bn(d,p)&&(_=y(d),oe(d,T,A,!0),d=null),p.patchFlag===-2&&(b=!1,p.dynamicChildren=null);const{type:C,ref:k,shapeFlag:K}=p;switch(C){case co:I(d,p,g,_);break;case Ae:P(d,p,g,_);break;case na:d==null&&N(p,g,_,x);break;case le:B(d,p,g,_,T,A,x,S,b);break;default:K&1?U(d,p,g,_,T,A,x,S,b):K&6?dt(d,p,g,_,T,A,x,S,b):(K&64||K&128)&&C.process(d,p,g,_,T,A,x,S,b,V)}k!=null&&T&&La(k,d&&d.ref,A,p||d,!p)},I=(d,p,g,_)=>{if(d==null)r(p.el=a(p.children),g,_);else{const T=p.el=d.el;p.children!==d.children&&c(T,p.children)}},P=(d,p,g,_)=>{d==null?r(p.el=l(p.children||""),g,_):p.el=d.el},N=(d,p,g,_)=>{[d.el,d.anchor]=E(d.children,p,g,_,d.el,d.anchor)},L=({el:d,anchor:p},g,_)=>{let T;for(;d&&d!==p;)T=f(d),r(d,g,_),d=T;r(p,g,_)},z=({el:d,anchor:p})=>{let g;for(;d&&d!==p;)g=f(d),s(d),d=g;s(p)},U=(d,p,g,_,T,A,x,S,b)=>{p.type==="svg"?x="svg":p.type==="math"&&(x="mathml"),d==null?ut(p,g,_,T,A,x,S,b):yt(d,p,T,A,x,S,b)},ut=(d,p,g,_,T,A,x,S)=>{let b,C;const{props:k,shapeFlag:K,transition:j,dirs:Q}=d;if(b=d.el=o(d.type,A,k&&k.is,k),K&8?u(b,d.children):K&16&&J(d.children,b,null,_,T,ea(d,A),x,S),Q&&Nn(d,null,_,"created"),At(b,d,d.scopeId,x,_),k){for(const _t in k)_t!=="value"&&!vi(_t)&&i(b,_t,null,k[_t],A,d.children,_,T,Wt);"value"in k&&i(b,"value",null,k.value,A),(C=k.onVnodeBeforeMount)&&Oe(C,_,d)}Q&&Nn(d,null,_,"beforeMount");const nt=U_(T,j);nt&&j.beforeEnter(b),r(b,p,g),((C=k&&k.onVnodeMounted)||nt||Q)&&ae(()=>{C&&Oe(C,_,d),nt&&j.enter(b),Q&&Nn(d,null,_,"mounted")},T)},At=(d,p,g,_,T)=>{if(g&&m(d,g),_)for(let A=0;A<_.length;A++)m(d,_[A]);if(T){let A=T.subTree;if(p===A){const x=T.vnode;At(d,x,x.scopeId,x.slotScopeIds,T.parent)}}},J=(d,p,g,_,T,A,x,S,b=0)=>{for(let C=b;C<d.length;C++){const k=d[C]=S?pn(d[C]):Le(d[C]);w(null,k,p,g,_,T,A,x,S)}},yt=(d,p,g,_,T,A,x)=>{const S=p.el=d.el;let{patchFlag:b,dynamicChildren:C,dirs:k}=p;b|=d.patchFlag&16;const K=d.props||Tt,j=p.props||Tt;let Q;if(g&&kn(g,!1),(Q=j.onVnodeBeforeUpdate)&&Oe(Q,g,p,d),k&&Nn(p,d,g,"beforeUpdate"),g&&kn(g,!0),C?lt(d.dynamicChildren,C,S,g,_,ea(p,T),A):x||ht(d,p,S,null,g,_,ea(p,T),A,!1),b>0){if(b&16)Nt(S,p,K,j,g,_,T);else if(b&2&&K.class!==j.class&&i(S,"class",null,j.class,T),b&4&&i(S,"style",K.style,j.style,T),b&8){const nt=p.dynamicProps;for(let _t=0;_t<nt.length;_t++){const Rt=nt[_t],Mt=K[Rt],Re=j[Rt];(Re!==Mt||Rt==="value")&&i(S,Rt,Mt,Re,T,d.children,g,_,Wt)}}b&1&&d.children!==p.children&&u(S,p.children)}else!x&&C==null&&Nt(S,p,K,j,g,_,T);((Q=j.onVnodeUpdated)||k)&&ae(()=>{Q&&Oe(Q,g,p,d),k&&Nn(p,d,g,"updated")},_)},lt=(d,p,g,_,T,A,x)=>{for(let S=0;S<p.length;S++){const b=d[S],C=p[S],k=b.el&&(b.type===le||!Bn(b,C)||b.shapeFlag&70)?h(b.el):g;w(b,C,k,null,_,T,A,x,!0)}},Nt=(d,p,g,_,T,A,x)=>{if(g!==_){if(g!==Tt)for(const S in g)!vi(S)&&!(S in _)&&i(d,S,g[S],null,x,p.children,T,A,Wt);for(const S in _){if(vi(S))continue;const b=_[S],C=g[S];b!==C&&S!=="value"&&i(d,S,C,b,x,p.children,T,A,Wt)}"value"in _&&i(d,"value",g.value,_.value,x)}},B=(d,p,g,_,T,A,x,S,b)=>{const C=p.el=d?d.el:a(""),k=p.anchor=d?d.anchor:a("");let{patchFlag:K,dynamicChildren:j,slotScopeIds:Q}=p;Q&&(S=S?S.concat(Q):Q),d==null?(r(C,g,_),r(k,g,_),J(p.children,g,k,T,A,x,S,b)):K>0&&K&64&&j&&d.dynamicChildren?(lt(d.dynamicChildren,j,g,T,A,x,S),(p.key!=null||T&&p===T.subTree)&&cd(d,p,!0)):ht(d,p,g,k,T,A,x,S,b)},dt=(d,p,g,_,T,A,x,S,b)=>{p.slotScopeIds=S,d==null?p.shapeFlag&512?T.ctx.activate(p,g,_,x,b):re(p,g,_,T,A,x,b):We(d,p,b)},re=(d,p,g,_,T,A,x)=>{const S=d.component=Q_(d,_,T);if(ao(d)&&(S.ctx.renderer=V),X_(S),S.asyncDep){if(T&&T.registerDep(S,St),!d.el){const b=S.subTree=et(Ae);P(null,b,p,g)}}else St(S,d,p,g,T,A,x)},We=(d,p,g)=>{const _=p.component=d.component;if(e_(d,p,g))if(_.asyncDep&&!_.asyncResolved){gt(_,p,g);return}else _.next=p,Qg(_.update),_.effect.dirty=!0,_.update();else p.el=d.el,_.vnode=p},St=(d,p,g,_,T,A,x)=>{const S=()=>{if(d.isMounted){let{next:k,bu:K,u:j,parent:Q,vnode:nt}=d;{const ar=ud(d);if(ar){k&&(k.el=nt.el,gt(d,k,x)),ar.asyncDep.then(()=>{d.isUnmounted||S()});return}}let _t=k,Rt;kn(d,!1),k?(k.el=nt.el,gt(d,k,x)):k=nt,K&&Ti(K),(Rt=k.props&&k.props.onVnodeBeforeUpdate)&&Oe(Rt,Q,k,nt),kn(d,!0);const Mt=Jo(d),Re=d.subTree;d.subTree=Mt,w(Re,Mt,h(Re.el),y(Re),d,T,A),k.el=Mt.el,_t===null&&n_(d,Mt.el),j&&ae(j,T),(Rt=k.props&&k.props.onVnodeUpdated)&&ae(()=>Oe(Rt,Q,k,nt),T)}else{let k;const{el:K,props:j}=p,{bm:Q,m:nt,parent:_t}=d,Rt=os(p);if(kn(d,!1),Q&&Ti(Q),!Rt&&(k=j&&j.onVnodeBeforeMount)&&Oe(k,_t,p),kn(d,!0),K&&ft){const Mt=()=>{d.subTree=Jo(d),ft(K,d.subTree,d,T,null)};Rt?p.type.__asyncLoader().then(()=>!d.isUnmounted&&Mt()):Mt()}else{const Mt=d.subTree=Jo(d);w(null,Mt,g,_,d,T,A),p.el=Mt.el}if(nt&&ae(nt,T),!Rt&&(k=j&&j.onVnodeMounted)){const Mt=p;ae(()=>Oe(k,_t,Mt),T)}(p.shapeFlag&256||_t&&os(_t.vnode)&&_t.vnode.shapeFlag&256)&&d.a&&ae(d.a,T),d.isMounted=!0,p=g=_=null}},b=d.effect=new Cl(S,we,()=>Ol(C),d.scope),C=d.update=()=>{b.dirty&&b.run()};C.id=d.uid,kn(d,!0),C()},gt=(d,p,g)=>{p.component=d;const _=d.vnode.props;d.vnode=p,d.next=null,k_(d,p.props,_,g),L_(d,p.children,g),tr(),uu(d),er()},ht=(d,p,g,_,T,A,x,S,b=!1)=>{const C=d&&d.children,k=d?d.shapeFlag:0,K=p.children,{patchFlag:j,shapeFlag:Q}=p;if(j>0){if(j&128){ln(C,K,g,_,T,A,x,S,b);return}else if(j&256){Qe(C,K,g,_,T,A,x,S,b);return}}Q&8?(k&16&&Wt(C,T,A),K!==C&&u(g,K)):k&16?Q&16?ln(C,K,g,_,T,A,x,S,b):Wt(C,T,A,!0):(k&8&&u(g,""),Q&16&&J(K,g,_,T,A,x,S,b))},Qe=(d,p,g,_,T,A,x,S,b)=>{d=d||gr,p=p||gr;const C=d.length,k=p.length,K=Math.min(C,k);let j;for(j=0;j<K;j++){const Q=p[j]=b?pn(p[j]):Le(p[j]);w(d[j],Q,g,null,T,A,x,S,b)}C>k?Wt(d,T,A,!0,!1,K):J(p,g,_,T,A,x,S,b,K)},ln=(d,p,g,_,T,A,x,S,b)=>{let C=0;const k=p.length;let K=d.length-1,j=k-1;for(;C<=K&&C<=j;){const Q=d[C],nt=p[C]=b?pn(p[C]):Le(p[C]);if(Bn(Q,nt))w(Q,nt,g,null,T,A,x,S,b);else break;C++}for(;C<=K&&C<=j;){const Q=d[K],nt=p[j]=b?pn(p[j]):Le(p[j]);if(Bn(Q,nt))w(Q,nt,g,null,T,A,x,S,b);else break;K--,j--}if(C>K){if(C<=j){const Q=j+1,nt=Q<k?p[Q].el:_;for(;C<=j;)w(null,p[C]=b?pn(p[C]):Le(p[C]),g,nt,T,A,x,S,b),C++}}else if(C>j)for(;C<=K;)oe(d[C],T,A,!0),C++;else{const Q=C,nt=C,_t=new Map;for(C=nt;C<=j;C++){const pe=p[C]=b?pn(p[C]):Le(p[C]);pe.key!=null&&_t.set(pe.key,C)}let Rt,Mt=0;const Re=j-nt+1;let ar=!1,Jc=0;const zr=new Array(Re);for(C=0;C<Re;C++)zr[C]=0;for(C=Q;C<=K;C++){const pe=d[C];if(Mt>=Re){oe(pe,T,A,!0);continue}let ke;if(pe.key!=null)ke=_t.get(pe.key);else for(Rt=nt;Rt<=j;Rt++)if(zr[Rt-nt]===0&&Bn(pe,p[Rt])){ke=Rt;break}ke===void 0?oe(pe,T,A,!0):(zr[ke-nt]=C+1,ke>=Jc?Jc=ke:ar=!0,w(pe,p[ke],g,null,T,A,x,S,b),Mt++)}const Zc=ar?$_(zr):gr;for(Rt=Zc.length-1,C=Re-1;C>=0;C--){const pe=nt+C,ke=p[pe],tu=pe+1<k?p[pe+1].el:_;zr[C]===0?w(null,ke,g,tu,T,A,x,S,b):ar&&(Rt<0||C!==Zc[Rt]?Ne(ke,g,tu,2):Rt--)}}},Ne=(d,p,g,_,T=null)=>{const{el:A,type:x,transition:S,children:b,shapeFlag:C}=d;if(C&6){Ne(d.component.subTree,p,g,_);return}if(C&128){d.suspense.move(p,g,_);return}if(C&64){x.move(d,p,g,V);return}if(x===le){r(A,p,g);for(let K=0;K<b.length;K++)Ne(b[K],p,g,_);r(d.anchor,p,g);return}if(x===na){L(d,p,g);return}if(_!==2&&C&1&&S)if(_===0)S.beforeEnter(A),r(A,p,g),ae(()=>S.enter(A),T);else{const{leave:K,delayLeave:j,afterLeave:Q}=S,nt=()=>r(A,p,g),_t=()=>{K(A,()=>{nt(),Q&&Q()})};j?j(A,nt,_t):_t()}else r(A,p,g)},oe=(d,p,g,_=!1,T=!1)=>{const{type:A,props:x,ref:S,children:b,dynamicChildren:C,shapeFlag:k,patchFlag:K,dirs:j}=d;if(S!=null&&La(S,null,g,d,!0),k&256){p.ctx.deactivate(d);return}const Q=k&1&&j,nt=!os(d);let _t;if(nt&&(_t=x&&x.onVnodeBeforeUnmount)&&Oe(_t,p,d),k&6)si(d.component,g,_);else{if(k&128){d.suspense.unmount(g,_);return}Q&&Nn(d,null,p,"beforeUnmount"),k&64?d.type.remove(d,p,g,T,V,_):C&&(A!==le||K>0&&K&64)?Wt(C,p,g,!1,!0):(A===le&&K&384||!T&&k&16)&&Wt(b,p,g),_&&ir(d)}(nt&&(_t=x&&x.onVnodeUnmounted)||Q)&&ae(()=>{_t&&Oe(_t,p,d),Q&&Nn(d,null,p,"unmounted")},g)},ir=d=>{const{type:p,el:g,anchor:_,transition:T}=d;if(p===le){or(g,_);return}if(p===na){z(d);return}const A=()=>{s(g),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(d.shapeFlag&1&&T&&!T.persisted){const{leave:x,delayLeave:S}=T,b=()=>x(g,A);S?S(d.el,A,b):b()}else A()},or=(d,p)=>{let g;for(;d!==p;)g=f(d),s(d),d=g;s(p)},si=(d,p,g)=>{const{bum:_,scope:T,update:A,subTree:x,um:S}=d;_&&Ti(_),T.stop(),A&&(A.active=!1,oe(x,d,p,g)),S&&ae(S,p),ae(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Wt=(d,p,g,_=!1,T=!1,A=0)=>{for(let x=A;x<d.length;x++)oe(d[x],p,g,_,T)},y=d=>d.shapeFlag&6?y(d.component.subTree):d.shapeFlag&128?d.suspense.next():f(d.anchor||d.el),O=(d,p,g)=>{d==null?p._vnode&&oe(p._vnode,null,null,!0):w(p._vnode||null,d,p,null,null,null,g),uu(),jf(),p._vnode=d},V={p:w,um:oe,m:Ne,r:ir,mt:re,mc:J,pc:ht,pbc:lt,n:y,o:e};let $,ft;return t&&([$,ft]=t(V)),{render:O,hydrate:$,createApp:x_(O,$)}}function ea({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function kn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function U_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function cd(e,t,n=!1){const r=e.children,s=t.children;if(q(r)&&q(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=pn(s[i]),a.el=o.el),n||cd(o,a)),a.type===co&&(a.el=o.el)}}function $_(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function ud(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ud(t)}const j_=e=>e.__isTeleport,le=Symbol.for("v-fgt"),co=Symbol.for("v-txt"),Ae=Symbol.for("v-cmt"),na=Symbol.for("v-stc"),ls=[];let Ce=null;function Kt(e=!1){ls.push(Ce=e?null:[])}function q_(){ls.pop(),Ce=ls[ls.length-1]||null}let Es=1;function wu(e){Es+=e}function hd(e){return e.dynamicChildren=Es>0?Ce||gr:null,q_(),Es>0&&Ce&&Ce.push(e),e}function ge(e,t,n,r,s,i){return hd(X(e,t,n,r,s,i,!0))}function uo(e,t,n,r,s){return hd(et(e,t,n,r,s,!0))}function Ni(e){return e?e.__v_isVNode===!0:!1}function Bn(e,t){return e.type===t.type&&e.key===t.key}const ho="__vInternal",fd=({key:e})=>e??null,Ii=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?xt(e)||ee(e)||Z(e)?{i:Ht,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,r=0,s=null,i=e===le?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&fd(t),ref:t&&Ii(t),scopeId:oo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ht};return a?($l(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=xt(n)?8:16),Es>0&&!o&&Ce&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ce.push(l),l}const et=H_;function H_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===r_)&&(e=Ae),Ni(e)){const a=Pn(e,t,!0);return n&&$l(a,n),Es>0&&!i&&Ce&&(a.shapeFlag&6?Ce[Ce.indexOf(e)]=a:Ce.push(a)),a.patchFlag|=-2,a}if(ny(e)&&(e=e.__vccOpts),t){t=K_(t);let{class:a,style:l}=t;a&&!xt(a)&&(t.class=eo(a)),Et(l)&&(Nf(l)&&!q(l)&&(l=Ot({},l)),t.style=ze(l))}const o=xt(e)?1:i_(e)?128:j_(e)?64:Et(e)?4:Z(e)?2:0;return X(e,t,n,r,s,o,i,!0)}function K_(e){return e?Nf(e)||ho in e?Ot({},e):e:null}function Pn(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?z_(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&fd(a),ref:t&&t.ref?n&&s?q(s)?s.concat(Ii(t)):[s,Ii(t)]:Ii(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==le?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pn(e.ssContent),ssFallback:e.ssFallback&&Pn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Me(e=" ",t=0){return et(co,null,e,t)}function R1(e="",t=!1){return t?(Kt(),uo(Ae,null,e)):et(Ae,null,e)}function Le(e){return e==null||typeof e=="boolean"?et(Ae):q(e)?et(le,null,e.slice()):typeof e=="object"?pn(e):et(co,null,String(e))}function pn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Pn(e)}function $l(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(q(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),$l(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(ho in t)?t._ctx=Ht:s===3&&Ht&&(Ht.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:Ht},n=32):(t=String(t),r&64?(n=16,t=[Me(t)]):n=8);e.children=t,e.shapeFlag|=n}function z_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=eo([t.class,r.class]));else if(s==="style")t.style=ze([t.style,r.style]);else if(Ji(s)){const i=t[s],o=r[s];o&&i!==o&&!(q(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function Oe(e,t,n,r=null){Ie(e,t,7,[n,r])}const G_=rd();let W_=0;function Q_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||G_,i={uid:W_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Tg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:id(r,s),emitsOptions:Hf(r,s),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:r.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Jg.bind(null,i),e.ce&&e.ce(i),i}let Ft=null;const Y_=()=>Ft||Ht;let jl,Fa;{const e=_f(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};jl=t("__VUE_INSTANCE_SETTERS__",n=>Ft=n),Fa=t("__VUE_SSR_SETTERS__",n=>fo=n)}const Rr=e=>{jl(e),e.scope.on()},Kn=()=>{Ft&&Ft.scope.off(),jl(null)};function dd(e){return e.vnode.shapeFlag&4}let fo=!1;function X_(e,t=!1){t&&Fa(t);const{props:n,children:r}=e.vnode,s=dd(e);N_(e,n,s,t),M_(e,r);const i=s?J_(e,t):void 0;return t&&Fa(!1),i}function J_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=kf(new Proxy(e.ctx,R_));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?ty(e):null;Rr(e),tr();const i=vn(r,e,0,[e.props,s]);if(er(),Kn(),pf(i)){if(i.then(Kn,Kn),t)return i.then(o=>{Iu(e,o,t)}).catch(o=>{so(o,e,0)});e.asyncDep=i}else Iu(e,i,t)}else pd(e,t)}function Iu(e,t,n){Z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=Ff(t)),pd(e,n)}let Au;function pd(e,t,n){const r=e.type;if(!e.render){if(!t&&Au&&!r.render){const s=r.template||Bl(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Ot(Ot({isCustomElement:i,delimiters:a},o),l);r.render=Au(s,c)}}e.render=r.render||we}{Rr(e),tr();try{C_(e)}finally{er(),Kn()}}}function Z_(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return fe(e,"get","$attrs"),t[n]}}))}function ty(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Z_(e)},slots:e.slots,emit:e.emit,expose:t}}function po(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ff(kf(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in as)return as[n](e)},has(t,n){return n in t||n in as}}))}function ey(e,t=!0){return Z(e)?e.displayName||e.name:e.name||t&&e.__name}function ny(e){return Z(e)&&"__vccOpts"in e}const ce=(e,t)=>qg(e,t,fo);function ql(e,t,n){const r=arguments.length;return r===2?Et(t)&&!q(t)?Ni(t)?et(e,null,[t]):et(e,t):et(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ni(n)&&(n=[n]),et(e,t,n))}const ry="3.4.3",sy="http://www.w3.org/2000/svg",iy="http://www.w3.org/1998/Math/MathML",mn=typeof document<"u"?document:null,Ru=mn&&mn.createElement("template"),oy={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?mn.createElementNS(sy,e):t==="mathml"?mn.createElementNS(iy,e):mn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>mn.createTextNode(e),createComment:e=>mn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>mn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Ru.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=Ru.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},un="transition",Gr="animation",vs=Symbol("_vtc"),mo=(e,{slots:t})=>ql(d_,ay(e),t);mo.displayName="Transition";const md={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};mo.props=Ot({},Wf,md);const On=(e,t=[])=>{q(e)?e.forEach(n=>n(...t)):e&&e(...t)},Cu=e=>e?q(e)?e.some(t=>t.length>1):e.length>1:!1;function ay(e){const t={};for(const B in e)B in md||(t[B]=e[B]);if(e.css===!1)return t;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,E=ly(s),w=E&&E[0],I=E&&E[1],{onBeforeEnter:P,onEnter:N,onEnterCancelled:L,onLeave:z,onLeaveCancelled:U,onBeforeAppear:ut=P,onAppear:At=N,onAppearCancelled:J=L}=t,yt=(B,dt,re)=>{Mn(B,dt?u:a),Mn(B,dt?c:o),re&&re()},lt=(B,dt)=>{B._isLeaving=!1,Mn(B,h),Mn(B,m),Mn(B,f),dt&&dt()},Nt=B=>(dt,re)=>{const We=B?At:N,St=()=>yt(dt,B,re);On(We,[dt,St]),Pu(()=>{Mn(dt,B?l:i),hn(dt,B?u:a),Cu(We)||Su(dt,r,w,St)})};return Ot(t,{onBeforeEnter(B){On(P,[B]),hn(B,i),hn(B,o)},onBeforeAppear(B){On(ut,[B]),hn(B,l),hn(B,c)},onEnter:Nt(!1),onAppear:Nt(!0),onLeave(B,dt){B._isLeaving=!0;const re=()=>lt(B,dt);hn(B,h),hy(),hn(B,f),Pu(()=>{B._isLeaving&&(Mn(B,h),hn(B,m),Cu(z)||Su(B,r,I,re))}),On(z,[B,re])},onEnterCancelled(B){yt(B,!1),On(L,[B])},onAppearCancelled(B){yt(B,!0),On(J,[B])},onLeaveCancelled(B){lt(B),On(U,[B])}})}function ly(e){if(e==null)return null;if(Et(e))return[ra(e.enter),ra(e.leave)];{const t=ra(e);return[t,t]}}function ra(e){return dg(e)}function hn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[vs]||(e[vs]=new Set)).add(t)}function Mn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[vs];n&&(n.delete(t),n.size||(e[vs]=void 0))}function Pu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let cy=0;function Su(e,t,n,r){const s=e._endId=++cy,i=()=>{s===e._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=uy(e,t);if(!o)return r();const c=o+"end";let u=0;const h=()=>{e.removeEventListener(c,f),i()},f=m=>{m.target===e&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),e.addEventListener(c,f)}function uy(e,t){const n=window.getComputedStyle(e),r=E=>(n[E]||"").split(", "),s=r(`${un}Delay`),i=r(`${un}Duration`),o=bu(s,i),a=r(`${Gr}Delay`),l=r(`${Gr}Duration`),c=bu(a,l);let u=null,h=0,f=0;t===un?o>0&&(u=un,h=o,f=i.length):t===Gr?c>0&&(u=Gr,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?un:Gr:null,f=u?u===un?i.length:l.length:0);const m=u===un&&/\b(transform|all)(,|$)/.test(r(`${un}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:m}}function bu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Vu(n)+Vu(e[r])))}function Vu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function hy(){return document.body.offsetHeight}function fy(e,t,n){const r=e[vs];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Hl=Symbol("_vod"),dy={beforeMount(e,{value:t},{transition:n}){e[Hl]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Wr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Wr(e,!0),r.enter(e)):r.leave(e,()=>{Wr(e,!1)}):Wr(e,t))},beforeUnmount(e,{value:t}){Wr(e,t)}};function Wr(e,t){e.style.display=t?e[Hl]:"none"}const py=Symbol("");function my(e,t,n){const r=e.style,s=xt(n);if(n&&!s){if(t&&!xt(t))for(const i in t)n[i]==null&&Ba(r,i,"");for(const i in n)Ba(r,i,n[i])}else{const i=r.display;if(s){if(t!==n){const o=r[py];o&&(n+=";"+o),r.cssText=n}}else t&&e.removeAttribute("style");Hl in e&&(r.display=i)}}const Du=/\s*!important$/;function Ba(e,t,n){if(q(n))n.forEach(r=>Ba(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=gy(e,t);Du.test(n)?e.setProperty(Zn(r),n.replace(Du,""),"important"):e[r]=n}}const xu=["Webkit","Moz","ms"],sa={};function gy(e,t){const n=sa[t];if(n)return n;let r=Ke(t);if(r!=="filter"&&r in e)return sa[t]=r;r=to(r);for(let s=0;s<xu.length;s++){const i=xu[s]+r;if(i in e)return sa[t]=i}return t}const Nu="http://www.w3.org/1999/xlink";function _y(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Nu,t.slice(6,t.length)):e.setAttributeNS(Nu,t,n);else{const i=Eg(t);n==null||i&&!yf(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function yy(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=yf(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function _n(e,t,n,r){e.addEventListener(t,n,r)}function Ey(e,t,n,r){e.removeEventListener(t,n,r)}const ku=Symbol("_vei");function vy(e,t,n,r,s=null){const i=e[ku]||(e[ku]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=Ty(t);if(r){const c=i[t]=Ay(r,s);_n(e,a,c,l)}else o&&(Ey(e,a,o,l),i[t]=void 0)}}const Ou=/(?:Once|Passive|Capture)$/;function Ty(e){let t;if(Ou.test(e)){t={};let r;for(;r=e.match(Ou);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Zn(e.slice(2)),t]}let ia=0;const wy=Promise.resolve(),Iy=()=>ia||(wy.then(()=>ia=0),ia=Date.now());function Ay(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ie(Ry(r,n.value),t,5,[r])};return n.value=e,n.attached=Iy(),n}function Ry(e,t){if(q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Mu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Cy=(e,t,n,r,s,i,o,a,l)=>{const c=s==="svg";t==="class"?fy(e,r,c):t==="style"?my(e,n,r):Ji(t)?wl(t)||vy(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Py(e,t,r,c))?yy(e,t,r,i,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),_y(e,t,r,c))};function Py(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Mu(t)&&Z(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Mu(t)&&xt(n)?!1:t in e}const Cr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return q(t)?n=>Ti(t,n):t};function Sy(e){e.target.composing=!0}function Lu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const en=Symbol("_assign"),C1={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[en]=Cr(s);const i=r||s.props&&s.props.type==="number";_n(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=bi(a)),e[en](a)}),n&&_n(e,"change",()=>{e.value=e.value.trim()}),t||(_n(e,"compositionstart",Sy),_n(e,"compositionend",Lu),_n(e,"change",Lu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[en]=Cr(i),e.composing)return;const o=s||e.type==="number"?bi(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},P1={deep:!0,created(e,t,n){e[en]=Cr(n),_n(e,"change",()=>{const r=e._modelValue,s=Ts(e),i=e.checked,o=e[en];if(q(r)){const a=Rl(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Lr(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(gd(e,i))})},mounted:Fu,beforeUpdate(e,t,n){e[en]=Cr(n),Fu(e,t,n)}};function Fu(e,{value:t,oldValue:n},r){e._modelValue=t,q(t)?e.checked=Rl(t,r.props.value)>-1:Lr(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=$s(t,gd(e,!0)))}const S1={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Lr(t);_n(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?bi(Ts(o)):Ts(o));e[en](e.multiple?s?new Set(i):i:i[0])}),e[en]=Cr(r)},mounted(e,{value:t}){Bu(e,t)},beforeUpdate(e,t,n){e[en]=Cr(n)},updated(e,{value:t}){Bu(e,t)}};function Bu(e,t){const n=e.multiple;if(!(n&&!q(t)&&!Lr(t))){for(let r=0,s=e.options.length;r<s;r++){const i=e.options[r],o=Ts(i);if(n)q(t)?i.selected=Rl(t,o)>-1:i.selected=t.has(o);else if($s(Ts(i),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ts(e){return"_value"in e?e._value:e.value}function gd(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const by=["ctrl","shift","alt","meta"],Vy={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>by.some(n=>e[`${n}Key`]&&!t.includes(n))},b1=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=Vy[t[o]];if(a&&a(s,t))return}return e(s,...i)})},Dy={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},V1=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=Zn(s.key);if(t.some(o=>o===i||Dy[o]===i))return e(s)})},xy=Ot({patchProp:Cy},oy);let Uu;function Ny(){return Uu||(Uu=F_(xy))}const ky=(...e)=>{const t=Ny().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=My(r);if(!s)return;const i=t._component;!Z(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Oy(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Oy(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function My(e){return xt(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ur=typeof window<"u";function Ly(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const pt=Object.assign;function oa(e,t){const n={};for(const r in t){const s=t[r];n[r]=Ve(s)?s.map(e):e(s)}return n}const cs=()=>{},Ve=Array.isArray,Fy=/\/$/,By=e=>e.replace(Fy,"");function aa(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=qy(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function Uy(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function $u(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function $y(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Pr(t.matched[r],n.matched[s])&&_d(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Pr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function _d(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!jy(e[n],t[n]))return!1;return!0}function jy(e,t){return Ve(e)?ju(e,t):Ve(t)?ju(t,e):e===t}function ju(e,t){return Ve(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function qy(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var ws;(function(e){e.pop="pop",e.push="push"})(ws||(ws={}));var us;(function(e){e.back="back",e.forward="forward",e.unknown=""})(us||(us={}));function Hy(e){if(!e)if(ur){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),By(e)}const Ky=/^[^#]+#/;function zy(e,t){return e.replace(Ky,"#")+t}function Gy(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const go=()=>({left:window.pageXOffset,top:window.pageYOffset});function Wy(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Gy(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function qu(e,t){return(history.state?history.state.position-t:-1)+e}const Ua=new Map;function Qy(e,t){Ua.set(e,t)}function Yy(e){const t=Ua.get(e);return Ua.delete(e),t}let Xy=()=>location.protocol+"//"+location.host;function yd(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),$u(l,"")}return $u(n,e)+r+s}function Jy(e,t,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const m=yd(e,location),E=n.value,w=t.value;let I=0;if(f){if(n.value=m,t.value=f,o&&o===E){o=null;return}I=w?f.position-w.position:0}else r(m);s.forEach(P=>{P(n.value,E,{delta:I,type:ws.pop,direction:I?I>0?us.forward:us.back:us.unknown})})};function l(){o=n.value}function c(f){s.push(f);const m=()=>{const E=s.indexOf(f);E>-1&&s.splice(E,1)};return i.push(m),m}function u(){const{history:f}=window;f.state&&f.replaceState(pt({},f.state,{scroll:go()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Hu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?go():null}}function Zy(e){const{history:t,location:n}=window,r={value:yd(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:Xy()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(m){console.error(m),n[u?"replace":"assign"](f)}}function o(l,c){const u=pt({},t.state,Hu(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=pt({},s.value,t.state,{forward:l,scroll:go()});i(u.current,u,!0);const h=pt({},Hu(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function tE(e){e=Hy(e);const t=Zy(e),n=Jy(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=pt({location:"",base:e,go:r,createHref:zy.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function eE(e){return typeof e=="string"||e&&typeof e=="object"}function Ed(e){return typeof e=="string"||typeof e=="symbol"}const fn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},vd=Symbol("");var Ku;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Ku||(Ku={}));function Sr(e,t){return pt(new Error,{type:e,[vd]:!0},t)}function Ye(e,t){return e instanceof Error&&vd in e&&(t==null||!!(e.type&t))}const zu="[^/]+?",nE={sensitive:!1,strict:!1,start:!0,end:!0},rE=/[.+*?^${}()[\]/\\]/g;function sE(e,t){const n=pt({},nE,t),r=[];let s=n.start?"^":"";const i=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const f=c[h];let m=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(rE,"\\$&"),m+=40;else if(f.type===1){const{value:E,repeatable:w,optional:I,regexp:P}=f;i.push({name:E,repeatable:w,optional:I});const N=P||zu;if(N!==zu){m+=10;try{new RegExp(`(${N})`)}catch(z){throw new Error(`Invalid custom RegExp for param "${E}" (${N}): `+z.message)}}let L=w?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;h||(L=I&&c.length<2?`(?:/${L})`:"/"+L),I&&(L+="?"),s+=L,m+=20,I&&(m+=-8),w&&(m+=-20),N===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const m=u[f]||"",E=i[f-1];h[E.name]=m&&E.repeatable?m.split("/"):m}return h}function l(c){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const m of f)if(m.type===0)u+=m.value;else if(m.type===1){const{value:E,repeatable:w,optional:I}=m,P=E in c?c[E]:"";if(Ve(P)&&!w)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const N=Ve(P)?P.join("/"):P;if(!N)if(I)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${E}"`);u+=N}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function iE(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function oE(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=iE(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Gu(r))return 1;if(Gu(s))return-1}return s.length-r.length}function Gu(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const aE={type:0,value:""},lE=/[a-zA-Z0-9_]/;function cE(e){if(!e)return[[]];if(e==="/")return[[aE]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:lE.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function uE(e,t,n){const r=sE(cE(e.path),n),s=pt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function hE(e,t){const n=[],r=new Map;t=Yu({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,f){const m=!f,E=fE(u);E.aliasOf=f&&f.record;const w=Yu(t,u),I=[E];if("alias"in u){const L=typeof u.alias=="string"?[u.alias]:u.alias;for(const z of L)I.push(pt({},E,{components:f?f.record.components:E.components,path:z,aliasOf:f?f.record:E}))}let P,N;for(const L of I){const{path:z}=L;if(h&&z[0]!=="/"){const U=h.record.path,ut=U[U.length-1]==="/"?"":"/";L.path=h.record.path+(z&&ut+z)}if(P=uE(L,h,w),f?f.alias.push(P):(N=N||P,N!==P&&N.alias.push(P),m&&u.name&&!Qu(P)&&o(u.name)),E.children){const U=E.children;for(let ut=0;ut<U.length;ut++)i(U[ut],P,f&&f.children[ut])}f=f||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&l(P)}return N?()=>{o(N)}:cs}function o(u){if(Ed(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&oE(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Td(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Qu(u)&&r.set(u.record.name,u)}function c(u,h){let f,m={},E,w;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Sr(1,{location:u});w=f.record.name,m=pt(Wu(h.params,f.keys.filter(N=>!N.optional).map(N=>N.name)),u.params&&Wu(u.params,f.keys.map(N=>N.name))),E=f.stringify(m)}else if("path"in u)E=u.path,f=n.find(N=>N.re.test(E)),f&&(m=f.parse(E),w=f.record.name);else{if(f=h.name?r.get(h.name):n.find(N=>N.re.test(h.path)),!f)throw Sr(1,{location:u,currentLocation:h});w=f.record.name,m=pt({},h.params,u.params),E=f.stringify(m)}const I=[];let P=f;for(;P;)I.unshift(P.record),P=P.parent;return{name:w,path:E,params:m,matched:I,meta:pE(I)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function Wu(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function fE(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:dE(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function dE(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Qu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function pE(e){return e.reduce((t,n)=>pt(t,n.meta),{})}function Yu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Td(e,t){return t.children.some(n=>n===e||Td(e,n))}const wd=/#/g,mE=/&/g,gE=/\//g,_E=/=/g,yE=/\?/g,Id=/\+/g,EE=/%5B/g,vE=/%5D/g,Ad=/%5E/g,TE=/%60/g,Rd=/%7B/g,wE=/%7C/g,Cd=/%7D/g,IE=/%20/g;function Kl(e){return encodeURI(""+e).replace(wE,"|").replace(EE,"[").replace(vE,"]")}function AE(e){return Kl(e).replace(Rd,"{").replace(Cd,"}").replace(Ad,"^")}function $a(e){return Kl(e).replace(Id,"%2B").replace(IE,"+").replace(wd,"%23").replace(mE,"%26").replace(TE,"`").replace(Rd,"{").replace(Cd,"}").replace(Ad,"^")}function RE(e){return $a(e).replace(_E,"%3D")}function CE(e){return Kl(e).replace(wd,"%23").replace(yE,"%3F")}function PE(e){return e==null?"":CE(e).replace(gE,"%2F")}function ki(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function SE(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Id," "),o=i.indexOf("="),a=ki(o<0?i:i.slice(0,o)),l=o<0?null:ki(i.slice(o+1));if(a in t){let c=t[a];Ve(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Xu(e){let t="";for(let n in e){const r=e[n];if(n=RE(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ve(r)?r.map(i=>i&&$a(i)):[r&&$a(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function bE(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Ve(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const VE=Symbol(""),Ju=Symbol(""),_o=Symbol(""),zl=Symbol(""),ja=Symbol("");function Qr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function gn(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Sr(4,{from:n,to:t})):h instanceof Error?a(h):eE(h)?a(Sr(2,{from:t,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},c=e.call(r&&r.instances[s],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function la(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if(DE(a)){const c=(a.__vccOpts||a)[t];c&&s.push(gn(c,n,r,i,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=Ly(c)?c.default:c;i.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&gn(f,n,r,i,o)()}))}}return s}function DE(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Zu(e){const t=Se(_o),n=Se(zl),r=ce(()=>t.resolve(ue(e.to))),s=ce(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Pr.bind(null,u));if(f>-1)return f;const m=th(l[c-2]);return c>1&&th(u)===m&&h[h.length-1].path!==m?h.findIndex(Pr.bind(null,l[c-2])):f}),i=ce(()=>s.value>-1&&OE(n.params,r.value.params)),o=ce(()=>s.value>-1&&s.value===n.matched.length-1&&_d(n.params,r.value.params));function a(l={}){return kE(l)?t[ue(e.replace)?"replace":"push"](ue(e.to)).catch(cs):Promise.resolve()}return{route:r,href:ce(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const xE=de({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Zu,setup(e,{slots:t}){const n=ro(Zu(e)),{options:r}=Se(_o),s=ce(()=>({[eh(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[eh(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:ql("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),NE=xE;function kE(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function OE(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Ve(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function th(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const eh=(e,t,n)=>e??t??n,ME=de({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Se(ja),s=ce(()=>e.route||r.value),i=Se(Ju,0),o=ce(()=>{let c=ue(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=ce(()=>s.value.matched[o.value]);wi(Ju,ce(()=>o.value+1)),wi(VE,a),wi(ja,s);const l=js();return is(()=>[l.value,a.value,e.name],([c,u,h],[f,m,E])=>{u&&(u.instances[h]=c,m&&m!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!Pr(u,m)||!f)&&(u.enterCallbacks[h]||[]).forEach(w=>w(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return nh(n.default,{Component:f,route:c});const m=h.props[u],E=m?m===!0?c.params:typeof m=="function"?m(c):m:null,I=ql(f,pt({},E,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return nh(n.default,{Component:I,route:c})||I}}});function nh(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Pd=ME;function LE(e){const t=hE(e.routes,e),n=e.parseQuery||SE,r=e.stringifyQuery||Xu,s=e.history,i=Qr(),o=Qr(),a=Qr(),l=Hg(fn);let c=fn;ur&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=oa.bind(null,y=>""+y),h=oa.bind(null,PE),f=oa.bind(null,ki);function m(y,O){let V,$;return Ed(y)?(V=t.getRecordMatcher(y),$=O):$=y,t.addRoute($,V)}function E(y){const O=t.getRecordMatcher(y);O&&t.removeRoute(O)}function w(){return t.getRoutes().map(y=>y.record)}function I(y){return!!t.getRecordMatcher(y)}function P(y,O){if(O=pt({},O||l.value),typeof y=="string"){const g=aa(n,y,O.path),_=t.resolve({path:g.path},O),T=s.createHref(g.fullPath);return pt(g,_,{params:f(_.params),hash:ki(g.hash),redirectedFrom:void 0,href:T})}let V;if("path"in y)V=pt({},y,{path:aa(n,y.path,O.path).path});else{const g=pt({},y.params);for(const _ in g)g[_]==null&&delete g[_];V=pt({},y,{params:h(g)}),O.params=h(O.params)}const $=t.resolve(V,O),ft=y.hash||"";$.params=u(f($.params));const d=Uy(r,pt({},y,{hash:AE(ft),path:$.path})),p=s.createHref(d);return pt({fullPath:d,hash:ft,query:r===Xu?bE(y.query):y.query||{}},$,{redirectedFrom:void 0,href:p})}function N(y){return typeof y=="string"?aa(n,y,l.value.path):pt({},y)}function L(y,O){if(c!==y)return Sr(8,{from:O,to:y})}function z(y){return At(y)}function U(y){return z(pt(N(y),{replace:!0}))}function ut(y){const O=y.matched[y.matched.length-1];if(O&&O.redirect){const{redirect:V}=O;let $=typeof V=="function"?V(y):V;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=N($):{path:$},$.params={}),pt({query:y.query,hash:y.hash,params:"path"in $?{}:y.params},$)}}function At(y,O){const V=c=P(y),$=l.value,ft=y.state,d=y.force,p=y.replace===!0,g=ut(V);if(g)return At(pt(N(g),{state:typeof g=="object"?pt({},ft,g.state):ft,force:d,replace:p}),O||V);const _=V;_.redirectedFrom=O;let T;return!d&&$y(r,$,V)&&(T=Sr(16,{to:_,from:$}),Ne($,$,!0,!1)),(T?Promise.resolve(T):lt(_,$)).catch(A=>Ye(A)?Ye(A,2)?A:ln(A):ht(A,_,$)).then(A=>{if(A){if(Ye(A,2))return At(pt({replace:p},N(A.to),{state:typeof A.to=="object"?pt({},ft,A.to.state):ft,force:d}),O||_)}else A=B(_,$,!0,p,ft);return Nt(_,$,A),A})}function J(y,O){const V=L(y,O);return V?Promise.reject(V):Promise.resolve()}function yt(y){const O=or.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(y):y()}function lt(y,O){let V;const[$,ft,d]=FE(y,O);V=la($.reverse(),"beforeRouteLeave",y,O);for(const g of $)g.leaveGuards.forEach(_=>{V.push(gn(_,y,O))});const p=J.bind(null,y,O);return V.push(p),Wt(V).then(()=>{V=[];for(const g of i.list())V.push(gn(g,y,O));return V.push(p),Wt(V)}).then(()=>{V=la(ft,"beforeRouteUpdate",y,O);for(const g of ft)g.updateGuards.forEach(_=>{V.push(gn(_,y,O))});return V.push(p),Wt(V)}).then(()=>{V=[];for(const g of d)if(g.beforeEnter)if(Ve(g.beforeEnter))for(const _ of g.beforeEnter)V.push(gn(_,y,O));else V.push(gn(g.beforeEnter,y,O));return V.push(p),Wt(V)}).then(()=>(y.matched.forEach(g=>g.enterCallbacks={}),V=la(d,"beforeRouteEnter",y,O),V.push(p),Wt(V))).then(()=>{V=[];for(const g of o.list())V.push(gn(g,y,O));return V.push(p),Wt(V)}).catch(g=>Ye(g,8)?g:Promise.reject(g))}function Nt(y,O,V){a.list().forEach($=>yt(()=>$(y,O,V)))}function B(y,O,V,$,ft){const d=L(y,O);if(d)return d;const p=O===fn,g=ur?history.state:{};V&&($||p?s.replace(y.fullPath,pt({scroll:p&&g&&g.scroll},ft)):s.push(y.fullPath,ft)),l.value=y,Ne(y,O,V,p),ln()}let dt;function re(){dt||(dt=s.listen((y,O,V)=>{if(!si.listening)return;const $=P(y),ft=ut($);if(ft){At(pt(ft,{replace:!0}),$).catch(cs);return}c=$;const d=l.value;ur&&Qy(qu(d.fullPath,V.delta),go()),lt($,d).catch(p=>Ye(p,12)?p:Ye(p,2)?(At(p.to,$).then(g=>{Ye(g,20)&&!V.delta&&V.type===ws.pop&&s.go(-1,!1)}).catch(cs),Promise.reject()):(V.delta&&s.go(-V.delta,!1),ht(p,$,d))).then(p=>{p=p||B($,d,!1),p&&(V.delta&&!Ye(p,8)?s.go(-V.delta,!1):V.type===ws.pop&&Ye(p,20)&&s.go(-1,!1)),Nt($,d,p)}).catch(cs)}))}let We=Qr(),St=Qr(),gt;function ht(y,O,V){ln(y);const $=St.list();return $.length?$.forEach(ft=>ft(y,O,V)):console.error(y),Promise.reject(y)}function Qe(){return gt&&l.value!==fn?Promise.resolve():new Promise((y,O)=>{We.add([y,O])})}function ln(y){return gt||(gt=!y,re(),We.list().forEach(([O,V])=>y?V(y):O()),We.reset()),y}function Ne(y,O,V,$){const{scrollBehavior:ft}=e;if(!ur||!ft)return Promise.resolve();const d=!V&&Yy(qu(y.fullPath,0))||($||!V)&&history.state&&history.state.scroll||null;return Uf().then(()=>ft(y,O,d)).then(p=>p&&Wy(p)).catch(p=>ht(p,y,O))}const oe=y=>s.go(y);let ir;const or=new Set,si={currentRoute:l,listening:!0,addRoute:m,removeRoute:E,hasRoute:I,getRoutes:w,resolve:P,options:e,push:z,replace:U,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:St.add,isReady:Qe,install(y){const O=this;y.component("RouterLink",NE),y.component("RouterView",Pd),y.config.globalProperties.$router=O,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>ue(l)}),ur&&!ir&&l.value===fn&&(ir=!0,z(s.location).catch(ft=>{}));const V={};for(const ft in fn)Object.defineProperty(V,ft,{get:()=>l.value[ft],enumerable:!0});y.provide(_o,O),y.provide(zl,xf(V)),y.provide(ja,l);const $=y.unmount;or.add(y),y.unmount=function(){or.delete(y),or.size<1&&(c=fn,dt&&dt(),dt=null,l.value=fn,ir=!1,gt=!1),$()}}};function Wt(y){return y.reduce((O,V)=>O.then(()=>yt(V)),Promise.resolve())}return si}function FE(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(c=>Pr(c,a))?r.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Pr(c,l))||s.push(l))}return[n,r,s]}function BE(){return Se(_o)}function D1(){return Se(zl)}const UE=X("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"},null,-1),$E=[UE],Sd=de({__name:"IconGithub",props:{color:{}},setup(e){return(t,n)=>(Kt(),ge("svg",{style:ze({fill:t.color??"#fff"}),viewBox:"0 0 98 96",xmlns:"http://www.w3.org/2000/svg"},$E,4))}}),jE=de({__name:"IconHome",props:{color:{}},setup(e){return(t,n)=>(Kt(),ge("svg",{style:ze({fill:t.color??"#fff"}),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[X("path",{style:ze({fill:t.color??"#fff"}),d:"M512 128 128 447.936V896h255.936V640H640v256h255.936V447.936z"},null,4)],4))}}),qE={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},HE=de({__name:"IconMenu",props:{color:{}},setup(e){return(t,n)=>(Kt(),ge("svg",qE,[X("path",{style:ze({stroke:t.color??"#fff"}),id:"Vector",d:"M11 17H19M5 12H19M11 7H19","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,4)]))}}),Gl=e=>(Ml("data-v-ade3f470"),e=e(),Ll(),e),KE={class:"bar"},zE=Gl(()=>X("span",{id:"bingo"},"BINGO",-1)),GE={class:"mobile-menu-container"},WE={class:"menu-container"},QE={target:"_blank",rel:"noopener noreferrer",href:"https://github.com/BelgianNoise",class:"github"},YE={class:"mobile-menu-slide-in"},XE=Gl(()=>X("hr",null,null,-1)),JE=Gl(()=>X("hr",null,null,-1)),ZE=de({__name:"HeaderComponent",setup(e){BE().afterEach((r,s)=>{r.fullPath!==s.fullPath&&(n.value=!1)});let n=js(!1);return(r,s)=>{const i=Fl("RouterLink");return Kt(),ge("header",{class:eo({mobileSlideOutVisible:ue(n)})},[X("div",KE,[zE,X("div",GE,[et(i,{to:"/"},{default:Ee(()=>[et(jE,{color:"var(--color-foreground)",class:"icon"})]),_:1}),X("button",{onClick:s[0]||(s[0]=o=>ee(n)?n.value=!ue(n):n=!ue(n))},[et(HE,{color:"var(--color-foreground)",class:"icon"})])]),X("div",WE,[et(i,{to:"/"},{default:Ee(()=>[Me(" Home ")]),_:1}),et(i,{to:"/pricing"},{default:Ee(()=>[Me(" Pricing ")]),_:1}),et(i,{to:"/create"},{default:Ee(()=>[Me(" Create New ")]),_:1}),X("a",QE,[et(Sd,{class:"icon",color:"var(--color-foreground)"})])])]),et(mo,{name:"slide"},{default:Ee(()=>[u_(X("div",YE,[et(i,{to:"/"},{default:Ee(()=>[Me(" Home ")]),_:1}),XE,et(i,{to:"/pricing"},{default:Ee(()=>[Me(" Pricing ")]),_:1}),JE,et(i,{to:"/create"},{default:Ee(()=>[Me(" Create New ")]),_:1})],512),[[dy,ue(n)]])]),_:1})],2)}}}),qs=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},tv=qs(ZE,[["__scopeId","data-v-ade3f470"]]),ev="/linkedin.png",nv={viewBox:"0 -28.5 256 256",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid",fill:"transparent"},rv=de({__name:"IconDiscord",props:{color:{}},setup(e){return(t,n)=>(Kt(),ge("svg",nv,[X("g",null,[X("path",{style:ze({fill:t.color??"#5865F2"}),d:"M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z","fill-rule":"nonzero"},null,4)])]))}}),yo=e=>(Ml("data-v-4de5ad3e"),e=e(),Ll(),e),sv=yo(()=>X("hr",null,null,-1)),iv=yo(()=>X("p",{class:"disclaimer"}," Since you do not require an account to use this app, all data is public in some way or another. Please do not keep any sensitive data in your games, and do not try to circumvent the makeshift security and ruin the fun for others. ",-1)),ov=yo(()=>X("p",null,[Me(" made by "),X("span",{class:"name"},"Arthur Joppart"),Me(" using "),X("a",{class:"vue-green",href:"https://vuejs.org/",target:"_blank",rel:"noreferrer"},"Vue.js")],-1)),av={class:"socials"},lv={href:"https://github.com/BelgianNoise",target:"_blank",rel:"noreferrer"},cv=yo(()=>X("a",{href:"https://www.linkedin.com/in/arthur-joppart-728a7817a/",target:"_blank",rel:"noreferrer"},[X("img",{src:ev,alt:"linkedin"})],-1)),uv={href:"https://discordapp.com/users/125339040613531648",target:"_blank",rel:"noreferrer"},hv=de({__name:"FooterComponent",setup(e){return(t,n)=>(Kt(),ge("footer",null,[sv,iv,ov,X("div",av,[X("a",lv,[et(Sd)]),cv,X("a",uv,[et(rv,{color:"var(--color-foreground-light)"})])])]))}}),fv=qs(hv,[["__scopeId","data-v-4de5ad3e"]]),dv=de({__name:"App",setup(e){return(t,n)=>(Kt(),ge(le,null,[et(tv),X("main",null,[et(mo,{name:"fade",duration:{enter:100,leave:100}},{default:Ee(()=>[et(ue(Pd))]),_:1})]),et(fv)],64))}}),pv=qs(dv,[["__scopeId","data-v-e7b6c176"]]),mv="modulepreload",gv=function(e){return"/"+e},rh={},lr=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(o=>{if(o=gv(o),o in rh)return;rh[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":mv,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var sh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},_v=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Vd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):_v(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new yv;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class yv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ev=function(e){const t=bd(e);return Vd.encodeByteArray(t,!0)},Oi=function(e){return Ev(e).replace(/\./g,"")},vv=function(e){try{return Vd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=()=>Tv().__FIREBASE_DEFAULTS__,Iv=()=>{if(typeof process>"u"||typeof sh>"u")return;const e=sh.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Av=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&vv(e[1]);return t&&JSON.parse(t)},Dd=()=>{try{return wv()||Iv()||Av()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Rv=e=>{var t,n;return(n=(t=Dd())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Cv=e=>{const t=Rv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},xd=()=>{var e;return(e=Dd())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Oi(JSON.stringify(n)),Oi(JSON.stringify(o)),""].join(".")}function bv(){try{return typeof indexedDB=="object"}catch{return!1}}function Vv(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="FirebaseError";class Fr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Dv,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nd.prototype.create)}}class Nd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?xv(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Fr(s,a,r)}}function xv(e,t){return e.replace(Nv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Nv=/\{\$([^}]+)}/g;function qa(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(ih(i)&&ih(o)){if(!qa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ih(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(e){return e&&e._delegate?e._delegate:e}class Is{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Pv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Mv(t))try{this.getOrInitializeService({instanceIdentifier:Ln})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Ln){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ln){return this.instances.has(t)}getOptions(t=Ln){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ov(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ln){return this.component?this.component.multipleInstances?t:Ln:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ov(e){return e===Ln?void 0:e}function Mv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new kv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const Fv={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},Bv=ot.INFO,Uv={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},$v=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Uv[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class kd{constructor(t){this.name=t,this._logLevel=Bv,this._logHandler=$v,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Fv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const jv=(e,t)=>t.some(n=>e instanceof n);let oh,ah;function qv(){return oh||(oh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hv(){return ah||(ah=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Od=new WeakMap,Ha=new WeakMap,Md=new WeakMap,ca=new WeakMap,Wl=new WeakMap;function Kv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(Tn(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Od.set(n,e)}).catch(()=>{}),Wl.set(t,e),t}function zv(e){if(Ha.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Ha.set(e,t)}let Ka={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ha.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Md.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Gv(e){Ka=e(Ka)}function Wv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ua(this),t,...n);return Md.set(r,t.sort?t.sort():[t]),Tn(r)}:Hv().includes(e)?function(...t){return e.apply(ua(this),t),Tn(Od.get(this))}:function(...t){return Tn(e.apply(ua(this),t))}}function Qv(e){return typeof e=="function"?Wv(e):(e instanceof IDBTransaction&&zv(e),jv(e,qv())?new Proxy(e,Ka):e)}function Tn(e){if(e instanceof IDBRequest)return Kv(e);if(ca.has(e))return ca.get(e);const t=Qv(e);return t!==e&&(ca.set(e,t),Wl.set(t,e)),t}const ua=e=>Wl.get(e);function Yv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=Tn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Tn(o.result),l.oldVersion,l.newVersion,Tn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Xv=["get","getKey","getAll","getAllKeys","count"],Jv=["put","add","delete","clear"],ha=new Map;function lh(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ha.get(t))return ha.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Jv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Xv.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return ha.set(t,i),i}Gv(e=>({...e,get:(t,n,r)=>lh(t,n)||e.get(t,n,r),has:(t,n)=>!!lh(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tT(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const za="@firebase/app",ch="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new kd("@firebase/app"),eT="@firebase/app-compat",nT="@firebase/analytics-compat",rT="@firebase/analytics",sT="@firebase/app-check-compat",iT="@firebase/app-check",oT="@firebase/auth",aT="@firebase/auth-compat",lT="@firebase/database",cT="@firebase/database-compat",uT="@firebase/functions",hT="@firebase/functions-compat",fT="@firebase/installations",dT="@firebase/installations-compat",pT="@firebase/messaging",mT="@firebase/messaging-compat",gT="@firebase/performance",_T="@firebase/performance-compat",yT="@firebase/remote-config",ET="@firebase/remote-config-compat",vT="@firebase/storage",TT="@firebase/storage-compat",wT="@firebase/firestore",IT="@firebase/firestore-compat",AT="firebase",RT="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga="[DEFAULT]",CT={[za]:"fire-core",[eT]:"fire-core-compat",[rT]:"fire-analytics",[nT]:"fire-analytics-compat",[iT]:"fire-app-check",[sT]:"fire-app-check-compat",[oT]:"fire-auth",[aT]:"fire-auth-compat",[lT]:"fire-rtdb",[cT]:"fire-rtdb-compat",[uT]:"fire-fn",[hT]:"fire-fn-compat",[fT]:"fire-iid",[dT]:"fire-iid-compat",[pT]:"fire-fcm",[mT]:"fire-fcm-compat",[gT]:"fire-perf",[_T]:"fire-perf-compat",[yT]:"fire-rc",[ET]:"fire-rc-compat",[vT]:"fire-gcs",[TT]:"fire-gcs-compat",[wT]:"fire-fst",[IT]:"fire-fst-compat","fire-js":"fire-js",[AT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Map,Wa=new Map;function PT(e,t){try{e.container.addComponent(t)}catch(n){Wn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Li(e){const t=e.name;if(Wa.has(t))return Wn.debug(`There were multiple attempts to register component ${t}.`),!1;Wa.set(t,e);for(const n of Mi.values())PT(n,e);return!0}function ST(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},wn=new Nd("app","Firebase",bT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=RT;function Ld(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Ga,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw wn.create("bad-app-name",{appName:String(s)});if(n||(n=xd()),!n)throw wn.create("no-options");const i=Mi.get(s);if(i){if(qa(n,i.options)&&qa(r,i.config))return i;throw wn.create("duplicate-app",{appName:s})}const o=new Lv(s);for(const l of Wa.values())o.addComponent(l);const a=new VT(n,r,o);return Mi.set(s,a),a}function xT(e=Ga){const t=Mi.get(e);if(!t&&e===Ga&&xd())return Ld();if(!t)throw wn.create("no-app",{appName:e});return t}function vr(e,t,n){var r;let s=(r=CT[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Wn.warn(a.join(" "));return}Li(new Is(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firebase-heartbeat-database",kT=1,As="firebase-heartbeat-store";let fa=null;function Fd(){return fa||(fa=Yv(NT,kT,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(As)}}}).catch(e=>{throw wn.create("idb-open",{originalErrorMessage:e.message})})),fa}async function OT(e){try{return await(await Fd()).transaction(As).objectStore(As).get(Bd(e))}catch(t){if(t instanceof Fr)Wn.warn(t.message);else{const n=wn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Wn.warn(n.message)}}}async function uh(e,t){try{const r=(await Fd()).transaction(As,"readwrite");await r.objectStore(As).put(t,Bd(e)),await r.done}catch(n){if(n instanceof Fr)Wn.warn(n.message);else{const r=wn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wn.warn(r.message)}}}function Bd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=1024,LT=30*24*60*60*1e3;class FT{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=hh();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=LT}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hh(),{heartbeatsToSend:r,unsentEntries:s}=BT(this._heartbeatsCache.heartbeats),i=Oi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function hh(){return new Date().toISOString().substring(0,10)}function BT(e,t=MT){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),fh(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),fh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bv()?Vv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return uh(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return uh(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function fh(e){return Oi(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(e){Li(new Is("platform-logger",t=>new Zv(t),"PRIVATE")),Li(new Is("heartbeat",t=>new FT(t),"PRIVATE")),vr(za,ch,e),vr(za,ch,"esm2017"),vr("fire-js","")}$T("");var jT="firebase",qT="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(jT,qT,"app");var HT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D,Ql=Ql||{},W=HT||self;function Eo(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Hs(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function KT(e){return Object.prototype.hasOwnProperty.call(e,da)&&e[da]||(e[da]=++zT)}var da="closure_uid_"+(1e9*Math.random()>>>0),zT=0;function GT(e,t,n){return e.call.apply(e.bind,arguments)}function WT(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Zt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Zt=GT:Zt=WT,Zt.apply(null,arguments)}function fi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ut(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function Dn(){this.s=this.s,this.o=this.o}var QT=0;Dn.prototype.s=!1;Dn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),QT!=0)&&KT(this)};Dn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ud=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Yl(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function dh(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Eo(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function te(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var YT=function(){if(!W.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};W.addEventListener("test",n,t),W.removeEventListener("test",n,t)}catch{}return e}();function Rs(e){return/^[\s\xa0]*$/.test(e)}function vo(){var e=W.navigator;return e&&(e=e.userAgent)?e:""}function Be(e){return vo().indexOf(e)!=-1}function Xl(e){return Xl[" "](e),e}Xl[" "]=function(){};function XT(e,t){var n=qw;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var JT=Be("Opera"),br=Be("Trident")||Be("MSIE"),$d=Be("Edge"),Qa=$d||br,jd=Be("Gecko")&&!(vo().toLowerCase().indexOf("webkit")!=-1&&!Be("Edge"))&&!(Be("Trident")||Be("MSIE"))&&!Be("Edge"),ZT=vo().toLowerCase().indexOf("webkit")!=-1&&!Be("Edge");function qd(){var e=W.document;return e?e.documentMode:void 0}var Ya;t:{var pa="",ma=function(){var e=vo();if(jd)return/rv:([^\);]+)(\)|;)/.exec(e);if($d)return/Edge\/([\d\.]+)/.exec(e);if(br)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(ZT)return/WebKit\/(\S+)/.exec(e);if(JT)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(ma&&(pa=ma?ma[1]:""),br){var ga=qd();if(ga!=null&&ga>parseFloat(pa)){Ya=String(ga);break t}}Ya=pa}var Xa;if(W.document&&br){var ph=qd();Xa=ph||parseInt(Ya,10)||void 0}else Xa=void 0;var tw=Xa;function Cs(e,t){if(te.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(jd){t:{try{Xl(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:ew[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Cs.$.h.call(this)}}Ut(Cs,te);var ew={2:"touch",3:"pen",4:"mouse"};Cs.prototype.h=function(){Cs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ks="closure_listenable_"+(1e6*Math.random()|0),nw=0;function rw(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++nw,this.fa=this.ia=!1}function To(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Jl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function sw(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Hd(e){const t={};for(const n in e)t[n]=e[n];return t}const mh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kd(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<mh.length;i++)n=mh[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function wo(e){this.src=e,this.g={},this.h=0}wo.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Za(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new rw(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function Ja(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=Ud(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(To(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Za(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Zl="closure_lm_"+(1e6*Math.random()|0),_a={};function zd(e,t,n,r,s){if(r&&r.once)return Wd(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)zd(e,t[i],n,r,s);return null}return n=nc(n),e&&e[Ks]?e.O(t,n,Hs(r)?!!r.capture:!!r,s):Gd(e,t,n,!1,r,s)}function Gd(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Hs(s)?!!s.capture:!!s,a=ec(e);if(a||(e[Zl]=a=new wo(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=iw(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)YT||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Yd(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function iw(){function e(n){return t.call(e.src,e.listener,n)}const t=ow;return e}function Wd(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Wd(e,t[i],n,r,s);return null}return n=nc(n),e&&e[Ks]?e.P(t,n,Hs(r)?!!r.capture:!!r,s):Gd(e,t,n,!0,r,s)}function Qd(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Qd(e,t[i],n,r,s);else r=Hs(r)?!!r.capture:!!r,n=nc(n),e&&e[Ks]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Za(i,n,r,s),-1<n&&(To(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=ec(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Za(t,n,r,s)),(n=-1<e?t[e]:null)&&tc(n))}function tc(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Ks])Ja(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Yd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ec(t))?(Ja(n,e),n.h==0&&(n.src=null,t[Zl]=null)):To(e)}}}function Yd(e){return e in _a?_a[e]:_a[e]="on"+e}function ow(e,t){if(e.fa)e=!0;else{t=new Cs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&tc(e),e=n.call(r,t)}return e}function ec(e){return e=e[Zl],e instanceof wo?e:null}var ya="__closure_events_fn_"+(1e9*Math.random()>>>0);function nc(e){return typeof e=="function"?e:(e[ya]||(e[ya]=function(t){return e.handleEvent(t)}),e[ya])}function Bt(){Dn.call(this),this.i=new wo(this),this.S=this,this.J=null}Ut(Bt,Dn);Bt.prototype[Ks]=!0;Bt.prototype.removeEventListener=function(e,t,n,r){Qd(this,e,t,n,r)};function zt(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new te(t,e);else if(t instanceof te)t.target=t.target||e;else{var s=t;t=new te(r,e),Kd(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=di(o,r,!0,t)&&s}if(o=t.g=e,s=di(o,r,!0,t)&&s,s=di(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=di(o,r,!1,t)&&s}Bt.prototype.N=function(){if(Bt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)To(n[r]);delete e.g[t],e.h--}}this.J=null};Bt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Bt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function di(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Ja(e.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var rc=W.JSON.stringify;class aw{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function lw(){var e=sc;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class cw{constructor(){this.h=this.g=null}add(t,n){const r=Xd.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Xd=new aw(()=>new uw,e=>e.reset());class uw{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function hw(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function fw(e){W.setTimeout(()=>{throw e},0)}let Ps,Ss=!1,sc=new cw,Jd=()=>{const e=W.Promise.resolve(void 0);Ps=()=>{e.then(dw)}};var dw=()=>{for(var e;e=lw();){try{e.h.call(e.g)}catch(n){fw(n)}var t=Xd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ss=!1};function Io(e,t){Bt.call(this),this.h=e||1,this.g=t||W,this.j=Zt(this.qb,this),this.l=Date.now()}Ut(Io,Bt);D=Io.prototype;D.ga=!1;D.T=null;D.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zt(this,"tick"),this.ga&&(ic(this),this.start()))}};D.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ic(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}D.N=function(){Io.$.N.call(this),ic(this),delete this.g};function oc(e,t,n){if(typeof e=="function")n&&(e=Zt(e,n));else if(e&&typeof e.handleEvent=="function")e=Zt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:W.setTimeout(e,t||0)}function Zd(e){e.g=oc(()=>{e.g=null,e.i&&(e.i=!1,Zd(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class pw extends Dn{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Zd(this)}N(){super.N(),this.g&&(W.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(e){Dn.call(this),this.h=e,this.g={}}Ut(bs,Dn);var gh=[];function tp(e,t,n,r){Array.isArray(n)||(n&&(gh[0]=n.toString()),n=gh);for(var s=0;s<n.length;s++){var i=zd(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function ep(e){Jl(e.g,function(t,n){this.g.hasOwnProperty(n)&&tc(t)},e),e.g={}}bs.prototype.N=function(){bs.$.N.call(this),ep(this)};bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ao(){this.g=!0}Ao.prototype.Ea=function(){this.g=!1};function mw(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function gw(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function mr(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+yw(e,n)+(r?" "+r:"")})}function _w(e,t){e.info(function(){return"TIMEOUT: "+t})}Ao.prototype.info=function(){};function yw(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return rc(n)}catch{return t}}var nr={},_h=null;function Ro(){return _h=_h||new Bt}nr.Ta="serverreachability";function np(e){te.call(this,nr.Ta,e)}Ut(np,te);function Vs(e){const t=Ro();zt(t,new np(t))}nr.STAT_EVENT="statevent";function rp(e,t){te.call(this,nr.STAT_EVENT,e),this.stat=t}Ut(rp,te);function ie(e){const t=Ro();zt(t,new rp(t,e))}nr.Ua="timingevent";function sp(e,t){te.call(this,nr.Ua,e),this.size=t}Ut(sp,te);function zs(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return W.setTimeout(function(){e()},t)}var Co={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ip={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ac(){}ac.prototype.h=null;function yh(e){return e.h||(e.h=e.i())}function op(){}var Gs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lc(){te.call(this,"d")}Ut(lc,te);function cc(){te.call(this,"c")}Ut(cc,te);var tl;function Po(){}Ut(Po,ac);Po.prototype.g=function(){return new XMLHttpRequest};Po.prototype.i=function(){return{}};tl=new Po;function Ws(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new bs(this),this.P=Ew,e=Qa?125:void 0,this.V=new Io(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ap}function ap(){this.i=null,this.g="",this.h=!1}var Ew=45e3,lp={},el={};D=Ws.prototype;D.setTimeout=function(e){this.P=e};function nl(e,t,n){e.L=1,e.A=bo(nn(t)),e.u=n,e.S=!0,cp(e,null)}function cp(e,t){e.G=Date.now(),Qs(e),e.B=nn(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),_p(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ap,e.g=Fp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new pw(Zt(e.Pa,e,e.g),e.O)),tp(e.U,e.g,"readystatechange",e.nb),t=e.I?Hd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Vs(),mw(e.j,e.v,e.B,e.m,e.W,e.u)}D.nb=function(e){e=e.target;const t=this.M;t&&Ue(e)==3?t.l():this.Pa(e)};D.Pa=function(e){try{if(e==this.g)t:{const u=Ue(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Qa||this.g&&(this.h.h||this.g.ja()||wh(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?Vs(3):Vs(2)),So(this);var n=this.g.da();this.ca=n;e:if(up(this)){var r=wh(this.g);e="";var s=r.length,i=Ue(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Un(this),hs(this);var o="";break e}this.h.i=new W.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,gw(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rs(a)){var c=a;break e}}c=null}if(n=c)mr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rl(this,n);else{this.i=!1,this.s=3,ie(12),Un(this),hs(this);break t}}this.S?(hp(this,u,o),Qa&&this.i&&u==3&&(tp(this.U,this.V,"tick",this.mb),this.V.start())):(mr(this.j,this.m,o,null),rl(this,o)),u==4&&Un(this),this.i&&!this.J&&(u==4?kp(this.l,this):(this.i=!1,Qs(this)))}else Uw(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),Un(this),hs(this)}}}catch{}finally{}};function up(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function hp(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=vw(e,n),s==el){t==4&&(e.s=4,ie(14),r=!1),mr(e.j,e.m,null,"[Incomplete Response]");break}else if(s==lp){e.s=4,ie(15),mr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else mr(e.j,e.m,s,null),rl(e,s);up(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,ie(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),mc(t),t.M=!0,ie(11))):(mr(e.j,e.m,n,"[Invalid Chunked Response]"),Un(e),hs(e))}D.mb=function(){if(this.g){var e=Ue(this.g),t=this.g.ja();this.o<t.length&&(So(this),hp(this,e,t),this.i&&e!=4&&Qs(this))}};function vw(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?el:(n=Number(t.substring(n,r)),isNaN(n)?lp:(r+=1,r+n>t.length?el:(t=t.slice(r,r+n),e.o=r+n,t)))}D.cancel=function(){this.J=!0,Un(this)};function Qs(e){e.Y=Date.now()+e.P,fp(e,e.P)}function fp(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=zs(Zt(e.lb,e),t)}function So(e){e.C&&(W.clearTimeout(e.C),e.C=null)}D.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(_w(this.j,this.B),this.L!=2&&(Vs(),ie(17)),Un(this),this.s=2,hs(this)):fp(this,this.Y-e)};function hs(e){e.l.H==0||e.J||kp(e.l,e)}function Un(e){So(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,ic(e.V),ep(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function rl(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||sl(n.i,e))){if(!e.K&&sl(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Ui(n),No(n);else break t;pc(n),ie(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=zs(Zt(n.ib,n),6e3));if(1>=vp(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else $n(n,11)}else if((e.K||n.g==e)&&Ui(n),!Rs(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=e.g;if(m){const E=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var i=r.i;i.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(uc(i,i.h),i.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,wt(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Lp(r,r.J?r.pa:null,r.Y),o.K){Tp(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(So(a),Qs(a)),r.g=o}else xp(r);0<n.j.length&&ko(n)}else c[0]!="stop"&&c[0]!="close"||$n(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?$n(n,7):dc(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Vs(4)}catch{}}function Tw(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Eo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function ww(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Eo(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function dp(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Eo(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=ww(e),r=Tw(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var pp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Iw(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function zn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof zn){this.h=e.h,Fi(this,e.j),this.s=e.s,this.g=e.g,Bi(this,e.m),this.l=e.l;var t=e.i,n=new Ds;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Eh(this,n),this.o=e.o}else e&&(t=String(e).match(pp))?(this.h=!1,Fi(this,t[1]||"",!0),this.s=ts(t[2]||""),this.g=ts(t[3]||"",!0),Bi(this,t[4]),this.l=ts(t[5]||"",!0),Eh(this,t[6]||"",!0),this.o=ts(t[7]||"")):(this.h=!1,this.i=new Ds(null,this.h))}zn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(es(t,vh,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(es(t,vh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(es(n,n.charAt(0)=="/"?Cw:Rw,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",es(n,Sw)),e.join("")};function nn(e){return new zn(e)}function Fi(e,t,n){e.j=n?ts(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Bi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Eh(e,t,n){t instanceof Ds?(e.i=t,bw(e.i,e.h)):(n||(t=es(t,Pw)),e.i=new Ds(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function bo(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ts(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function es(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,Aw),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Aw(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var vh=/[#\/\?@]/g,Rw=/[#\?:]/g,Cw=/[#\?]/g,Pw=/[#\?@]/g,Sw=/#/g;function Ds(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xn(e){e.g||(e.g=new Map,e.h=0,e.i&&Iw(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}D=Ds.prototype;D.add=function(e,t){xn(this),this.i=null,e=Br(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function mp(e,t){xn(e),t=Br(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function gp(e,t){return xn(e),t=Br(e,t),e.g.has(t)}D.forEach=function(e,t){xn(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};D.ta=function(){xn(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};D.Z=function(e){xn(this);let t=[];if(typeof e=="string")gp(this,e)&&(t=t.concat(this.g.get(Br(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};D.set=function(e,t){return xn(this),this.i=null,e=Br(this,e),gp(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};D.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function _p(e,t,n){mp(e,t),0<n.length&&(e.i=null,e.g.set(Br(e,t),Yl(n)),e.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function Br(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function bw(e,t){t&&!e.j&&(xn(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(mp(this,r),_p(this,s,n))},e)),e.j=t}var Vw=class{constructor(e,t){this.g=e,this.map=t}};function yp(e){this.l=e||Dw,W.PerformanceNavigationTiming?(e=W.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(W.g&&W.g.Ka&&W.g.Ka()&&W.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Dw=10;function Ep(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function vp(e){return e.h?1:e.g?e.g.size:0}function sl(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function uc(e,t){e.g?e.g.add(t):e.h=t}function Tp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}yp.prototype.cancel=function(){if(this.i=wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function wp(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Yl(e.i)}var xw=class{stringify(e){return W.JSON.stringify(e,void 0)}parse(e){return W.JSON.parse(e,void 0)}};function Nw(){this.g=new xw}function kw(e,t,n){const r=n||"";try{dp(e,function(s,i){let o=s;Hs(s)&&(o=rc(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ow(e,t){const n=new Ao;if(W.Image){const r=new Image;r.onload=fi(pi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=fi(pi,n,r,"TestLoadImage: error",!1,t),r.onabort=fi(pi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=fi(pi,n,r,"TestLoadImage: timeout",!1,t),W.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function pi(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function Vo(e){this.l=e.ec||null,this.j=e.ob||!1}Ut(Vo,ac);Vo.prototype.g=function(){return new Do(this.l,this.j)};Vo.prototype.i=function(e){return function(){return e}}({});function Do(e,t){Bt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=hc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ut(Do,Bt);var hc=0;D=Do.prototype;D.open=function(e,t){if(this.readyState!=hc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,xs(this)};D.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||W).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ys(this)),this.readyState=hc};D.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof W.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ip(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function Ip(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}D.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ys(this):xs(this),this.readyState==3&&Ip(this)}};D.Za=function(e){this.g&&(this.response=this.responseText=e,Ys(this))};D.Ya=function(e){this.g&&(this.response=e,Ys(this))};D.ka=function(){this.g&&Ys(this)};function Ys(e){e.readyState=4,e.l=null,e.j=null,e.A=null,xs(e)}D.setRequestHeader=function(e,t){this.v.append(e,t)};D.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function xs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Do.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var Mw=W.JSON.parse;function Pt(e){Bt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ap,this.L=this.M=!1}Ut(Pt,Bt);var Ap="",Lw=/^https?$/i,Fw=["POST","PUT"];D=Pt.prototype;D.Oa=function(e){this.M=e};D.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tl.g(),this.C=this.u?yh(this.u):yh(tl),this.g.onreadystatechange=Zt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){Th(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=W.FormData&&e instanceof W.FormData,!(0<=Ud(Fw,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Pp(this),0<this.B&&((this.L=Bw(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zt(this.ua,this)):this.A=oc(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Th(this,i)}};function Bw(e){return br&&typeof e.timeout=="number"&&e.ontimeout!==void 0}D.ua=function(){typeof Ql<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zt(this,"timeout"),this.abort(8))};function Th(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Rp(e),xo(e)}function Rp(e){e.F||(e.F=!0,zt(e,"complete"),zt(e,"error"))}D.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,zt(this,"complete"),zt(this,"abort"),xo(this))};D.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xo(this,!0)),Pt.$.N.call(this)};D.La=function(){this.s||(this.G||this.v||this.l?Cp(this):this.kb())};D.kb=function(){Cp(this)};function Cp(e){if(e.h&&typeof Ql<"u"&&(!e.C[1]||Ue(e)!=4||e.da()!=2)){if(e.v&&Ue(e)==4)oc(e.La,0,e);else if(zt(e,"readystatechange"),Ue(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(pp)[1]||null;!s&&W.self&&W.self.location&&(s=W.self.location.protocol.slice(0,-1)),r=!Lw.test(s?s.toLowerCase():"")}n=r}if(n)zt(e,"complete"),zt(e,"success");else{e.m=6;try{var i=2<Ue(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",Rp(e)}}finally{xo(e)}}}}function xo(e,t){if(e.g){Pp(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||zt(e,"ready");try{n.onreadystatechange=r}catch{}}}function Pp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(W.clearTimeout(e.A),e.A=null)}D.isActive=function(){return!!this.g};function Ue(e){return e.g?e.g.readyState:0}D.da=function(){try{return 2<Ue(this)?this.g.status:-1}catch{return-1}};D.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Mw(t)}};function wh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ap:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Uw(e){const t={};e=(e.g&&2<=Ue(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Rs(e[r]))continue;var n=hw(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}sw(t,function(r){return r.join(", ")})}D.Ia=function(){return this.m};D.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Sp(e){let t="";return Jl(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function fc(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Sp(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):wt(e,t,n))}function Yr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function bp(e){this.Ga=0,this.j=[],this.l=new Ao,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yr("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yr("baseRetryDelayMs",5e3,e),this.hb=Yr("retryDelaySeedMs",1e4,e),this.eb=Yr("forwardChannelMaxRetries",2,e),this.xa=Yr("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new yp(e&&e.concurrentRequestLimit),this.Ja=new Nw,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}D=bp.prototype;D.ra=8;D.H=1;function dc(e){if(Vp(e),e.H==3){var t=e.W++,n=nn(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),Xs(e,n),t=new Ws(e,e.l,t),t.L=2,t.A=bo(nn(n)),n=!1,W.navigator&&W.navigator.sendBeacon)try{n=W.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&W.Image&&(new Image().src=t.A,n=!0),n||(t.g=Fp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Qs(t)}Mp(e)}function No(e){e.g&&(mc(e),e.g.cancel(),e.g=null)}function Vp(e){No(e),e.u&&(W.clearTimeout(e.u),e.u=null),Ui(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&W.clearTimeout(e.m),e.m=null)}function ko(e){if(!Ep(e.i)&&!e.m){e.m=!0;var t=e.Na;Ps||Jd(),Ss||(Ps(),Ss=!0),sc.add(t,e),e.C=0}}function $w(e,t){return vp(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=zs(Zt(e.Na,e,t),Op(e,e.C)),e.C++,!0)}D.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Ws(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Hd(i),Kd(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Dp(this,s,t),n=nn(this.I),wt(n,"RID",e),wt(n,"CVER",22),this.F&&wt(n,"X-HTTP-Session-Id",this.F),Xs(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Sp(i)))+"&"+t:this.o&&fc(n,this.o,i)),uc(this.i,s),this.bb&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),s.aa=!0,nl(s,n,null)):nl(s,n,t),this.H=2}}else this.H==3&&(e?Ih(this,e):this.j.length==0||Ep(this.i)||Ih(this))};function Ih(e,t){var n;t?n=t.m:n=e.W++;const r=nn(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.V),Xs(e,r),e.o&&e.s&&fc(r,e.o,e.s),n=new Ws(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Dp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),uc(e.i,n),nl(n,r,t)}function Xs(e,t){e.na&&Jl(e.na,function(n,r){wt(t,r,n)}),e.h&&dp({},function(n,r){wt(t,r,n)})}function Dp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Zt(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{kw(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function xp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ps||Jd(),Ss||(Ps(),Ss=!0),sc.add(t,e),e.A=0}}function pc(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=zs(Zt(e.Ma,e),Op(e,e.A)),e.A++,!0)}D.Ma=function(){if(this.u=null,Np(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=zs(Zt(this.jb,this),e)}};D.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ie(10),No(this),Np(this))};function mc(e){e.B!=null&&(W.clearTimeout(e.B),e.B=null)}function Np(e){e.g=new Ws(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=nn(e.wa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.V),wt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&wt(t,"TO",e.qa),wt(t,"TYPE","xmlhttp"),Xs(e,t),e.o&&e.s&&fc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=bo(nn(t)),n.u=null,n.S=!0,cp(n,e)}D.ib=function(){this.v!=null&&(this.v=null,No(this),pc(this),ie(19))};function Ui(e){e.v!=null&&(W.clearTimeout(e.v),e.v=null)}function kp(e,t){var n=null;if(e.g==t){Ui(e),mc(e),e.g=null;var r=2}else if(sl(e.i,t))n=t.F,Tp(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=Ro(),zt(r,new sp(r,n)),ko(e)}else xp(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&$w(e,t)||r==2&&pc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:$n(e,5);break;case 4:$n(e,10);break;case 3:$n(e,6);break;default:$n(e,2)}}}function Op(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function $n(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Zt(e.pb,e);n||(n=new zn("//www.google.com/images/cleardot.gif"),W.location&&W.location.protocol=="http"||Fi(n,"https"),bo(n)),Ow(n.toString(),r)}else ie(2);e.H=0,e.h&&e.h.za(t),Mp(e),Vp(e)}D.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ie(2)):(this.l.info("Failed to ping google.com"),ie(1))};function Mp(e){if(e.H=0,e.ma=[],e.h){const t=wp(e.i);(t.length!=0||e.j.length!=0)&&(dh(e.ma,t),dh(e.ma,e.j),e.i.i.length=0,Yl(e.j),e.j.length=0),e.h.ya()}}function Lp(e,t,n){var r=n instanceof zn?nn(n):new zn(n);if(r.g!="")t&&(r.g=t+"."+r.g),Bi(r,r.m);else{var s=W.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new zn(null);r&&Fi(i,r),t&&(i.g=t),s&&Bi(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&wt(r,n,t),wt(r,"VER",e.ra),Xs(e,r),r}function Fp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Pt(new Vo({ob:n})):new Pt(e.va),t.Oa(e.J),t}D.isActive=function(){return!!this.h&&this.h.isActive(this)};function Bp(){}D=Bp.prototype;D.Ba=function(){};D.Aa=function(){};D.za=function(){};D.ya=function(){};D.isActive=function(){return!0};D.Va=function(){};function $i(){if(br&&!(10<=Number(tw)))throw Error("Environmental error: no available transport.")}$i.prototype.g=function(e,t){return new _e(e,t)};function _e(e,t){Bt.call(this),this.g=new bp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Rs(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Rs(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Ur(this)}Ut(_e,Bt);_e.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ie(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Lp(e,null,e.Y),ko(e)};_e.prototype.close=function(){dc(this.g)};_e.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=rc(e),e=n);t.j.push(new Vw(t.fb++,e)),t.H==3&&ko(t)};_e.prototype.N=function(){this.g.h=null,delete this.j,dc(this.g),delete this.g,_e.$.N.call(this)};function Up(e){lc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ut(Up,lc);function $p(){cc.call(this),this.status=1}Ut($p,cc);function Ur(e){this.g=e}Ut(Ur,Bp);Ur.prototype.Ba=function(){zt(this.g,"a")};Ur.prototype.Aa=function(e){zt(this.g,new Up(e))};Ur.prototype.za=function(e){zt(this.g,new $p)};Ur.prototype.ya=function(){zt(this.g,"b")};function jw(){this.blockSize=-1}function De(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ut(De,jw);De.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ea(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}De.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)Ea(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){Ea(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){Ea(this,r),s=0;break}}this.h=s,this.i+=t};De.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function mt(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var qw={};function gc(e){return-128<=e&&128>e?XT(e,function(t){return new mt([t|0],0>t?-1:0)}):new mt([e|0],0>e?-1:0)}function $e(e){if(isNaN(e)||!isFinite(e))return Tr;if(0>e)return jt($e(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=il;return new mt(t,0)}function jp(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return jt(jp(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=$e(Math.pow(t,8)),r=Tr,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=$e(Math.pow(t,i)),r=r.R(i).add($e(o))):(r=r.R(n),r=r.add($e(o)))}return r}var il=4294967296,Tr=gc(0),ol=gc(1),Ah=gc(16777216);D=mt.prototype;D.ea=function(){if(ve(this))return-jt(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:il+r)*t,t*=il}return e};D.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Ze(this))return"0";if(ve(this))return"-"+jt(this).toString(e);for(var t=$e(Math.pow(e,6)),n=this,r="";;){var s=qi(n,t).g;n=ji(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Ze(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};D.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Ze(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function ve(e){return e.h==-1}D.X=function(e){return e=ji(this,e),ve(e)?-1:Ze(e)?0:1};function jt(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new mt(n,~e.h).add(ol)}D.abs=function(){return ve(this)?jt(this):this};D.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new mt(n,n[n.length-1]&-2147483648?-1:0)};function ji(e,t){return e.add(jt(t))}D.R=function(e){if(Ze(this)||Ze(e))return Tr;if(ve(this))return ve(e)?jt(this).R(jt(e)):jt(jt(this).R(e));if(ve(e))return jt(this.R(jt(e)));if(0>this.X(Ah)&&0>e.X(Ah))return $e(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,l=e.D(s)&65535;n[2*r+2*s]+=o*l,mi(n,2*r+2*s),n[2*r+2*s+1]+=i*l,mi(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,mi(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,mi(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new mt(n,0)};function mi(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Xr(e,t){this.g=e,this.h=t}function qi(e,t){if(Ze(t))throw Error("division by zero");if(Ze(e))return new Xr(Tr,Tr);if(ve(e))return t=qi(jt(e),t),new Xr(jt(t.g),jt(t.h));if(ve(t))return t=qi(e,jt(t)),new Xr(jt(t.g),t.h);if(30<e.g.length){if(ve(e)||ve(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ol,r=t;0>=r.X(e);)n=Rh(n),r=Rh(r);var s=cr(n,1),i=cr(r,1);for(r=cr(r,2),n=cr(n,2);!Ze(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=cr(r,1),n=cr(n,1)}return t=ji(e,s.R(t)),new Xr(s,t)}for(s=Tr;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=$e(n),o=i.R(t);ve(o)||0<o.X(e);)n-=r,i=$e(n),o=i.R(t);Ze(i)&&(i=ol),s=s.add(i),e=ji(e,o)}return new Xr(s,e)}D.gb=function(e){return qi(this,e).h};D.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new mt(n,this.h&e.h)};D.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new mt(n,this.h|e.h)};D.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new mt(n,this.h^e.h)};function Rh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new mt(n,e.h)}function cr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new mt(s,e.h)}$i.prototype.createWebChannel=$i.prototype.g;_e.prototype.send=_e.prototype.u;_e.prototype.open=_e.prototype.m;_e.prototype.close=_e.prototype.close;Co.NO_ERROR=0;Co.TIMEOUT=8;Co.HTTP_ERROR=6;ip.COMPLETE="complete";op.EventType=Gs;Gs.OPEN="a";Gs.CLOSE="b";Gs.ERROR="c";Gs.MESSAGE="d";Bt.prototype.listen=Bt.prototype.O;Pt.prototype.listenOnce=Pt.prototype.P;Pt.prototype.getLastError=Pt.prototype.Sa;Pt.prototype.getLastErrorCode=Pt.prototype.Ia;Pt.prototype.getStatus=Pt.prototype.da;Pt.prototype.getResponseJson=Pt.prototype.Wa;Pt.prototype.getResponseText=Pt.prototype.ja;Pt.prototype.send=Pt.prototype.ha;Pt.prototype.setWithCredentials=Pt.prototype.Oa;De.prototype.digest=De.prototype.l;De.prototype.reset=De.prototype.reset;De.prototype.update=De.prototype.j;mt.prototype.add=mt.prototype.add;mt.prototype.multiply=mt.prototype.R;mt.prototype.modulo=mt.prototype.gb;mt.prototype.compare=mt.prototype.X;mt.prototype.toNumber=mt.prototype.ea;mt.prototype.toString=mt.prototype.toString;mt.prototype.getBits=mt.prototype.D;mt.fromNumber=$e;mt.fromString=jp;var Hw=function(){return new $i},Kw=function(){return Ro()},va=Co,zw=ip,Gw=nr,Ch={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gi=op,Ww=Pt,Qw=De,wr=mt;const Ph="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $r="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new kd("@firebase/firestore");function Jr(){return Qn.logLevel}function F(e,...t){if(Qn.logLevel<=ot.DEBUG){const n=t.map(_c);Qn.debug(`Firestore (${$r}): ${e}`,...n)}}function rn(e,...t){if(Qn.logLevel<=ot.ERROR){const n=t.map(_c);Qn.error(`Firestore (${$r}): ${e}`,...n)}}function Vr(e,...t){if(Qn.logLevel<=ot.WARN){const n=t.map(_c);Qn.warn(`Firestore (${$r}): ${e}`,...n)}}function _c(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e="Unexpected state"){const t=`FIRESTORE (${$r}) INTERNAL ASSERTION FAILED: `+e;throw rn(t),new Error(t)}function vt(e,t){e||G()}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Fr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Yw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class Xw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Jw{constructor(t){this.t=t,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new In;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new In,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new In)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt(typeof r.accessToken=="string"),new qp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return vt(t===null||typeof t=="string"),new Yt(t)}}class Zw{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class t0{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Zw(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n0{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(vt(typeof n.token=="string"),this.R=n.token,new e0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=r0(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function Dr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return kt.fromMillis(Date.now())}static fromDate(t){return kt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new kt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Y(t)}static min(){return new Y(new kt(0,0))}static max(){return new Y(new kt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,n,r){n===void 0?n=0:n>t.length&&G(),r===void 0?r=t.length-n:r>t.length-n&&G(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Ns.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ns?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class It extends Ns{construct(t,n,r){return new It(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new M(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new It(n)}static emptyPath(){return new It([])}}const s0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Ns{construct(t,n,r){return new qt(t,n,r)}static isValidIdentifier(t){return s0.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new M(v.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new M(v.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.path=t}static fromPath(t){return new H(It.fromString(t))}static fromName(t){return new H(It.fromString(t).popFirst(5))}static empty(){return new H(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&It.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return It.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new H(new It(t.slice()))}}function i0(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new Sn(s,H.empty(),t)}function o0(e){return new Sn(e.readTime,e.key,-1)}class Sn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Sn(Y.min(),H.empty(),-1)}static max(){return new Sn(Y.max(),H.empty(),-1)}}function a0(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=H.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(e){if(e.code!==v.FAILED_PRECONDITION||e.message!==l0)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new R((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):R.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):R.reject(n)}static resolve(t){return new R((n,r)=>{n(t)})}static reject(t){return new R((n,r)=>{r(t)})}static waitFor(t){return new R((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(t){let n=R.resolve(!1);for(const r of t)n=n.next(s=>s?R.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new R((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new R((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function Zs(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}yc._e=-1;function Oo(e){return e==null}function Hi(e){return e===0&&1/e==-1/0}function u0(e){return typeof e=="number"&&Number.isInteger(e)&&!Hi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Kp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t,n){this.comparator=t,this.root=n||$t.EMPTY}insert(t,n){return new Ct(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(t){return new Ct(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$t.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _i(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _i(this.root,t,this.comparator,!1)}getReverseIterator(){return new _i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _i(this.root,t,this.comparator,!0)}}class _i{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $t{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??$t.RED,this.left=s??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new $t(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return $t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const t=this.left.check();if(t!==this.right.check())throw G();return t+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(t,n,r,s,i){return this}insert(t,n,r){return new $t(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.comparator=t,this.data=new Ct(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new bh(this.data.getIterator())}getIteratorFrom(t){return new bh(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Gt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Gt(this.comparator);return n.data=t,n}}class bh{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this.fields=t,t.sort(qt.comparator)}static empty(){return new Pe([])}unionWith(t){let n=new Gt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Pe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Dr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zp("Invalid base64 string: "+i):i}}(t);return new ne(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new ne(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ne.EMPTY_BYTE_STRING=new ne("");const h0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(e){if(vt(!!e),typeof e=="string"){let t=0;const n=h0.exec(e);if(vt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vt(e.seconds),nanos:Vt(e.nanos)}}function Vt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Yn(e){return typeof e=="string"?ne.fromBase64String(e):ne.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vc(e){const t=e.mapValue.fields.__previous_value__;return Ec(t)?vc(t):t}function ks(e){const t=bn(e.mapValue.fields.__local_write_time__.timestampValue);return new kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,n,r,s,i,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Os{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Os("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Os&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ec(e)?4:d0(e)?9007199254740991:10:G()}function Ge(e,t){if(e===t)return!0;const n=Xn(e);if(n!==Xn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ks(e).isEqual(ks(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=bn(s.timestampValue),a=bn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Yn(s.bytesValue).isEqual(Yn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Vt(s.geoPointValue.latitude)===Vt(i.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Vt(s.integerValue)===Vt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Vt(s.doubleValue),a=Vt(i.doubleValue);return o===a?Hi(o)===Hi(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Dr(e.arrayValue.values||[],t.arrayValue.values||[],Ge);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Sh(o)!==Sh(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ge(o[l],a[l])))return!1;return!0}(e,t);default:return G()}}function Ms(e,t){return(e.values||[]).find(n=>Ge(n,t))!==void 0}function xr(e,t){if(e===t)return 0;const n=Xn(e),r=Xn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=Vt(i.integerValue||i.doubleValue),l=Vt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Vh(e.timestampValue,t.timestampValue);case 4:return Vh(ks(e),ks(t));case 5:return ct(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Yn(i),l=Yn(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ct(a[c],l[c]);if(u!==0)return u}return ct(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=ct(Vt(i.latitude),Vt(o.latitude));return a!==0?a:ct(Vt(i.longitude),Vt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=xr(a[c],l[c]);if(u)return u}return ct(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===yi.mapValue&&o===yi.mapValue)return 0;if(i===yi.mapValue)return 1;if(o===yi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=ct(l[h],u[h]);if(f!==0)return f;const m=xr(a[l[h]],c[u[h]]);if(m!==0)return m}return ct(l.length,u.length)}(e.mapValue,t.mapValue);default:throw G()}}function Vh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=bn(e),r=bn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Nr(e){return al(e)}function al(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=bn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Yn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return H.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=al(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${al(n.fields[o])}`;return s+"}"}(e.mapValue):G()}function Dh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ll(e){return!!e&&"integerValue"in e}function Tc(e){return!!e&&"arrayValue"in e}function xh(e){return!!e&&"nullValue"in e}function Nh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ai(e){return!!e&&"mapValue"in e}function fs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jr(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=fs(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fs(e.arrayValue.values[n]);return t}return Object.assign({},e)}function d0(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.value=t}static empty(){return new Te({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ai(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=fs(n)}setAll(t){let n=qt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=fs(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ai(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ge(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ai(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){jr(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Te(fs(this.value))}}function Gp(e){const t=[];return jr(e.fields,(n,r)=>{const s=new qt([n]);if(Ai(r)){const i=Gp(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new Pe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Xt(t,0,Y.min(),Y.min(),Y.min(),Te.empty(),0)}static newFoundDocument(t,n,r,s){return new Xt(t,1,n,Y.min(),r,s,0)}static newNoDocument(t,n){return new Xt(t,2,n,Y.min(),Y.min(),Te.empty(),0)}static newUnknownDocument(t,n){return new Xt(t,3,n,Y.min(),Y.min(),Te.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Te.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Te.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Xt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(t,n){this.position=t,this.inclusive=n}}function kh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=xr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Oh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ge(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n="asc"){this.field=t,this.dir=n}}function p0(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{}class Dt extends Wp{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new g0(t,n,r):n==="array-contains"?new E0(t,r):n==="in"?new v0(t,r):n==="not-in"?new T0(t,r):n==="array-contains-any"?new w0(t,r):new Dt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new _0(t,r):new y0(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xr(n,this.value)):n!==null&&Xn(this.value)===Xn(n)&&this.matchesComparison(xr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xe extends Wp{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new xe(t,n)}matches(t){return Qp(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Qp(e){return e.op==="and"}function Yp(e){return m0(e)&&Qp(e)}function m0(e){for(const t of e.filters)if(t instanceof xe)return!1;return!0}function cl(e){if(e instanceof Dt)return e.field.canonicalString()+e.op.toString()+Nr(e.value);if(Yp(e))return e.filters.map(t=>cl(t)).join(",");{const t=e.filters.map(n=>cl(n)).join(",");return`${e.op}(${t})`}}function Xp(e,t){return e instanceof Dt?function(r,s){return s instanceof Dt&&r.op===s.op&&r.field.isEqual(s.field)&&Ge(r.value,s.value)}(e,t):e instanceof xe?function(r,s){return s instanceof xe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Xp(o,s.filters[a]),!0):!1}(e,t):void G()}function Jp(e){return e instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Nr(n.value)}`}(e):e instanceof xe?function(n){return n.op.toString()+" {"+n.getFilters().map(Jp).join(" ,")+"}"}(e):"Filter"}class g0 extends Dt{constructor(t,n,r){super(t,n,r),this.key=H.fromName(r.referenceValue)}matches(t){const n=H.comparator(t.key,this.key);return this.matchesComparison(n)}}class _0 extends Dt{constructor(t,n){super(t,"in",n),this.keys=Zp("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class y0 extends Dt{constructor(t,n){super(t,"not-in",n),this.keys=Zp("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Zp(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class E0 extends Dt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Tc(n)&&Ms(n.arrayValue,this.value)}}class v0 extends Dt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ms(this.value.arrayValue,n)}}class T0 extends Dt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Ms(this.value.arrayValue,n)}}class w0 extends Dt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Tc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ms(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Mh(e,t=null,n=[],r=[],s=null,i=null,o=null){return new I0(e,t,n,r,s,i,o)}function wc(e){const t=tt(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>cl(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Oo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Nr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Nr(r)).join(",")),t.ce=n}return t.ce}function Ic(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!p0(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Xp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Oh(e.startAt,t.startAt)&&Oh(e.endAt,t.endAt)}function ul(e){return H.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function A0(e,t,n,r,s,i,o,a){return new qr(e,t,n,r,s,i,o,a)}function Ac(e){return new qr(e)}function Lh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function tm(e){return e.collectionGroup!==null}function ds(e){const t=tt(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Gt(qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new Ls(i,r))}),n.has(qt.keyField().canonicalString())||t.le.push(new Ls(qt.keyField(),r))}return t.le}function je(e){const t=tt(e);return t.he||(t.he=R0(t,ds(e))),t.he}function R0(e,t){if(e.limitType==="F")return Mh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ls(s.field,i)});const n=e.endAt?new Ki(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ki(e.startAt.position,e.startAt.inclusive):null;return Mh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function hl(e,t){const n=e.filters.concat([t]);return new qr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zi(e,t,n){return new qr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Mo(e,t){return Ic(je(e),je(t))&&e.limitType===t.limitType}function em(e){return`${wc(je(e))}|lt:${e.limitType}`}function hr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Jp(s)).join(", ")}]`),Oo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Nr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Nr(s)).join(",")),`Target(${r})`}(je(e))}; limitType=${e.limitType})`}function Lo(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):H.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of ds(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=kh(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ds(r),s)||r.endAt&&!function(o,a,l){const c=kh(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ds(r),s))}(e,t)}function C0(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function nm(e){return(t,n)=>{let r=!1;for(const s of ds(e)){const i=P0(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function P0(e,t,n){const r=e.field.isKeyField()?H.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?xr(l,c):G()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){jr(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Kp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Ct(H.comparator);function sn(){return S0}const rm=new Ct(H.comparator);function ns(...e){let t=rm;for(const n of e)t=t.insert(n.key,n);return t}function sm(e){let t=rm;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function jn(){return ps()}function im(){return ps()}function ps(){return new Hr(e=>e.toString(),(e,t)=>e.isEqual(t))}const b0=new Ct(H.comparator),V0=new Gt(H.comparator);function rt(...e){let t=V0;for(const n of e)t=t.add(n);return t}const D0=new Gt(ct);function x0(){return D0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hi(t)?"-0":t}}function am(e){return{integerValue:""+e}}function N0(e,t){return u0(t)?am(t):om(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this._=void 0}}function k0(e,t,n){return e instanceof Gi?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ec(i)&&(i=vc(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof Fs?cm(e,t):e instanceof Bs?um(e,t):function(s,i){const o=lm(s,i),a=Fh(o)+Fh(s.Ie);return ll(o)&&ll(s.Ie)?am(a):om(s.serializer,a)}(e,t)}function O0(e,t,n){return e instanceof Fs?cm(e,t):e instanceof Bs?um(e,t):n}function lm(e,t){return e instanceof Wi?function(r){return ll(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Gi extends Fo{}class Fs extends Fo{constructor(t){super(),this.elements=t}}function cm(e,t){const n=hm(t);for(const r of e.elements)n.some(s=>Ge(s,r))||n.push(r);return{arrayValue:{values:n}}}class Bs extends Fo{constructor(t){super(),this.elements=t}}function um(e,t){let n=hm(t);for(const r of e.elements)n=n.filter(s=>!Ge(s,r));return{arrayValue:{values:n}}}class Wi extends Fo{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function Fh(e){return Vt(e.integerValue||e.doubleValue)}function hm(e){return Tc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function M0(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Fs&&s instanceof Fs||r instanceof Bs&&s instanceof Bs?Dr(r.elements,s.elements,Ge):r instanceof Wi&&s instanceof Wi?Ge(r.Ie,s.Ie):r instanceof Gi&&s instanceof Gi}(e.transform,t.transform)}class L0{constructor(t,n){this.version=t,this.transformResults=n}}class be{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new be}static exists(t){return new be(void 0,t)}static updateTime(t){return new be(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ri(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Bo{}function fm(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Rc(e.key,be.none()):new ti(e.key,e.data,be.none());{const n=e.data,r=Te.empty();let s=new Gt(qt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new rr(e.key,r,new Pe(s.toArray()),be.none())}}function F0(e,t,n){e instanceof ti?function(s,i,o){const a=s.value.clone(),l=Uh(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof rr?function(s,i,o){if(!Ri(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Uh(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(dm(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function ms(e,t,n,r){return e instanceof ti?function(i,o,a,l){if(!Ri(i.precondition,o))return a;const c=i.value.clone(),u=$h(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof rr?function(i,o,a,l){if(!Ri(i.precondition,o))return a;const c=$h(i.fieldTransforms,l,o),u=o.data;return u.setAll(dm(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return Ri(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function B0(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=lm(r.transform,s||null);i!=null&&(n===null&&(n=Te.empty()),n.set(r.field,i))}return n||null}function Bh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Dr(r,s,(i,o)=>M0(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ti extends Bo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rr extends Bo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function dm(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Uh(e,t,n){const r=new Map;vt(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,O0(o,a,n[s]))}return r}function $h(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,k0(i,o,t))}return r}class Rc extends Bo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U0 extends Bo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&F0(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=ms(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=ms(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=im();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=fm(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),rt())}isEqual(t){return this.batchId===t.batchId&&Dr(this.mutations,t.mutations,(n,r)=>Bh(n,r))&&Dr(this.baseMutations,t.baseMutations,(n,r)=>Bh(n,r))}}class Cc{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){vt(t.mutations.length===r.length);let s=function(){return b0}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cc(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,st;function H0(e){switch(e){default:return G();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function pm(e){if(e===void 0)return rn("GRPC error has no .code"),v.UNKNOWN;switch(e){case bt.OK:return v.OK;case bt.CANCELLED:return v.CANCELLED;case bt.UNKNOWN:return v.UNKNOWN;case bt.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case bt.INTERNAL:return v.INTERNAL;case bt.UNAVAILABLE:return v.UNAVAILABLE;case bt.UNAUTHENTICATED:return v.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case bt.NOT_FOUND:return v.NOT_FOUND;case bt.ALREADY_EXISTS:return v.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return v.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case bt.ABORTED:return v.ABORTED;case bt.OUT_OF_RANGE:return v.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return v.UNIMPLEMENTED;case bt.DATA_LOSS:return v.DATA_LOSS;default:return G()}}(st=bt||(bt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new wr([4294967295,4294967295],0);function jh(e){const t=K0().encode(e),n=new Qw;return n.update(t),new Uint8Array(n.digest())}function qh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new wr([n,r],0),new wr([s,i],0)]}class Pc{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rs(`Invalid padding: ${n}`);if(r<0)throw new rs(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new rs(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new rs(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=wr.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(wr.fromNumber(r)));return s.compare(z0)===1&&(s=new wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=jh(t),[r,s]=qh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Pc(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=jh(t),[r,s]=qh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class rs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,ei.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Uo(Y.min(),s,new Ct(ct),sn(),rt())}}class ei{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new ei(r,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class mm{constructor(t,n){this.targetId=t,this.fe=n}}class gm{constructor(t,n,r=ne.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Hh{constructor(){this.ge=0,this.pe=zh(),this.ye=ne.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=rt(),n=rt(),r=rt();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G()}}),new ei(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=zh()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,vt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class G0{constructor(t){this.Le=t,this.ke=new Map,this.qe=sn(),this.Qe=Kh(),this.Ke=new Ct(ct)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:G()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(ul(i))if(r===0){const o=new H(i.path);this.We(n,o,Xt.newNoDocument(o,Y.min()))}else vt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Yn(r).toUint8Array()}catch(l){if(l instanceof zp)return Vr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Pc(o,s,i)}catch(l){return Vr(l instanceof rs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&ul(a.target)){const l=new H(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Xt.newNoDocument(l,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=rt();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new Uo(t,n,this.Ke,this.qe,r);return this.qe=sn(),this.Qe=Kh(),this.Ke=new Ct(ct),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Hh,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new Gt(ct),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Hh),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Kh(){return new Ct(H.comparator)}function zh(){return new Ct(H.comparator)}const W0={asc:"ASCENDING",desc:"DESCENDING"},Q0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y0={and:"AND",or:"OR"};class X0{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function fl(e,t){return e.useProto3Json||Oo(t)?t:{value:t}}function Qi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _m(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function J0(e,t){return Qi(e,t.toTimestamp())}function qe(e){return vt(!!e),Y.fromTimestamp(function(n){const r=bn(n);return new kt(r.seconds,r.nanos)}(e))}function Sc(e,t){return function(r){return new It(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function ym(e){const t=It.fromString(e);return vt(wm(t)),t}function dl(e,t){return Sc(e.databaseId,t.path)}function Ta(e,t){const n=ym(t);if(n.get(1)!==e.databaseId.projectId)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new H(Em(n))}function pl(e,t){return Sc(e.databaseId,t)}function Z0(e){const t=ym(e);return t.length===4?It.emptyPath():Em(t)}function ml(e){return new It(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Em(e){return vt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Gh(e,t,n){return{name:dl(e,t),fields:n.value.mapValue.fields}}function tI(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:G()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(vt(u===void 0||typeof u=="string"),ne.fromBase64String(u||"")):(vt(u===void 0||u instanceof Uint8Array),ne.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?v.UNKNOWN:pm(c.code);return new M(u,c.message||"")}(o);n=new gm(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ta(e,r.document.name),i=qe(r.document.updateTime),o=r.document.createTime?qe(r.document.createTime):Y.min(),a=new Te({mapValue:{fields:r.document.fields}}),l=Xt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ci(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ta(e,r.document),i=r.readTime?qe(r.readTime):Y.min(),o=Xt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ci([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ta(e,r.document),i=r.removedTargetIds||[];n=new Ci([],i,s,null)}else{if(!("filter"in t))return G();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new q0(s,i),a=r.targetId;n=new mm(a,o)}}return n}function eI(e,t){let n;if(t instanceof ti)n={update:Gh(e,t.key,t.value)};else if(t instanceof Rc)n={delete:dl(e,t.key)};else if(t instanceof rr)n={update:Gh(e,t.key,t.data),updateMask:uI(t.fieldMask)};else{if(!(t instanceof U0))return G();n={verify:dl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Bs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wi)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw G()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:J0(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(e,t.precondition)),n}function nI(e,t){return e&&e.length>0?(vt(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?qe(s.updateTime):qe(i);return o.isEqual(Y.min())&&(o=qe(i)),new L0(o,s.transformResults||[])}(n,t))):[]}function rI(e,t){return{documents:[pl(e,t.path)]}}function sI(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=pl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=pl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return Tm(xe.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:fr(h.field),direction:aI(h.dir)}}(c))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=fl(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function iI(e){let t=Z0(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=vm(h);return f instanceof xe&&Yp(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Ls(dr(E.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Oo(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new Ki(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Ki(m,f)}(n.endAt)),A0(t,s,o,i,a,"F",l,c)}function oI(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function vm(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=dr(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=dr(n.unaryFilter.field);return Dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=dr(n.unaryFilter.field);return Dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=dr(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(e):e.fieldFilter!==void 0?function(n){return Dt.create(dr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return xe.create(n.compositeFilter.filters.map(r=>vm(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(e):G()}function aI(e){return W0[e]}function lI(e){return Q0[e]}function cI(e){return Y0[e]}function fr(e){return{fieldPath:e.canonicalString()}}function dr(e){return qt.fromServerFormat(e.fieldPath)}function Tm(e){return e instanceof Dt?function(n){if(n.op==="=="){if(Nh(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NAN"}};if(xh(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nh(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NAN"}};if(xh(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fr(n.field),op:lI(n.op),value:n.value}}}(e):e instanceof xe?function(n){const r=n.getFilters().map(s=>Tm(s));return r.length===1?r[0]:{compositeFilter:{op:cI(n.op),filters:r}}}(e):G()}function uI(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function wm(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t,n,r,s,i=Y.min(),o=Y.min(),a=ne.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new yn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t){this.ut=t}}function fI(e){const t=iI({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?zi(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.on=new pI}addToCollectionParentIndex(t,n){return this.on.add(n),R.resolve()}getCollectionParents(t,n){return R.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return R.resolve()}deleteFieldIndex(t,n){return R.resolve()}deleteAllFieldIndexes(t){return R.resolve()}createTargetIndexes(t,n){return R.resolve()}getDocumentsMatchingTarget(t,n){return R.resolve(null)}getIndexType(t,n){return R.resolve(0)}getFieldIndexes(t,n){return R.resolve([])}getNextCollectionGroupToUpdate(t){return R.resolve(null)}getMinOffset(t,n){return R.resolve(Sn.min())}getMinOffsetFromCollectionGroup(t,n){return R.resolve(Sn.min())}updateCollectionGroup(t,n,r){return R.resolve()}updateIndexEntries(t,n){return R.resolve()}}class pI{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Gt(It.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Gt(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new kr(0)}static Nn(){return new kr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.changes=new Hr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Xt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&ms(r.mutation,s,Pe.empty(),kt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,rt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=rt()){const s=jn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=ns();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=jn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,rt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=sn();const o=ps(),a=function(){return ps()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof rr)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ms(u.mutation,c,u.mutation.getFieldMask(),kt.now())):o.set(c.key,Pe.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new gI(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=ps();let s=new Ct((o,a)=>o-a),i=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Pe.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||rt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=im();u.forEach(f=>{if(!i.has(f)){const m=fm(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):tm(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):R.resolve(jn());let a=-1,l=i;return o.next(c=>R.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?R.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,rt())).next(u=>({batchId:a,changes:sm(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new H(n)).next(r=>{let s=ns();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=ns();return this.indexManager.getCollectionParents(t,i).next(a=>R.forEach(a,l=>{const c=function(h,f){return new qr(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Xt.newInvalidDocument(u)))});let a=ns();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&ms(u.mutation,c,Pe.empty(),kt.now()),Lo(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return R.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(s){return{id:s.id,version:s.version,createTime:qe(s.createTime)}}(n)),R.resolve()}getNamedQuery(t,n){return R.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(s){return{name:s.name,query:fI(s.bundledQuery),readTime:qe(s.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.overlays=new Ct(H.comparator),this.lr=new Map}getOverlay(t,n){return R.resolve(this.overlays.get(n))}getOverlays(t,n){const r=jn();return R.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.lt(t,n,i)}),R.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.lr.delete(r)),R.resolve()}getOverlaysForCollection(t,n,r){const s=jn(),i=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return R.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Ct((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=jn(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=jn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return R.resolve(a)}lt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new j0(n,r));let i=this.lr.get(n);i===void 0&&(i=rt(),this.lr.set(n,i)),this.lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.hr=new Gt(Lt.Pr),this.Ir=new Gt(Lt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new Lt(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new Lt(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new H(new It([])),r=new Lt(n,t),s=new Lt(n,t+1),i=[];return this.Ir.forEachInRange([r,s],o=>{this.dr(o),i.push(o.key)}),i}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new H(new It([])),r=new Lt(n,t),s=new Lt(n,t+1);let i=rt();return this.Ir.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Lt(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Lt{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return H.comparator(t.key,n.key)||ct(t.gr,n.gr)}static Tr(t,n){return ct(t.gr,n.gr)||H.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Gt(Lt.Pr)}checkEmpty(t){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.yr=this.yr.add(new Lt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(t,n){return R.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Sr(r),i=s<0?0:s;return R.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Lt(n,0),s=new Lt(n,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([r,s],o=>{const a=this.wr(o.gr);i.push(a)}),R.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Gt(ct);return n.forEach(s=>{const i=new Lt(s,0),o=new Lt(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([i,o],a=>{r=r.add(a.gr)})}),R.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new Lt(new H(i),0);let a=new Gt(ct);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.gr)),!0)},o),R.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const s=this.wr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){vt(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return R.forEach(n.mutations,s=>{const i=new Lt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new Lt(n,0),s=this.yr.firstAfterOrEqual(r);return R.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,R.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t){this.Cr=t,this.docs=function(){return new Ct(H.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(t,n){let r=sn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Xt.newInvalidDocument(s))}),R.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=sn();const o=n.path,a=new H(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||a0(o0(u),r)<=0||(s.has(u.key)||Lo(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return R.resolve(i)}getAllFromCollectionGroup(t,n,r,s){G()}vr(t,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new wI(this)}getSize(t){return R.resolve(this.size)}}class wI extends mI{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this._r.addEntry(t,s)):this._r.removeEntry(r)}),R.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t){this.persistence=t,this.Fr=new Hr(n=>wc(n),Ic),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Mr=0,this.Or=new bc,this.targetCount=0,this.Nr=kr.On()}forEachTarget(t,n){return this.Fr.forEach((r,s)=>n(s)),R.resolve()}getLastRemoteSnapshotVersion(t){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return R.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),R.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new kr(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,R.resolve()}updateTargetData(t,n){return this.kn(n),R.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),R.waitFor(i).next(()=>s)}getTargetCount(t){return R.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return R.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),R.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),R.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),R.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return R.resolve(r)}containsKey(t,n){return R.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(t,n){this.Br={},this.overlays={},this.Lr=new yc(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new II(this),this.indexManager=new dI,this.remoteDocumentCache=function(s){return new TI(s)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new hI(n),this.Kr=new yI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new EI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new vI(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){F("MemoryPersistence","Starting transaction:",t);const s=new RI(this.Lr.next());return this.referenceDelegate.$r(),r(s).next(i=>this.referenceDelegate.Ur(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Wr(t,n){return R.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class RI extends c0{constructor(t){super(),this.currentSequenceNumber=t}}class Vc{constructor(t){this.persistence=t,this.Gr=new bc,this.zr=null}static jr(t){return new Vc(t)}get Hr(){if(this.zr)return this.zr;throw G()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),R.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),R.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Hr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Hr,r=>{const s=H.fromPath(r);return this.Jr(t,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return R.or([()=>R.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=s}static Qi(t,n){let r=rt(),s=rt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Dc(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.zi(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ji(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new CI;return this.Hi(t,n,o).next(a=>{if(i.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>i.result)}Ji(t,n,r,s){return r.documentReadCount<this.Ui?(Jr()<=ot.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",hr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),R.resolve()):(Jr()<=ot.DEBUG&&F("QueryEngine","Query:",hr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(Jr()<=ot.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",hr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,je(n))):R.resolve())}zi(t,n){if(Lh(n))return R.resolve(null);let r=je(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=zi(n,null,"F"),r=je(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=rt(...i);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.Yi(n,a);return this.Zi(n,c,o,l.readTime)?this.zi(t,zi(n,null,"F")):this.Xi(t,c,n,l)}))})))}ji(t,n,r,s){return Lh(n)||s.isEqual(Y.min())?R.resolve(null):this.Gi.getDocuments(t,r).next(i=>{const o=this.Yi(n,i);return this.Zi(n,o,r,s)?R.resolve(null):(Jr()<=ot.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hr(n)),this.Xi(t,o,n,i0(s,-1)).next(a=>a))})}Yi(t,n){let r=new Gt(nm(t));return n.forEach((s,i)=>{Lo(t,i)&&(r=r.add(i))}),r}Zi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Hi(t,n,r){return Jr()<=ot.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",hr(n)),this.Gi.getDocumentsMatchingQuery(t,n,Sn.min(),r)}Xi(t,n,r,s){return this.Gi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,n,r,s){this.persistence=t,this.es=n,this.serializer=s,this.ts=new Ct(ct),this.ns=new Hr(i=>wc(i),Ic),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _I(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function bI(e,t,n,r){return new SI(e,t,n,r)}async function Im(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=rt();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function VI(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let m=R.resolve();return f.forEach(E=>{m=m.next(()=>u.getEntry(l,E)).next(w=>{const I=c.docVersions.get(E);vt(I!==null),w.version.compareTo(I)<0&&(h.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=rt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function Am(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function DI(e,t){const n=tt(e),r=t.snapshotVersion;let s=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});s=n.ts;const a=[];t.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.qr.addMatchingKeys(i,u.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?m=m.withResumeToken(ne.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(w,I,P){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(f,m,u)&&a.push(n.qr.updateTargetData(i,m))});let l=sn(),c=rt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(xI(i,o,t.documentUpdates).next(u=>{l=u.us,c=u.cs})),!r.isEqual(Y.min())){const u=n.qr.getLastRemoteSnapshotVersion(i).next(h=>n.qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return R.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ts=s,i))}function xI(e,t,n){let r=rt(),s=rt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=sn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Y.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:s}})}function NI(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function kI(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.qr.getTargetData(r,t).next(i=>i?(s=i,R.resolve(s)):n.qr.allocateTargetId(r).next(o=>(s=new yn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function gl(e,t,n){const r=tt(e),s=r.ts.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Zs(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(s.target)}function Wh(e,t,n){const r=tt(e);let s=Y.min(),i=rt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=tt(l),f=h.ns.get(u);return f!==void 0?R.resolve(h.ts.get(f)):h.qr.getTargetData(c,u)}(r,o,je(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?s:Y.min(),n?i:rt())).next(a=>(OI(r,C0(t),a),{documents:a,ls:i})))}function OI(e,t,n){let r=e.rs.get(t)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.rs.set(t,r)}class Qh{constructor(){this.activeTargetIds=x0()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class MI{constructor(){this.eo=new Qh,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new Qh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ei=null;function wa(){return Ei===null?Ei=function(){return 268435456+Math.round(2147483648*Math.random())}():Ei++,"0x"+Ei.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class UI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${s}/databases/${i}`,this.po=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get yo(){return!1}wo(n,r,s,i,o){const a=wa(),l=this.So(n,r);F("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,i,o),this.Do(n,l,c,s).then(u=>(F("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Vr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Co(n,r,s,i,o,a){return this.wo(n,r,s,i,o)}bo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$r}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}So(n,r){const s=FI[n];return`${this.mo}/v1/${r}:${s}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,s){const i=wa();return new Promise((o,a)=>{const l=new Ww;l.setWithCredentials(!0),l.listenOnce(zw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case va.NO_ERROR:const u=l.getResponseJson();F(Qt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case va.TIMEOUT:F(Qt,`RPC '${t}' ${i} timed out`),a(new M(v.DEADLINE_EXCEEDED,"Request time out"));break;case va.HTTP_ERROR:const h=l.getStatus();if(F(Qt,`RPC '${t}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const E=function(I){const P=I.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(P)>=0?P:v.UNKNOWN}(m.status);a(new M(E,m.message))}else a(new M(v.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new M(v.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{F(Qt,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);F(Qt,`RPC '${t}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}vo(t,n,r){const s=wa(),i=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Hw(),a=Kw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");F(Qt,`Creating RPC '${t}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,m=!1;const E=new BI({co:I=>{m?F(Qt,`Not sending because RPC '${t}' stream ${s} is closed:`,I):(f||(F(Qt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),F(Qt,`RPC '${t}' stream ${s} sending:`,I),h.send(I))},lo:()=>h.close()}),w=(I,P,N)=>{I.listen(P,L=>{try{N(L)}catch(z){setTimeout(()=>{throw z},0)}})};return w(h,gi.EventType.OPEN,()=>{m||F(Qt,`RPC '${t}' stream ${s} transport opened.`)}),w(h,gi.EventType.CLOSE,()=>{m||(m=!0,F(Qt,`RPC '${t}' stream ${s} transport closed`),E.Ro())}),w(h,gi.EventType.ERROR,I=>{m||(m=!0,Vr(Qt,`RPC '${t}' stream ${s} transport errored:`,I),E.Ro(new M(v.UNAVAILABLE,"The operation could not be completed")))}),w(h,gi.EventType.MESSAGE,I=>{var P;if(!m){const N=I.data[0];vt(!!N);const L=N,z=L.error||((P=L[0])===null||P===void 0?void 0:P.error);if(z){F(Qt,`RPC '${t}' stream ${s} received error:`,z);const U=z.status;let ut=function(yt){const lt=bt[yt];if(lt!==void 0)return pm(lt)}(U),At=z.message;ut===void 0&&(ut=v.INTERNAL,At="Unknown error status: "+U+" with message "+z.message),m=!0,E.Ro(new M(ut,At)),h.close()}else F(Qt,`RPC '${t}' stream ${s} received:`,N),E.Vo(N)}}),w(a,Gw.STAT_EVENT,I=>{I.stat===Ch.PROXY?F(Qt,`RPC '${t}' stream ${s} detected buffering proxy`):I.stat===Ch.NOPROXY&&F(Qt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function Ia(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(e){return new X0(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(t,n,r=1e3,s=1.5,i=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=s,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t,n,r,s,i,o,a,l){this.si=t,this.Ko=r,this.$o=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Rm(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(rn(n.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Uo===n&&this.s_(r,s)},r=>{t(()=>{const s=new M(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(s)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(s=>{r(()=>this.o_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return F("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $I extends Cm{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=tI(this.serializer,t),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?qe(o.readTime):Y.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=ml(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ul(l)?{documents:rI(i,l)}:{query:sI(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_m(i,o.resumeToken);const c=fl(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=Qi(i,o.snapshotVersion.toTimestamp());const c=fl(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=oI(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=ml(this.serializer),n.removeTarget=t,this.e_(n)}}class jI extends Cm{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(vt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=nI(t.writeResults,t.commitTime),r=qe(t.commitTime);return this.listener.I_(r,n)}return vt(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=ml(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>eI(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.d_=!1}A_(){if(this.d_)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.wo(t,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(v.UNKNOWN,s.toString())})}Co(t,n,r,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(t,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(v.UNKNOWN,i.toString())})}terminate(){this.d_=!0}}class HI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(rn(n),this.f_=!1):F("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro(o=>{r.enqueueAndForget(async()=>{sr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=tt(l);c.C_.add(4),await ni(c),c.M_.set("Unknown"),c.C_.delete(4),await jo(c)}(this))})}),this.M_=new HI(r,s)}}async function jo(e){if(sr(e))for(const t of e.v_)await t(!0)}async function ni(e){for(const t of e.v_)await t(!1)}function Pm(e,t){const n=tt(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),kc(n)?Nc(n):Kr(n).Ho()&&xc(n,t))}function Sm(e,t){const n=tt(e),r=Kr(n);n.D_.delete(t),r.Ho()&&bm(n,t),n.D_.size===0&&(r.Ho()?r.Zo():sr(n)&&n.M_.set("Unknown"))}function xc(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Kr(e).u_(t)}function bm(e,t){e.x_.Oe(t),Kr(e).c_(t)}function Nc(e){e.x_=new G0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Kr(e).start(),e.M_.g_()}function kc(e){return sr(e)&&!Kr(e).jo()&&e.D_.size>0}function sr(e){return tt(e).C_.size===0}function Vm(e){e.x_=void 0}async function zI(e){e.D_.forEach((t,n)=>{xc(e,t)})}async function GI(e,t){Vm(e),kc(e)?(e.M_.w_(t),Nc(e)):e.M_.set("Unknown")}async function WI(e,t,n){if(e.M_.set("Online"),t instanceof gm&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.D_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.D_.delete(a),s.x_.removeTarget(a))}(e,t)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Yi(e,r)}else if(t instanceof Ci?e.x_.$e(t):t instanceof mm?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Y.min()))try{const r=await Am(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.x_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.D_.get(c);u&&i.D_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.D_.get(l);if(!u)return;i.D_.set(l,u.withResumeToken(ne.EMPTY_BYTE_STRING,u.snapshotVersion)),bm(i,l);const h=new yn(u.target,l,c,u.sequenceNumber);xc(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){F("RemoteStore","Failed to raise snapshot:",r),await Yi(e,r)}}async function Yi(e,t,n){if(!Zs(t))throw t;e.C_.add(1),await ni(e),e.M_.set("Offline"),n||(n=()=>Am(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await jo(e)})}function Dm(e,t){return t().catch(n=>Yi(e,n,t))}async function qo(e){const t=tt(e),n=Vn(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;QI(t);)try{const s=await NI(t.localStore,r);if(s===null){t.b_.length===0&&n.Zo();break}r=s.batchId,YI(t,s)}catch(s){await Yi(t,s)}xm(t)&&Nm(t)}function QI(e){return sr(e)&&e.b_.length<10}function YI(e,t){e.b_.push(t);const n=Vn(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function xm(e){return sr(e)&&!Vn(e).jo()&&e.b_.length>0}function Nm(e){Vn(e).start()}async function XI(e){Vn(e).E_()}async function JI(e){const t=Vn(e);for(const n of e.b_)t.P_(n.mutations)}async function ZI(e,t,n){const r=e.b_.shift(),s=Cc.from(r,t,n);await Dm(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await qo(e)}async function tA(e,t){t&&Vn(e).h_&&await async function(r,s){if(function(o){return H0(o)&&o!==v.ABORTED}(s.code)){const i=r.b_.shift();Vn(r).Yo(),await Dm(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qo(r)}}(e,t),xm(e)&&Nm(e)}async function Xh(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const r=sr(n);n.C_.add(3),await ni(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await jo(n)}async function eA(e,t){const n=tt(e);t?(n.C_.delete(2),await jo(n)):t||(n.C_.add(2),await ni(n),n.M_.set("Unknown"))}function Kr(e){return e.O_||(e.O_=function(n,r,s){const i=tt(n);return i.A_(),new $I(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:zI.bind(null,e),Io:GI.bind(null,e),a_:WI.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),kc(e)?Nc(e):e.M_.set("Unknown")):(await e.O_.stop(),Vm(e))})),e.O_}function Vn(e){return e.N_||(e.N_=function(n,r,s){const i=tt(n);return i.A_(),new jI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:XI.bind(null,e),Io:tA.bind(null,e),T_:JI.bind(null,e),I_:ZI.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await qo(e)):(await e.N_.stop(),e.b_.length>0&&(F("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new Oc(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(v.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mc(e,t){if(rn("AsyncQueue",`${t}: ${e}`),Zs(e))return new M(v.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t){this.comparator=t?(n,r)=>t(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=ns(),this.sortedSet=new Ct(this.comparator)}static emptySet(t){return new Ir(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ir)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Ir;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.B_=new Ct(H.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):G():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Or{constructor(t,n,r,s,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Or(t,n,Ir.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Mo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.k_=void 0,this.listeners=[]}}class rA{constructor(){this.queries=new Hr(t=>em(t),Mo),this.onlineState="Unknown",this.q_=new Set}}async function km(e,t){const n=tt(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new nA),s)try{i.k_=await n.onListen(r)}catch(o){const a=Mc(o,`Initialization of query '${hr(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.listeners.push(t),t.Q_(n.onlineState),i.k_&&t.K_(i.k_)&&Lc(n)}async function Om(e,t){const n=tt(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(t);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function sA(e,t){const n=tt(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.K_(s)&&(r=!0);o.k_=s}}r&&Lc(n)}function iA(e,t,n){const r=tt(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function Lc(e){e.q_.forEach(t=>{t.next()})}class Mm{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Or(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=Or.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t){this.key=t}}class Fm{constructor(t){this.key=t}}class oA{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=rt(),this.mutatedKeys=rt(),this._a=nm(t),this.aa=new Ir(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new Jh,s=n?n.aa:this.aa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const f=s.get(u),m=Lo(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?E!==w&&(r.track({type:3,doc:m}),I=!0):this.ha(f,m)||(r.track({type:2,doc:m}),I=!0,(l&&this._a(m,l)>0||c&&this._a(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),I=!0):f&&!m&&(r.track({type:1,doc:f}),I=!0,(l||c)&&(a=!0)),I&&(m?(o=o.add(m),i=w?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{aa:o,la:r,Zi:a,mutatedKeys:i}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((u,h)=>function(m,E){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return w(m)-w(E)}(u.type,h.type)||this._a(u.doc,h.doc)),this.Pa(r),s=s!=null&&s;const a=n&&!s?this.Ia():[],l=this.oa.size===0&&this.current&&!s?1:0,c=l!==this.sa;return this.sa=l,o.length!==0||c?{snapshot:new Or(this.query,t.aa,i,o,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Jh,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=rt(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new Fm(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new Lm(r))}),n}da(t){this.ia=t.ls,this.oa=rt();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return Or.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class aA{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class lA{constructor(t){this.key=t,this.Ra=!1}}class cA{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Hr(a=>em(a),Mo),this.fa=new Map,this.ga=new Set,this.pa=new Ct(H.comparator),this.ya=new Map,this.wa=new bc,this.Sa={},this.ba=new Map,this.Da=kr.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function uA(e,t){const n=vA(e);let r,s;const i=n.ma.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Aa();else{const o=await kI(n.localStore,je(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await hA(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&Pm(n.remoteStore,o)}return s}async function hA(e,t,n,r,s){e.va=(h,f,m)=>async function(w,I,P,N){let L=I.view.ca(P);L.Zi&&(L=await Wh(w.localStore,I.query,!1).then(({documents:At})=>I.view.ca(At,L)));const z=N&&N.targetChanges.get(I.targetId),U=N&&N.targetMismatches.get(I.targetId)!=null,ut=I.view.applyChanges(L,w.isPrimaryClient,z,U);return tf(w,I.targetId,ut.Ta),ut.snapshot}(e,h,f,m);const i=await Wh(e.localStore,t,!0),o=new oA(t,i.ls),a=o.ca(i.documents),l=ei.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);tf(e,n,c.Ta);const u=new aA(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function fA(e,t){const n=tt(e),r=n.ma.get(t),s=n.fa.get(r.targetId);if(s.length>1)return n.fa.set(r.targetId,s.filter(i=>!Mo(i,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await gl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Sm(n.remoteStore,r.targetId),_l(n,r.targetId)}).catch(Js)):(_l(n,r.targetId),await gl(n.localStore,r.targetId,!0))}async function dA(e,t,n){const r=TA(e);try{const s=await function(o,a){const l=tt(o),c=kt.now(),u=a.reduce((m,E)=>m.add(E.key),rt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=sn(),w=rt();return l.ss.getEntries(m,u).next(I=>{E=I,E.forEach((P,N)=>{N.isValidDocument()||(w=w.add(P))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(I=>{h=I;const P=[];for(const N of a){const L=B0(N,h.get(N.key).overlayedDocument);L!=null&&P.push(new rr(N.key,L,Gp(L.value.mapValue),be.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,P,a)}).next(I=>{f=I;const P=I.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(m,I.batchId,P)})}).then(()=>({batchId:f.batchId,changes:sm(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new Ct(ct)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(r,s.batchId,n),await ri(r,s.changes),await qo(r.remoteStore)}catch(s){const i=Mc(s,"Failed to persist write");n.reject(i)}}async function Bm(e,t){const n=tt(e);try{const r=await DI(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.ya.get(i);o&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ra=!0:s.modifiedDocuments.size>0?vt(o.Ra):s.removedDocuments.size>0&&(vt(o.Ra),o.Ra=!1))}),await ri(n,r,t)}catch(r){await Js(r)}}function Zh(e,t,n){const r=tt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ma.forEach((i,o)=>{const a=o.view.Q_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.listeners)f.Q_(a)&&(c=!0)}),c&&Lc(l)}(r.eventManager,t),s.length&&r.Va.a_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pA(e,t,n){const r=tt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.ya.get(t),i=s&&s.key;if(i){let o=new Ct(H.comparator);o=o.insert(i,Xt.newNoDocument(i,Y.min()));const a=rt().add(i),l=new Uo(Y.min(),new Map,new Ct(ct),o,a);await Bm(r,l),r.pa=r.pa.remove(i),r.ya.delete(t),Fc(r)}else await gl(r.localStore,t,!1).then(()=>_l(r,t,n)).catch(Js)}async function mA(e,t){const n=tt(e),r=t.batch.batchId;try{const s=await VI(n.localStore,t);$m(n,r,null),Um(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ri(n,s)}catch(s){await Js(s)}}async function gA(e,t,n){const r=tt(e);try{const s=await function(o,a){const l=tt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(vt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,t);$m(r,t,n),Um(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ri(r,s)}catch(s){await Js(s)}}function Um(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function $m(e,t,n){const r=tt(e);let s=r.Sa[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Sa[r.currentUser.toKey()]=s}}function _l(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||jm(e,r)})}function jm(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(Sm(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Fc(e))}function tf(e,t,n){for(const r of n)r instanceof Lm?(e.wa.addReference(r.key,t),_A(e,r)):r instanceof Fm?(F("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||jm(e,r.key)):G()}function _A(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(F("SyncEngine","New document in limbo: "+n),e.ga.add(r),Fc(e))}function Fc(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new H(It.fromString(t)),r=e.Da.next();e.ya.set(r,new lA(n)),e.pa=e.pa.insert(n,r),Pm(e.remoteStore,new yn(je(Ac(n.path)),r,"TargetPurposeLimboResolution",yc._e))}}async function ri(e,t,n){const r=tt(e),s=[],i=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,t,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=Dc.Qi(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.Va.a_(s),await async function(l,c){const u=tt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>R.forEach(c,f=>R.forEach(f.ki,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>R.forEach(f.qi,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Zs(h))throw h;F("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.ts.get(f),E=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(E);u.ts=u.ts.insert(f,w)}}}(r.localStore,i))}async function yA(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){F("SyncEngine","User change. New user:",t.toKey());const r=await Im(n.localStore,t);n.currentUser=t,function(i,o){i.ba.forEach(a=>{a.forEach(l=>{l.reject(new M(v.CANCELLED,o))})}),i.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ri(n,r._s)}}function EA(e,t){const n=tt(e),r=n.ya.get(t);if(r&&r.Ra)return rt().add(r.key);{let s=rt();const i=n.fa.get(t);if(!i)return s;for(const o of i){const a=n.ma.get(o);s=s.unionWith(a.view.ua)}return s}}function vA(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=EA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pA.bind(null,t),t.Va.a_=sA.bind(null,t.eventManager),t.Va.Fa=iA.bind(null,t.eventManager),t}function TA(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gA.bind(null,t),t}class ef{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=$o(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return bI(this.persistence,new PI,t.initialUser,this.serializer)}createPersistence(t){return new AI(Vc.jr,this.serializer)}createSharedClientState(t){return new MI}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wA{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yA.bind(null,this.syncEngine),await eA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new rA}()}createDatastore(t){const n=$o(t.databaseInfo.databaseId),r=function(i){return new UI(i)}(t.databaseInfo);return function(i,o,a,l){return new qI(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new KI(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Zh(this.syncEngine,n,0),function(){return Yh.D()?new Yh:new LI}())}createSyncEngine(t,n){return function(s,i,o,a,l,c,u){const h=new cA(s,i,o,a,l,c);return u&&(h.Ca=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=tt(n);F("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await ni(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):rn("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Yt.UNAUTHENTICATED,this.clientId=Hp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{F("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(F("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Mc(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Aa(e,t){e.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Im(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function nf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await RA(e);F("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(s=>Xh(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>Xh(t.remoteStore,i)),e._onlineComponents=t}function AA(e){return e.name==="FirebaseError"?e.code===v.FAILED_PRECONDITION||e.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function RA(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{await Aa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!AA(n))throw n;Vr("Error using user provided cache. Falling back to memory cache: "+n),await Aa(e,new ef)}}else F("FirestoreClient","Using default OfflineComponentProvider"),await Aa(e,new ef);return e._offlineComponents}async function Hm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),await nf(e,e._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),await nf(e,new wA))),e._onlineComponents}function CA(e){return Hm(e).then(t=>t.syncEngine)}async function yl(e){const t=await Hm(e),n=t.eventManager;return n.onListen=uA.bind(null,t.syncEngine),n.onUnlisten=fA.bind(null,t.syncEngine),n}function PA(e,t,n={}){const r=new In;return e.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new qm({next:f=>{o.enqueueAndForget(()=>Om(i,h)),f.fromCache&&l.source==="server"?c.reject(new M(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Mm(a,u,{includeMetadataChanges:!0,J_:!0});return km(i,h)}(await yl(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(e,t,n){if(!n)throw new M(v.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function SA(e,t,n,r){if(t===!0&&r===!0)throw new M(v.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function sf(e){if(!H.isDocumentKey(e))throw new M(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function of(e){if(H.isDocumentKey(e))throw new M(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ho(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":G()}function He(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ho(e);throw new M(v.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function bA(e,t){if(t<=0)throw new M(v.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new M(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new M(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}SA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Km((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ko{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new af({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new M(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new af(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yw;switch(r.type){case"firstParty":return new t0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rf.get(n);r&&(F("ComponentProvider","Removing Datastore"),rf.delete(n),r.terminate())}(this),Promise.resolve()}}function VA(e,t,n,r={}){var s;const i=(e=He(e,Ko))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Yt.MOCK_USER;else{a=Sv(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new M(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Yt(c)}e._authCredentials=new Xw(new qp(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new an(this.firestore,t,this._query)}}class he{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new An(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new he(this.firestore,t,this._key)}}class An extends an{constructor(t,n,r){super(t,n,Ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new he(this.firestore,null,new H(t))}withConverter(t){return new An(this.firestore,t,this._path)}}function DA(e,t,...n){if(e=Gn(e),zm("collection","path",t),e instanceof Ko){const r=It.fromString(t,...n);return of(r),new An(e,null,r)}{if(!(e instanceof he||e instanceof An))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(It.fromString(t,...n));return of(r),new An(e.firestore,null,r)}}function xA(e,t,...n){if(e=Gn(e),arguments.length===1&&(t=Hp.newId()),zm("doc","path",t),e instanceof Ko){const r=It.fromString(t,...n);return sf(r),new he(e,null,new H(r))}{if(!(e instanceof he||e instanceof An))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(It.fromString(t,...n));return sf(r),new he(e.firestore,e instanceof An?e.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Rm(this,"async_queue_retry"),this.iu=()=>{const n=Ia();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=Ia();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=Ia();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new In;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!Zs(t))throw t;F("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const s=Oc.createAndSchedule(this,t,n,r,i=>this.au(i));return this.Xa.push(s),s}su(){this.eu&&G()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}function lf(e){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(e,["next","error","complete"])}class Jn extends Ko{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new NA}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gm(this),this._firestoreClient.terminate()}}function kA(e,t){const n=typeof e=="object"?e:xT(),r=typeof e=="string"?e:t||"(default)",s=ST(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Cv("firestore");i&&VA(s,...i)}return s}function Bc(e){return e._firestoreClient||Gm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Gm(e){var t,n,r;const s=e._freezeSettings(),i=function(a,l,c,u){return new f0(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Km(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new IA(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mr(ne.fromBase64String(t))}catch(n){throw new M(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mr(ne.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new M(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new M(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new M(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=/^__.*__$/;class MA{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new rr(t,this.data,this.fieldMask,n,this.fieldTransforms):new ti(t,this.data,n,this.fieldTransforms)}}function Qm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class jc{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new jc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tu({path:r,du:!1});return s.Au(t),s}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tu({path:r,du:!1});return s.Pu(),s}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return Xi(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if(Qm(this.Iu)&&OA.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class LA{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||$o(t)}pu(t,n,r,s=!1){return new jc({Iu:t,methodName:n,gu:r,path:qt.emptyPath(),du:!1,fu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qc(e){const t=e._freezeSettings(),n=$o(e._databaseId);return new LA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ym(e,t,n,r,s,i={}){const o=e.pu(i.merge||i.mergeFields?2:0,t,n,s);Zm("Data must be an object, but it was:",o,r);const a=Xm(r,o);let l,c;if(i.merge)l=new Pe(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const f=BA(t,h,n);if(!o.contains(f))throw new M(v.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);$A(u,f)||u.push(f)}l=new Pe(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new MA(new Te(a),l,c)}function FA(e,t,n,r=!1){return Hc(n,e.pu(r?4:3,t))}function Hc(e,t){if(Jm(e=Gn(e)))return Zm("Unsupported field value:",t,e),Xm(e,t);if(e instanceof Wm)return function(r,s){if(!Qm(s.Iu))throw s.mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Hc(a,s.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=Gn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return N0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=kt.fromDate(r);return{timestampValue:Qi(s.serializer,i)}}if(r instanceof kt){const i=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qi(s.serializer,i)}}if(r instanceof $c)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mr)return{bytesValue:_m(s.serializer,r._byteString)};if(r instanceof he){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sc(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.mu(`Unsupported field value: ${Ho(r)}`)}(e,t)}function Xm(e,t){const n={};return Kp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jr(e,(r,s)=>{const i=Hc(s,t.Eu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Jm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof kt||e instanceof $c||e instanceof Mr||e instanceof he||e instanceof Wm)}function Zm(e,t,n){if(!Jm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ho(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function BA(e,t,n){if((t=Gn(t))instanceof Uc)return t._internalPath;if(typeof t=="string")return tg(e,t);throw Xi("Field path arguments must be of type string or ",e,!1,void 0,n)}const UA=new RegExp("[~\\*/\\[\\]]");function tg(e,t,n){if(t.search(UA)>=0)throw Xi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Uc(...t.split("."))._internalPath}catch{throw Xi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Xi(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new M(v.INVALID_ARGUMENT,a+e+l)}function $A(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new he(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(zo("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jA extends eg{data(){return super.data()}}function zo(e,t){return typeof t=="string"?tg(e,t):t instanceof Uc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new M(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kc{}class zc extends Kc{}function qA(e,t,...n){let r=[];t instanceof Kc&&r.push(t),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Gc).length,a=i.filter(l=>l instanceof Go).length;if(o>1||o>0&&a>0)throw new M(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class Go extends zc{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Go(t,n,r)}_apply(t){const n=this._parse(t);return rg(t._query,n),new an(t.firestore,t.converter,hl(t._query,n))}_parse(t){const n=qc(t.firestore);return function(i,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new M(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){uf(h,u);const m=[];for(const E of h)m.push(cf(l,i,E));f={arrayValue:{values:m}}}else f=cf(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||uf(h,u),f=FA(a,o,h,u==="in"||u==="not-in");return Dt.create(c,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function O1(e,t,n){const r=t,s=zo("where",e);return Go._create(s,r,n)}class Gc extends Kc{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Gc(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xe.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)rg(o,l),o=hl(o,l)}(t._query,n),new an(t.firestore,t.converter,hl(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wc extends zc{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Wc(t,n)}_apply(t){const n=function(s,i,o){if(s.startAt!==null)throw new M(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new M(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ls(i,o)}(t._query,this._field,this._direction);return new an(t.firestore,t.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new qr(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function HA(e,t="asc"){const n=t,r=zo("orderBy",e);return Wc._create(r,n)}class Qc extends zc{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new Qc(t,n,r)}_apply(t){return new an(t.firestore,t.converter,zi(t._query,this._limit,this._limitType))}}function KA(e){return bA("limit",e),Qc._create("limit",e,"F")}function cf(e,t,n){if(typeof(n=Gn(n))=="string"){if(n==="")throw new M(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tm(t)&&n.indexOf("/")!==-1)throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(It.fromString(n));if(!H.isDocumentKey(r))throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dh(e,new H(r))}if(n instanceof he)return Dh(e,n._key);throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ho(n)}.`)}function uf(e,t){if(!Array.isArray(e)||e.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function rg(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new M(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new M(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class zA{convertValue(t,n="none"){switch(Xn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Yn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw G()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return jr(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new $c(Vt(t.latitude),Vt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=vc(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ks(t));default:return null}}convertTimestamp(t){const n=bn(t);return new kt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=It.fromString(t);vt(wm(r));const s=new Os(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ig extends eg{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(zo("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pi extends ig{data(t={}){return super.data(t)}}class og{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new ss(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Pi(this._firestore,this._userDataWriter,r.key,r,new ss(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Pi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ss(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Pi(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ss(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:GA(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function GA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}class Yc extends zA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new he(this.firestore,null,n)}}function M1(e){e=He(e,an);const t=He(e.firestore,Jn),n=Bc(t),r=new Yc(t);return ng(e._query),PA(n,e._query).then(s=>new og(t,r,e,s))}function L1(e,t,n){e=He(e,he);const r=He(e.firestore,Jn),s=sg(e.converter,t,n);return Xc(r,[Ym(qc(r),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,be.none())])}function F1(e){return Xc(He(e.firestore,Jn),[new Rc(e._key,be.none())])}function B1(e,t){const n=He(e.firestore,Jn),r=xA(e),s=sg(e.converter,t);return Xc(n,[Ym(qc(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,be.exists(!1))]).then(()=>r)}function hf(e,...t){var n,r,s;e=Gn(e);let i={includeMetadataChanges:!1},o=0;typeof t[o]!="object"||lf(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(lf(t[o])){const h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),t[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(e instanceof he)c=He(e.firestore,Jn),u=Ac(e._key.path),l={next:h=>{t[o]&&t[o](WA(c,e,h))},error:t[o+1],complete:t[o+2]};else{const h=He(e,an);c=He(h.firestore,Jn),u=h._query;const f=new Yc(c);l={next:m=>{t[o]&&t[o](new og(c,f,h,m))},error:t[o+1],complete:t[o+2]},ng(e._query)}return function(f,m,E,w){const I=new qm(w),P=new Mm(m,I,E);return f.asyncQueue.enqueueAndForget(async()=>km(await yl(f),P)),()=>{I.Na(),f.asyncQueue.enqueueAndForget(async()=>Om(await yl(f),P))}}(Bc(c),u,a,l)}function Xc(e,t){return function(r,s){const i=new In;return r.asyncQueue.enqueueAndForget(async()=>dA(await CA(r),s,i)),i.promise}(Bc(e),t)}function WA(e,t,n){const r=n.docs.get(t._key),s=new Yc(e);return new ig(e,s,t._key,r,new ss(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){$r=s})(DT),Li(new Is("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Jn(new Jw(r.getProvider("auth-internal")),new n0(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new M(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Os(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),vr(Ph,"4.4.0",t),vr(Ph,"4.4.0","esm2017")})();const QA={apiKey:"AIzaSyBmx3k3Fn9-2uF2rFmmE7TeAvRdnBmcqHw",authDomain:"bingo-card-generator-7335a.firebaseapp.com",projectId:"bingo-card-generator-7335a",storageBucket:"bingo-card-generator-7335a.appspot.com",messagingSenderId:"307692627485",appId:"1:307692627485:web:29128c71c307033f3c88f4"},YA=Ld(QA),XA=kA(YA);function El(e){return vf()?(Ig(e),!0):!1}function JA(e){return typeof e=="function"?e():ue(e)}const ZA=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const t1=e=>typeof e<"u";function e1(e,t,n={}){const{immediate:r=!0}=n,s=js(!1);let i=null;function o(){i&&(clearTimeout(i),i=null)}function a(){s.value=!1,o()}function l(...c){o(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,e(...c)},JA(t))}return r&&(s.value=!0,ZA&&l()),El(a),{isPending:Dl(s),start:l,stop:a}}function ff(e){const t=e.data();return t&&Object.defineProperty(t,"id",{value:e.id.toString(),writable:!1}),t}function n1(e){var t;return(((t=e.path)==null?void 0:t.match(/\//g))||[]).length%2!==0}function r1(e,t=void 0,n={}){const{errorHandler:r=l=>console.error(l),autoDispose:s=!0}=n,i=ee(e)?e:ce(()=>e);let o=()=>{};const a=js(t);return is(i,l=>{o(),i.value?n1(i.value)?o=hf(l,c=>{a.value=ff(c)||null},r):o=hf(l,c=>{a.value=c.docs.map(ff).filter(t1)},r):a.value=t},{immediate:!0}),s===!0?El(()=>{o()}):typeof s=="number"&&El(()=>{e1(()=>{o()},s)}),a}const s1={fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"8.5 6 7 12"},vl=de({__name:"IconCaret",props:{color:{}},setup(e){return(t,n)=>(Kt(),ge("svg",s1,[X("path",{style:ze({fill:t.color??"#fff"}),"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.79289 6.29289C9.18342 5.90237 9.81658 5.90237 10.2071 6.29289L15.2071 11.2929C15.5976 11.6834 15.5976 12.3166 15.2071 12.7071L10.2071 17.7071C9.81658 18.0976 9.18342 18.0976 8.79289 17.7071C8.40237 17.3166 8.40237 16.6834 8.79289 16.2929L13.0858 12L8.79289 7.70711C8.40237 7.31658 8.40237 6.68342 8.79289 6.29289Z"},null,4)]))}});function df(e){const t=Math.floor((new Date().getTime()-e)/1e3);let n=Math.floor(t/31536e3);return n>=1?n+" years ago":(n=Math.floor(t/2592e3),n>=1?n+" months ago":(n=Math.floor(t/86400),n>=1?n+" days ago":(n=Math.floor(t/3600),n>=1?n+" hours ago":(n=Math.floor(t/60),n>=1?n+" minutes ago":t>5?Math.floor(t)+" seconds ago":t>-10?"just now":"in the future "))))}const i1={class:"game"},o1={class:"description"},a1={class:"time-ago"},l1=de({__name:"GameCard",props:{game:{}},setup(e){const t=e,n=ce(()=>t.game.updatedAt===t.game.createdAt?`Created ${df(t.game.createdAt)}`:`Updated ${df(t.game.updatedAt)}`),r=ce(()=>t.game.description.length>200?t.game.description.slice(0,200)+"...":t.game.description);return(s,i)=>{const o=Fl("RouterLink");return Kt(),uo(o,{to:`/game/${s.game.id}`},{default:Ee(()=>[X("div",i1,[X("h2",null,Yo(s.game.name),1),X("p",o1,Yo(r.value),1),X("p",a1,Yo(n.value),1),et(vl,{color:"var(--color-background)",class:"arrow"})])]),_:1},8,["to"])}}}),c1=qs(l1,[["__scopeId","data-v-fe9c5211"]]),u1={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h1=de({__name:"IconPlus",props:{color:{}},setup(e){return(t,n)=>(Kt(),ge("svg",u1,[X("path",{style:ze({stroke:t.color??"#fff"}),d:"M4 12H20M12 4V20",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,4)]))}}),Wo=e=>(Ml("data-v-2d27884a"),e=e(),Ll(),e),f1={class:"intro"},d1=Wo(()=>X("h1",null,[X("span",null,"Create and play."),X("br"),Me(" Fun custom bingo games! ")],-1)),p1=Wo(()=>X("p",{class:"intro-text"}," A lot of boring meetings or simply want to make an event more fun? Create your own bingo game and share it with your friends and colleagues! ",-1)),m1={class:"button-container"},g1=Wo(()=>X("span",null,"Create a new game",-1)),_1=Wo(()=>X("p",null,"check out popular games",-1)),y1=de({__name:"IntroComponent",emits:["scroll-to-games","example"],setup(e,{emit:t}){return(n,r)=>{const s=Fl("RouterLink");return Kt(),ge("div",f1,[d1,p1,X("div",m1,[et(s,{to:"/create",class:"start-new-button"},{default:Ee(()=>[et(h1,{color:"var(--color-foreground-light)",class:"plus"}),g1]),_:1}),X("button",{class:"demo",onClick:r[0]||(r[0]=i=>n.$emit("scroll-to-games"))},[et(vl,{color:"var(--color-primary-dark)",class:"arrow-down"}),_1,et(vl,{color:"var(--color-primary-dark)",class:"arrow-down"})])])])}}}),E1=qs(y1,[["__scopeId","data-v-2d27884a"]]),v1=X("h1",null,"Most popular Bingo games",-1),T1={key:1,class:"no-games"},w1=de({__name:"HomeView",setup(e){const t=qA(DA(XA,"games"),HA("updatedAt","desc"),KA(5)),n=r1(t,void 0,{autoDispose:!1}),r=js(null),s=()=>{if(!r.value)return;const o=r.value.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:o,behavior:"smooth"})};return(i,o)=>{var a;return Kt(),ge("div",null,[et(E1,{onScrollToGames:s}),X("div",{class:"games-container",ref_key:"gamesContainer",ref:r},[v1,(a=ue(n))!=null&&a.length?(Kt(!0),ge(le,{key:0},A_(ue(n),l=>(Kt(),uo(c1,{key:l.id,game:l},null,8,["game"]))),128)):(Kt(),ge("p",T1,"No games found"))],512)])}}}),I1=LE({history:tE("/"),scrollBehavior(){return{top:0}},routes:[{path:"/",name:"home",component:w1},{path:"/game/:id",name:"game",component:()=>lr(()=>import("./GameView-Qa-zhK0Q.js"),__vite__mapDeps([0,1,2]))},{path:"/game/:id/play/new",name:"play-new",component:()=>lr(()=>import("./PlayNewView-NvAz48Jn.js"),__vite__mapDeps([]))},{path:"/game/:id/play/:cardId",name:"play",component:()=>lr(()=>import("./PlayView-fxTHaxHn.js"),__vite__mapDeps([]))},{path:"/pricing",name:"pricing",component:()=>lr(()=>import("./PricingView-1W2j-Phq.js"),__vite__mapDeps([]))},{path:"/create",name:"create",component:()=>lr(()=>import("./CreateView-O3Srn7yC.js"),__vite__mapDeps([3,1,4]))},{path:"/error",name:"error",component:()=>lr(()=>import("./ErrorView-fHt1-v2T.js"),__vite__mapDeps([]))}]}),ag=ky(pv);ag.use(I1);ag.mount("#app");export{Yo as A,df as B,P1 as C,S1 as D,r1 as E,qA as F,HA as G,O1 as H,DA as I,le as J,A_ as K,D1 as L,ce as M,vl as N,B1 as O,L1 as P,M1 as Q,F1 as R,mo as T,qs as _,X as a,et as b,ge as c,de as d,Me as e,uo as f,h1 as g,R1 as h,b1 as i,V1 as j,js as k,is as l,u_ as m,ze as n,Kt as o,eo as p,Ml as q,A1 as r,Ll as s,dy as t,BE as u,C1 as v,Ee as w,xA as x,XA as y,ue as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/GameView-Qa-zhK0Q.js","assets/firestore-Np7FKWuX.js","assets/GameView-0fW2tf8m.css","assets/CreateView-O3Srn7yC.js","assets/CreateView-kEHQQI7y.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}