(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function yl(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Tt={},fr=[],Te=()=>{},Jm=()=>!1,Yi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),El=e=>e.startsWith("onUpdate:"),Ot=Object.assign,vl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Zm=Object.prototype.hasOwnProperty,it=(e,t)=>Zm.call(e,t),q=Array.isArray,dr=e=>Ls(e)==="[object Map]",Nr=e=>Ls(e)==="[object Set]",Qc=e=>Ls(e)==="[object Date]",Z=e=>typeof e=="function",xt=e=>typeof e=="string",wn=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",cf=e=>(Et(e)||Z(e))&&Z(e.then)&&Z(e.catch),uf=Object.prototype.toString,Ls=e=>uf.call(e),tg=e=>Ls(e).slice(8,-1),hf=e=>Ls(e)==="[object Object]",Tl=e=>xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,_i=yl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},eg=/-(\w)/g,qe=Xi(e=>e.replace(eg,(t,n)=>n?n.toUpperCase():"")),ng=/\B([A-Z])/g,kr=Xi(e=>e.replace(ng,"-$1").toLowerCase()),Ji=Xi(e=>e.charAt(0).toUpperCase()+e.slice(1)),zo=Xi(e=>e?`on${Ji(e)}`:""),In=(e,t)=>!Object.is(e,t),yi=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ci=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Pi=e=>{const t=parseFloat(e);return isNaN(t)?e:t},rg=e=>{const t=xt(e)?Number(e):NaN;return isNaN(t)?e:t};let Yc;const ff=()=>Yc||(Yc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function He(e){if(q(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=xt(r)?ag(r):He(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(xt(e)||Et(e))return e}const sg=/;(?![^(]*\))/g,ig=/:([^]+)/,og=/\/\*[^]*?\*\//g;function ag(e){const t={};return e.replace(og,"").split(sg).forEach(n=>{if(n){const r=n.split(ig);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Zi(e){let t="";if(xt(e))t=e;else if(q(e))for(let n=0;n<e.length;n++){const r=Zi(e[n]);r&&(t+=r+" ")}else if(Et(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const lg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cg=yl(lg);function df(e){return!!e||e===""}function ug(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Fs(e[r],t[r]);return n}function Fs(e,t){if(e===t)return!0;let n=Qc(e),r=Qc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=wn(e),r=wn(t),n||r)return e===t;if(n=q(e),r=q(t),n||r)return n&&r?ug(e,t):!1;if(n=Et(e),r=Et(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Fs(e[o],t[o]))return!1}}return String(e)===String(t)}function wl(e,t){return e.findIndex(n=>Fs(n,t))}const Ko=e=>xt(e)?e:e==null?"":q(e)||Et(e)&&(e.toString===uf||!Z(e.toString))?JSON.stringify(e,pf,2):String(e),pf=(e,t)=>t&&t.__v_isRef?pf(e,t.value):dr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Go(r,i)+" =>"]=s,n),{})}:Nr(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Go(n))}:wn(t)?Go(t):Et(t)&&!q(t)&&!hf(t)?String(t):t,Go=(e,t="")=>{var n;return wn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let he;class hg{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=he,!t&&he&&(this.index=(he.scopes||(he.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=he;try{return he=this,t()}finally{he=n}}}on(){he=this}off(){he=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function fg(e,t=he){t&&t.active&&t.effects.push(e)}function mf(){return he}function dg(e){he&&he.cleanups.push(e)}let $n;class Il{constructor(t,n,r,s){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=3,this._trackId=0,this._runnings=0,this._queryings=0,this._depsLength=0,fg(this,s)}get dirty(){if(this._dirtyLevel===1){this._dirtyLevel=0,this._queryings++,Xn();for(const t of this.deps)if(t.computed&&(pg(t.computed),this._dirtyLevel>=2))break;Jn(),this._queryings--}return this._dirtyLevel>=2}set dirty(t){this._dirtyLevel=t?3:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=_n,n=$n;try{return _n=!0,$n=this,this._runnings++,Xc(this),this.fn()}finally{Jc(this),this._runnings--,$n=n,_n=t}}stop(){var t;this.active&&(Xc(this),Jc(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function pg(e){return e.value}function Xc(e){e._trackId++,e._depsLength=0}function Jc(e){if(e.deps&&e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)gf(e.deps[t],e);e.deps.length=e._depsLength}}function gf(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let _n=!0,wa=0;const _f=[];function Xn(){_f.push(_n),_n=!1}function Jn(){const e=_f.pop();_n=e===void 0?!0:e}function Al(){wa++}function Rl(){for(wa--;!wa&&Ia.length;)Ia.shift()()}function yf(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&gf(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Ia=[];function Ef(e,t,n){Al();for(const r of e.keys())if(!(!r.allowRecurse&&r._runnings)&&r._dirtyLevel<t&&(!r._runnings||t!==2)){const s=r._dirtyLevel;r._dirtyLevel=t,s===0&&(!r._queryings||t!==2)&&(r.trigger(),r.scheduler&&Ia.push(r.scheduler))}Rl()}const vf=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},Aa=new WeakMap,jn=Symbol(""),Ra=Symbol("");function le(e,t,n){if(_n&&$n){let r=Aa.get(e);r||Aa.set(e,r=new Map);let s=r.get(n);s||r.set(n,s=vf(()=>r.delete(n))),yf($n,s)}}function Je(e,t,n,r,s,i){const o=Aa.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&q(e)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!wn(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":q(e)?Tl(n)&&a.push(o.get("length")):(a.push(o.get(jn)),dr(e)&&a.push(o.get(Ra)));break;case"delete":q(e)||(a.push(o.get(jn)),dr(e)&&a.push(o.get(Ra)));break;case"set":dr(e)&&a.push(o.get(jn));break}Al();for(const l of a)l&&Ef(l,3);Rl()}const mg=yl("__proto__,__v_isRef,__isVue"),Tf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(wn)),Zc=gg();function gg(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=at(this);for(let i=0,o=this.length;i<o;i++)le(r,"get",i+"");const s=r[t](...n);return s===-1||s===!1?r[t](...n.map(at)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Xn(),Al();const r=at(this)[t].apply(this,n);return Rl(),Jn(),r}}),e}function _g(e){const t=at(this);return le(t,"has",e),t.hasOwnProperty(e)}class wf{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Vg:Cf:i?Rf:Af).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=q(t);if(!s){if(o&&it(Zc,n))return Reflect.get(Zc,n,r);if(n==="hasOwnProperty")return _g}const a=Reflect.get(t,n,r);return(wn(n)?Tf.has(n):mg(n))||(s||le(t,"get",n),i)?a:te(a)?o&&Tl(n)?a:a.value:Et(a)?s?Sl(a):eo(a):a}}class If extends wf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._shallow){const l=vr(i);if(!ur(r)&&!vr(r)&&(i=at(i),r=at(r)),!q(t)&&te(i)&&!te(r))return l?!1:(i.value=r,!0)}const o=q(t)&&Tl(n)?Number(n)<t.length:it(t,n),a=Reflect.set(t,n,r,s);return t===at(s)&&(o?In(r,i)&&Je(t,"set",n,r):Je(t,"add",n,r)),a}deleteProperty(t,n){const r=it(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Je(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!wn(n)||!Tf.has(n))&&le(t,"has",n),r}ownKeys(t){return le(t,"iterate",q(t)?"length":jn),Reflect.ownKeys(t)}}class yg extends wf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Eg=new If,vg=new yg,Tg=new If(!0),Cl=e=>e,to=e=>Reflect.getPrototypeOf(e);function ni(e,t,n=!1,r=!1){e=e.__v_raw;const s=at(e),i=at(t);n||(In(t,i)&&le(s,"get",t),le(s,"get",i));const{has:o}=to(s),a=r?Cl:n?Vl:ds;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function ri(e,t=!1){const n=this.__v_raw,r=at(n),s=at(e);return t||(In(e,s)&&le(r,"has",e),le(r,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function si(e,t=!1){return e=e.__v_raw,!t&&le(at(e),"iterate",jn),Reflect.get(e,"size",e)}function tu(e){e=at(e);const t=at(this);return to(t).has.call(t,e)||(t.add(e),Je(t,"add",e,e)),this}function eu(e,t){t=at(t);const n=at(this),{has:r,get:s}=to(n);let i=r.call(n,e);i||(e=at(e),i=r.call(n,e));const o=s.call(n,e);return n.set(e,t),i?In(t,o)&&Je(n,"set",e,t):Je(n,"add",e,t),this}function nu(e){const t=at(this),{has:n,get:r}=to(t);let s=n.call(t,e);s||(e=at(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Je(t,"delete",e,void 0),i}function ru(){const e=at(this),t=e.size!==0,n=e.clear();return t&&Je(e,"clear",void 0,void 0),n}function ii(e,t){return function(r,s){const i=this,o=i.__v_raw,a=at(o),l=t?Cl:e?Vl:ds;return!e&&le(a,"iterate",jn),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function oi(e,t,n){return function(...r){const s=this.__v_raw,i=at(s),o=dr(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?Cl:t?Vl:ds;return!t&&le(i,"iterate",l?Ra:jn),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function an(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function wg(){const e={get(i){return ni(this,i)},get size(){return si(this)},has:ri,add:tu,set:eu,delete:nu,clear:ru,forEach:ii(!1,!1)},t={get(i){return ni(this,i,!1,!0)},get size(){return si(this)},has:ri,add:tu,set:eu,delete:nu,clear:ru,forEach:ii(!1,!0)},n={get(i){return ni(this,i,!0)},get size(){return si(this,!0)},has(i){return ri.call(this,i,!0)},add:an("add"),set:an("set"),delete:an("delete"),clear:an("clear"),forEach:ii(!0,!1)},r={get(i){return ni(this,i,!0,!0)},get size(){return si(this,!0)},has(i){return ri.call(this,i,!0)},add:an("add"),set:an("set"),delete:an("delete"),clear:an("clear"),forEach:ii(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=oi(i,!1,!1),n[i]=oi(i,!0,!1),t[i]=oi(i,!1,!0),r[i]=oi(i,!0,!0)}),[e,n,t,r]}const[Ig,Ag,Rg,Cg]=wg();function Pl(e,t){const n=t?e?Cg:Rg:e?Ag:Ig;return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(it(n,s)&&s in r?n:r,s,i)}const Pg={get:Pl(!1,!1)},Sg={get:Pl(!1,!0)},bg={get:Pl(!0,!1)},Af=new WeakMap,Rf=new WeakMap,Cf=new WeakMap,Vg=new WeakMap;function Dg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xg(e){return e.__v_skip||!Object.isExtensible(e)?0:Dg(tg(e))}function eo(e){return vr(e)?e:bl(e,!1,Eg,Pg,Af)}function Pf(e){return bl(e,!1,Tg,Sg,Rf)}function Sl(e){return bl(e,!0,vg,bg,Cf)}function bl(e,t,n,r,s){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=xg(e);if(o===0)return e;const a=new Proxy(e,o===2?r:n);return s.set(e,a),a}function pr(e){return vr(e)?pr(e.__v_raw):!!(e&&e.__v_isReactive)}function vr(e){return!!(e&&e.__v_isReadonly)}function ur(e){return!!(e&&e.__v_isShallow)}function Sf(e){return pr(e)||vr(e)}function at(e){const t=e&&e.__v_raw;return t?at(t):e}function bf(e){return Ci(e,"__v_skip",!0),e}const ds=e=>Et(e)?eo(e):e,Vl=e=>Et(e)?Sl(e):e;class Vf{constructor(t,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Il(()=>t(this._value),()=>Ca(this,1)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=at(this);return Df(t),(!t._cacheable||t.effect.dirty)&&In(t._value,t._value=t.effect.run())&&Ca(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Ng(e,t,n=!1){let r,s;const i=Z(e);return i?(r=e,s=Te):(r=e.get,s=e.set),new Vf(r,s,i||!s,n)}function Df(e){_n&&$n&&(e=at(e),yf($n,e.dep||(e.dep=vf(()=>e.dep=void 0,e instanceof Vf?e:void 0))))}function Ca(e,t=3,n){e=at(e);const r=e.dep;r&&Ef(r,t)}function te(e){return!!(e&&e.__v_isRef===!0)}function Bs(e){return xf(e,!1)}function kg(e){return xf(e,!0)}function xf(e,t){return te(e)?e:new Og(e,t)}class Og{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:at(t),this._value=n?t:ds(t)}get value(){return Df(this),this._value}set value(t){const n=this.__v_isShallow||ur(t)||vr(t);t=n?t:at(t),In(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ds(t),Ca(this,3))}}function ae(e){return te(e)?e.value:e}const Mg={get:(e,t,n)=>ae(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return te(s)&&!te(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Nf(e){return pr(e)?e:new Proxy(e,Mg)}function yn(e,t,n,r){let s;try{s=r?e(...r):e()}catch(i){no(i,t,n)}return s}function we(e,t,n,r){if(Z(e)){const i=yn(e,t,n,r);return i&&cf(i)&&i.catch(o=>{no(o,t,n)}),i}const s=[];for(let i=0;i<e.length;i++)s.push(we(e[i],t,n,r));return s}function no(e,t,n,r=!0){const s=t?t.vnode:null;if(t){let i=t.parent;const o=t.proxy,a=`https://vuejs.org/errors/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){yn(l,null,10,[e,o,a]);return}}Lg(e,n,s,r)}function Lg(e,t,n,r=!0){console.error(e)}let ps=!1,Pa=!1;const Yt=[];let Le=0;const mr=[];let Qe=null,Mn=0;const kf=Promise.resolve();let Dl=null;function Of(e){const t=Dl||kf;return e?t.then(this?e.bind(this):e):t}function Fg(e){let t=Le+1,n=Yt.length;for(;t<n;){const r=t+n>>>1,s=Yt[r],i=ms(s);i<e||i===e&&s.pre?t=r+1:n=r}return t}function xl(e){(!Yt.length||!Yt.includes(e,ps&&e.allowRecurse?Le+1:Le))&&(e.id==null?Yt.push(e):Yt.splice(Fg(e.id),0,e),Mf())}function Mf(){!ps&&!Pa&&(Pa=!0,Dl=kf.then(Ff))}function Bg(e){const t=Yt.indexOf(e);t>Le&&Yt.splice(t,1)}function Ug(e){q(e)?mr.push(...e):(!Qe||!Qe.includes(e,e.allowRecurse?Mn+1:Mn))&&mr.push(e),Mf()}function su(e,t,n=ps?Le+1:0){for(;n<Yt.length;n++){const r=Yt[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Yt.splice(n,1),n--,r()}}}function Lf(e){if(mr.length){const t=[...new Set(mr)];if(mr.length=0,Qe){Qe.push(...t);return}for(Qe=t,Qe.sort((n,r)=>ms(n)-ms(r)),Mn=0;Mn<Qe.length;Mn++)Qe[Mn]();Qe=null,Mn=0}}const ms=e=>e.id==null?1/0:e.id,$g=(e,t)=>{const n=ms(e)-ms(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Ff(e){Pa=!1,ps=!0,Yt.sort($g);try{for(Le=0;Le<Yt.length;Le++){const t=Yt[Le];t&&t.active!==!1&&yn(t,null,14)}}finally{Le=0,Yt.length=0,Lf(),ps=!1,Dl=null,(Yt.length||mr.length)&&Ff()}}function jg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Tt;let s=n;const i=t.startsWith("update:"),o=i&&t.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=r[u]||Tt;f&&(s=n.map(m=>xt(m)?m.trim():m)),h&&(s=n.map(Pi))}let a,l=r[a=zo(t)]||r[a=zo(qe(t))];!l&&i&&(l=r[a=zo(kr(t))]),l&&we(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,we(c,e,6,s)}}function Bf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!Z(e)){const l=c=>{const u=Bf(c,t,!0);u&&(a=!0,Ot(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(Et(e)&&r.set(e,null),null):(q(i)?i.forEach(l=>o[l]=null):Ot(o,i),Et(e)&&r.set(e,o),o)}function ro(e,t){return!e||!Yi(t)?!1:(t=t.slice(2).replace(/Once$/,""),it(e,t[0].toLowerCase()+t.slice(1))||it(e,kr(t))||it(e,t))}let pe=null,so=null;function Si(e){const t=pe;return pe=e,so=e&&e.type.__scopeId||null,t}function Nl(e){so=e}function kl(){so=null}function Ae(e,t=pe,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&gu(-1);const i=Si(t);let o;try{o=e(...s)}finally{Si(i),r._d&&gu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Wo(e){const{type:t,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:m,ctx:E,inheritAttrs:w}=e;let I,P;const N=Si(e);try{if(n.shapeFlag&4){const K=s||r,U=K;I=Me(u.call(U,K,h,i,m,f,E)),P=l}else{const K=t;I=Me(K.length>1?K(i,{attrs:l,slots:a,emit:c}):K(i,null)),P=t.props?l:qg(l)}}catch(K){ss.length=0,no(K,e,1),I=rt(Se)}let L=I;if(P&&w!==!1){const K=Object.keys(P),{shapeFlag:U}=L;K.length&&U&7&&(o&&K.some(El)&&(P=Hg(P,o)),L=An(L,P))}return n.dirs&&(L=An(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),I=L,Si(N),I}const qg=e=>{let t;for(const n in e)(n==="class"||n==="style"||Yi(n))&&((t||(t={}))[n]=e[n]);return t},Hg=(e,t)=>{const n={};for(const r in e)(!El(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function zg(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?iu(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!ro(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?iu(r,o,c):!0:!!o;return!1}function iu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!ro(n,i))return!0}return!1}function Kg({vnode:e,parent:t},n){if(n)for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Uf="components";function Ol(e,t){return Wg(Uf,e,!0,t)||e}const Gg=Symbol.for("v-ndc");function Wg(e,t,n=!0,r=!1){const s=pe||Ft;if(s){const i=s.type;if(e===Uf){const a=z_(i,!1);if(a&&(a===t||a===qe(t)||a===Ji(qe(t))))return i}const o=ou(s[e]||i[e],t)||ou(s.appContext[e],t);return!o&&r?i:o}}function ou(e,t){return e&&(e[t]||e[qe(t)]||e[Ji(qe(t))])}const Qg=e=>e.__isSuspense;function Yg(e,t){t&&t.pendingBranch?q(e)?t.effects.push(...e):t.effects.push(e):Ug(e)}const Xg=Symbol.for("v-scx"),Jg=()=>Pe(Xg),ai={};function ns(e,t,n){return $f(e,t,n)}function $f(e,t,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=Tt){var l;if(t&&i){const U=t;t=(...ut)=>{U(...ut),K()}}const c=mf()===((l=Ft)==null?void 0:l.scope)?Ft:null;let u,h=!1,f=!1;if(te(e)?(u=()=>e.value,h=ur(e)):pr(e)?(u=ur(e)||r===!1?()=>Ye(e,1):()=>Ye(e),h=!0):q(e)?(f=!0,h=e.some(U=>pr(U)||ur(U)),u=()=>e.map(U=>{if(te(U))return U.value;if(pr(U))return Ye(U,ur(U)||r===!1?1:void 0);if(Z(U))return yn(U,c,2)})):Z(e)?t?u=()=>yn(e,c,2):u=()=>{if(!(c&&c.isUnmounted))return m&&m(),we(e,c,3,[E])}:u=Te,t&&r){const U=u;u=()=>Ye(U())}let m,E=U=>{m=L.onStop=()=>{yn(U,c,4),m=L.onStop=void 0}},w;if(co)if(E=Te,t?n&&we(t,c,3,[u(),f?[]:void 0,E]):u(),s==="sync"){const U=Jg();w=U.__watcherHandles||(U.__watcherHandles=[])}else return Te;let I=f?new Array(e.length).fill(ai):ai;const P=()=>{if(!(!L.active||!L.dirty))if(t){const U=L.run();(r||h||(f?U.some((ut,At)=>In(ut,I[At])):In(U,I)))&&(m&&m(),we(t,c,3,[U,I===ai?void 0:f&&I[0]===ai?[]:I,E]),I=U)}else L.run()};P.allowRecurse=!!t;let N;s==="sync"?N=P:s==="post"?N=()=>oe(P,c&&c.suspense):(P.pre=!0,c&&(P.id=c.uid),N=()=>xl(P));const L=new Il(u,Te,N),K=()=>{L.stop(),c&&c.scope&&vl(c.scope.effects,L)};return t?n?P():I=L.run():s==="post"?oe(L.run.bind(L),c&&c.suspense):L.run(),w&&w.push(K),K}function Zg(e,t,n){const r=this.proxy,s=xt(e)?e.includes(".")?jf(r,e):()=>r[e]:e.bind(r,r);let i;Z(t)?i=t:(i=t.handler,n=t);const o=Ft;Tr(this);const a=$f(s,i.bind(r),n);return o?Tr(o):qn(),a}function jf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Ye(e,t,n=0,r){if(!Et(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(r=r||new Set,r.has(e))return e;if(r.add(e),te(e))Ye(e.value,t,n,r);else if(q(e))for(let s=0;s<e.length;s++)Ye(e[s],t,n,r);else if(Nr(e)||dr(e))e.forEach(s=>{Ye(s,t,n,r)});else if(hf(e))for(const s in e)Ye(e[s],t,n,r);return e}function t_(e,t){const n=pe;if(n===null)return e;const r=uo(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,a,l,c=Tt]=t[i];o&&(Z(o)&&(o={mounted:o,updated:o}),o.deep&&Ye(a),s.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Dn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Xn(),we(l,n,8,[e.el,a,e,t]),Jn())}}const hn=Symbol("_leaveCb"),li=Symbol("_enterCb");function e_(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gf(()=>{e.isMounted=!0}),Wf(()=>{e.isUnmounting=!0}),e}const ye=[Function,Array],qf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ye,onEnter:ye,onAfterEnter:ye,onEnterCancelled:ye,onBeforeLeave:ye,onLeave:ye,onAfterLeave:ye,onLeaveCancelled:ye,onBeforeAppear:ye,onAppear:ye,onAfterAppear:ye,onAppearCancelled:ye},n_={name:"BaseTransition",props:qf,setup(e,{slots:t}){const n=U_(),r=e_();let s;return()=>{const i=t.default&&zf(t.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const w of i)if(w.type!==Se){o=w;break}}const a=at(e),{mode:l}=a;if(r.isLeaving)return Qo(o);const c=au(o);if(!c)return Qo(o);const u=Sa(c,a,r,n);ba(c,u);const h=n.subTree,f=h&&au(h);let m=!1;const{getTransitionKey:E}=c.type;if(E){const w=E();s===void 0?s=w:w!==s&&(s=w,m=!0)}if(f&&f.type!==Se&&(!Ln(c,f)||m)){const w=Sa(f,a,r,n);if(ba(f,w),l==="out-in")return r.isLeaving=!0,w.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Qo(o);l==="in-out"&&c.type!==Se&&(w.delayLeave=(I,P,N)=>{const L=Hf(r,f);L[String(f.key)]=f,I[hn]=()=>{P(),I[hn]=void 0,delete u.delayedLeave},u.delayedLeave=N})}return o}}},r_=n_;function Hf(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Sa(e,t,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:m,onLeaveCancelled:E,onBeforeAppear:w,onAppear:I,onAfterAppear:P,onAppearCancelled:N}=t,L=String(e.key),K=Hf(n,e),U=(J,yt)=>{J&&we(J,r,9,yt)},ut=(J,yt)=>{const lt=yt[1];U(J,yt),q(J)?J.every(Nt=>Nt.length<=1)&&lt():J.length<=1&&lt()},At={mode:i,persisted:o,beforeEnter(J){let yt=a;if(!n.isMounted)if(s)yt=w||a;else return;J[hn]&&J[hn](!0);const lt=K[L];lt&&Ln(e,lt)&&lt.el[hn]&&lt.el[hn](),U(yt,[J])},enter(J){let yt=l,lt=c,Nt=u;if(!n.isMounted)if(s)yt=I||l,lt=P||c,Nt=N||u;else return;let B=!1;const dt=J[li]=ne=>{B||(B=!0,ne?U(Nt,[J]):U(lt,[J]),At.delayedLeave&&At.delayedLeave(),J[li]=void 0)};yt?ut(yt,[J,dt]):dt()},leave(J,yt){const lt=String(e.key);if(J[li]&&J[li](!0),n.isUnmounting)return yt();U(h,[J]);let Nt=!1;const B=J[hn]=dt=>{Nt||(Nt=!0,yt(),dt?U(E,[J]):U(m,[J]),J[hn]=void 0,K[lt]===e&&delete K[lt])};K[lt]=e,f?ut(f,[J,B]):B()},clone(J){return Sa(J,t,n,r)}};return At}function Qo(e){if(io(e))return e=An(e),e.children=null,e}function au(e){return io(e)?e.children?e.children[0]:void 0:e}function ba(e,t){e.shapeFlag&6&&e.component?ba(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function zf(e,t=!1,n){let r=[],s=0;for(let i=0;i<e.length;i++){let o=e[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===fe?(o.patchFlag&128&&s++,r=r.concat(zf(o.children,t,a))):(t||o.type!==Se)&&r.push(a!=null?An(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ce(e,t){return Z(e)?Ot({name:e.name},t,{setup:e}):e}const Ei=e=>!!e.type.__asyncLoader,io=e=>e.type.__isKeepAlive;function s_(e,t){Kf(e,"a",t)}function i_(e,t){Kf(e,"da",t)}function Kf(e,t,n=Ft){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(oo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)io(s.parent.vnode)&&o_(r,t,n,s),s=s.parent}}function o_(e,t,n,r){const s=oo(t,e,r,!0);Qf(()=>{vl(r[t],s)},n)}function oo(e,t,n=Ft,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Xn(),Tr(n);const a=we(t,n,e,o);return qn(),Jn(),a});return r?s.unshift(i):s.push(i),i}}const sn=e=>(t,n=Ft)=>(!co||e==="sp")&&oo(e,(...r)=>t(...r),n),a_=sn("bm"),Gf=sn("m"),l_=sn("bu"),c_=sn("u"),Wf=sn("bum"),Qf=sn("um"),u_=sn("sp"),h_=sn("rtg"),f_=sn("rtc");function d_(e,t=Ft){oo("ec",e,t)}function p_(e,t,n,r){let s;const i=n&&n[r];if(q(e)||xt(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,i&&i[o])}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,i&&i[o])}else if(Et(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,i&&i[a]));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=t(e[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const Va=e=>e?ad(e)?uo(e)||e.proxy:Va(e.parent):null,rs=Ot(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Va(e.parent),$root:e=>Va(e.root),$emit:e=>e.emit,$options:e=>Ml(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,xl(e.update)}),$nextTick:e=>e.n||(e.n=Of.bind(e.proxy)),$watch:e=>Zg.bind(e)}),Yo=(e,t)=>e!==Tt&&!e.__isScriptSetup&&it(e,t),m_={get({_:e},t){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Yo(r,t))return o[t]=1,r[t];if(s!==Tt&&it(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&it(c,t))return o[t]=3,i[t];if(n!==Tt&&it(n,t))return o[t]=4,n[t];Da&&(o[t]=0)}}const u=rs[t];let h,f;if(u)return t==="$attrs"&&le(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==Tt&&it(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,it(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Yo(s,t)?(s[t]=n,!0):r!==Tt&&it(r,t)?(r[t]=n,!0):it(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==Tt&&it(e,o)||Yo(t,o)||(a=i[0])&&it(a,o)||it(r,o)||it(rs,o)||it(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:it(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function lu(e){return q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Da=!0;function g_(e){const t=Ml(e),n=e.proxy,r=e.ctx;Da=!1,t.beforeCreate&&cu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:E,activated:w,deactivated:I,beforeDestroy:P,beforeUnmount:N,destroyed:L,unmounted:K,render:U,renderTracked:ut,renderTriggered:At,errorCaptured:J,serverPrefetch:yt,expose:lt,inheritAttrs:Nt,components:B,directives:dt,filters:ne}=t;if(c&&__(c,r,null),o)for(const gt in o){const ht=o[gt];Z(ht)&&(r[gt]=ht.bind(n))}if(s){const gt=s.call(n,n);Et(gt)&&(e.data=eo(gt))}if(Da=!0,i)for(const gt in i){const ht=i[gt],Ge=Z(ht)?ht.bind(n,n):Z(ht.get)?ht.get.bind(n,n):Te,on=!Z(ht)&&Z(ht.set)?ht.set.bind(n):Te,xe=de({get:Ge,set:on});Object.defineProperty(r,gt,{enumerable:!0,configurable:!0,get:()=>xe.value,set:ie=>xe.value=ie})}if(a)for(const gt in a)Yf(a[gt],r,n,gt);if(l){const gt=Z(l)?l.call(n):l;Reflect.ownKeys(gt).forEach(ht=>{vi(ht,gt[ht])})}u&&cu(u,e,"c");function St(gt,ht){q(ht)?ht.forEach(Ge=>gt(Ge.bind(n))):ht&&gt(ht.bind(n))}if(St(a_,h),St(Gf,f),St(l_,m),St(c_,E),St(s_,w),St(i_,I),St(d_,J),St(f_,ut),St(h_,At),St(Wf,N),St(Qf,K),St(u_,yt),q(lt))if(lt.length){const gt=e.exposed||(e.exposed={});lt.forEach(ht=>{Object.defineProperty(gt,ht,{get:()=>n[ht],set:Ge=>n[ht]=Ge})})}else e.exposed||(e.exposed={});U&&e.render===Te&&(e.render=U),Nt!=null&&(e.inheritAttrs=Nt),B&&(e.components=B),dt&&(e.directives=dt)}function __(e,t,n=Te){q(e)&&(e=xa(e));for(const r in e){const s=e[r];let i;Et(s)?"default"in s?i=Pe(s.from||r,s.default,!0):i=Pe(s.from||r):i=Pe(s),te(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function cu(e,t,n){we(q(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Yf(e,t,n,r){const s=r.includes(".")?jf(n,r):()=>n[r];if(xt(e)){const i=t[e];Z(i)&&ns(s,i)}else if(Z(e))ns(s,e.bind(n));else if(Et(e))if(q(e))e.forEach(i=>Yf(i,t,n,r));else{const i=Z(e.handler)?e.handler.bind(n):t[e.handler];Z(i)&&ns(s,i,e)}}function Ml(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>bi(l,c,o,!0)),bi(l,t,o)),Et(t)&&i.set(t,l),l}function bi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&bi(e,i,n,!0),s&&s.forEach(o=>bi(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=y_[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const y_={data:uu,props:hu,emits:hu,methods:Yr,computed:Yr,beforeCreate:re,created:re,beforeMount:re,mounted:re,beforeUpdate:re,updated:re,beforeDestroy:re,beforeUnmount:re,destroyed:re,unmounted:re,activated:re,deactivated:re,errorCaptured:re,serverPrefetch:re,components:Yr,directives:Yr,watch:v_,provide:uu,inject:E_};function uu(e,t){return t?e?function(){return Ot(Z(e)?e.call(this,this):e,Z(t)?t.call(this,this):t)}:t:e}function E_(e,t){return Yr(xa(e),xa(t))}function xa(e){if(q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function re(e,t){return e?[...new Set([].concat(e,t))]:t}function Yr(e,t){return e?Ot(Object.create(null),e,t):t}function hu(e,t){return e?q(e)&&q(t)?[...new Set([...e,...t])]:Ot(Object.create(null),lu(e),lu(t??{})):t}function v_(e,t){if(!e)return t;if(!t)return e;const n=Ot(Object.create(null),e);for(const r in t)n[r]=re(e[r],t[r]);return n}function Xf(){return{app:null,config:{isNativeTag:Jm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let T_=0;function w_(e,t){return function(r,s=null){Z(r)||(r=Ot({},r)),s!=null&&!Et(s)&&(s=null);const i=Xf(),o=new WeakSet;let a=!1;const l=i.app={_uid:T_++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:G_,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&Z(c.install)?(o.add(c),c.install(l,...u)):Z(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!a){const f=rt(r,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(f,c):e(f,c,h),a=!0,l._container=c,c.__vue_app__=l,uo(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){Vi=l;try{return c()}finally{Vi=null}}};return l}}let Vi=null;function vi(e,t){if(Ft){let n=Ft.provides;const r=Ft.parent&&Ft.parent.provides;r===n&&(n=Ft.provides=Object.create(r)),n[e]=t}}function Pe(e,t,n=!1){const r=Ft||pe;if(r||Vi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Vi._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Z(t)?t.call(r&&r.proxy):t}}function I_(e,t,n,r=!1){const s={},i={};Ci(i,lo,1),e.propsDefaults=Object.create(null),Jf(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Pf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function A_(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=at(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(ro(e.emitsOptions,f))continue;const m=t[f];if(l)if(it(i,f))m!==i[f]&&(i[f]=m,c=!0);else{const E=qe(f);s[E]=Na(l,a,E,m,e,!1)}else m!==i[f]&&(i[f]=m,c=!0)}}}else{Jf(e,t,s,i)&&(c=!0);let u;for(const h in a)(!t||!it(t,h)&&((u=kr(h))===h||!it(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=Na(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!it(t,h))&&(delete i[h],c=!0)}c&&Je(e,"set","$attrs")}function Jf(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(_i(l))continue;const c=t[l];let u;s&&it(s,u=qe(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:ro(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=at(n),c=a||Tt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Na(s,l,h,c[h],e,!it(c,h))}}return o}function Na(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=it(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Z(l)){const{propsDefaults:c}=s;n in c?r=c[n]:(Tr(s),r=c[n]=l.call(null,t),qn())}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===kr(n))&&(r=!0))}return r}function Zf(e,t,n=!1){const r=t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!Z(e)){const u=h=>{l=!0;const[f,m]=Zf(h,t,!0);Ot(o,f),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return Et(e)&&r.set(e,fr),fr;if(q(i))for(let u=0;u<i.length;u++){const h=qe(i[u]);fu(h)&&(o[h]=Tt)}else if(i)for(const u in i){const h=qe(u);if(fu(h)){const f=i[u],m=o[h]=q(f)||Z(f)?{type:f}:Ot({},f);if(m){const E=mu(Boolean,m.type),w=mu(String,m.type);m[0]=E>-1,m[1]=w<0||E<w,(E>-1||it(m,"default"))&&a.push(h)}}}const c=[o,a];return Et(e)&&r.set(e,c),c}function fu(e){return e[0]!=="$"}function du(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function pu(e,t){return du(e)===du(t)}function mu(e,t){return q(t)?t.findIndex(n=>pu(n,e)):Z(t)&&pu(t,e)?0:-1}const td=e=>e[0]==="_"||e==="$stable",Ll=e=>q(e)?e.map(Me):[Me(e)],R_=(e,t,n)=>{if(t._n)return t;const r=Ae((...s)=>Ll(t(...s)),n);return r._c=!1,r},ed=(e,t,n)=>{const r=e._ctx;for(const s in e){if(td(s))continue;const i=e[s];if(Z(i))t[s]=R_(s,i,r);else if(i!=null){const o=Ll(i);t[s]=()=>o}}},nd=(e,t)=>{const n=Ll(t);e.slots.default=()=>n},C_=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=at(t),Ci(t,"_",n)):ed(t,e.slots={})}else e.slots={},t&&nd(e,t);Ci(e.slots,lo,1)},P_=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=Tt;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(Ot(s,t),!n&&a===1&&delete s._):(i=!t.$stable,ed(t,s)),o=t}else t&&(nd(e,t),o={default:1});if(i)for(const a in s)!td(a)&&o[a]==null&&delete s[a]};function ka(e,t,n,r,s=!1){if(q(e)){e.forEach((f,m)=>ka(f,t&&(q(t)?t[m]:t),n,r,s));return}if(Ei(r)&&!s)return;const i=r.shapeFlag&4?uo(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Tt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(xt(c)?(u[c]=null,it(h,c)&&(h[c]=null)):te(c)&&(c.value=null)),Z(l))yn(l,a,12,[o,u]);else{const f=xt(l),m=te(l);if(f||m){const E=()=>{if(e.f){const w=f?it(h,l)?h[l]:u[l]:l.value;s?q(w)&&vl(w,i):q(w)?w.includes(i)||w.push(i):f?(u[l]=[i],it(h,l)&&(h[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else f?(u[l]=o,it(h,l)&&(h[l]=o)):m&&(l.value=o,e.k&&(u[e.k]=o))};o?(E.id=-1,oe(E,n)):E()}}}const oe=Yg;function S_(e){return b_(e)}function b_(e,t){const n=ff();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=Te,insertStaticContent:E}=e,w=(d,p,g,_=null,T=null,A=null,x=void 0,S=null,b=!!p.dynamicChildren)=>{if(d===p)return;d&&!Ln(d,p)&&(_=y(d),ie(d,T,A,!0),d=null),p.patchFlag===-2&&(b=!1,p.dynamicChildren=null);const{type:C,ref:k,shapeFlag:z}=p;switch(C){case ao:I(d,p,g,_);break;case Se:P(d,p,g,_);break;case Jo:d==null&&N(p,g,_,x);break;case fe:B(d,p,g,_,T,A,x,S,b);break;default:z&1?U(d,p,g,_,T,A,x,S,b):z&6?dt(d,p,g,_,T,A,x,S,b):(z&64||z&128)&&C.process(d,p,g,_,T,A,x,S,b,V)}k!=null&&T&&ka(k,d&&d.ref,A,p||d,!p)},I=(d,p,g,_)=>{if(d==null)r(p.el=a(p.children),g,_);else{const T=p.el=d.el;p.children!==d.children&&c(T,p.children)}},P=(d,p,g,_)=>{d==null?r(p.el=l(p.children||""),g,_):p.el=d.el},N=(d,p,g,_)=>{[d.el,d.anchor]=E(d.children,p,g,_,d.el,d.anchor)},L=({el:d,anchor:p},g,_)=>{let T;for(;d&&d!==p;)T=f(d),r(d,g,_),d=T;r(p,g,_)},K=({el:d,anchor:p})=>{let g;for(;d&&d!==p;)g=f(d),s(d),d=g;s(p)},U=(d,p,g,_,T,A,x,S,b)=>{p.type==="svg"?x="svg":p.type==="math"&&(x="mathml"),d==null?ut(p,g,_,T,A,x,S,b):yt(d,p,T,A,x,S,b)},ut=(d,p,g,_,T,A,x,S)=>{let b,C;const{props:k,shapeFlag:z,transition:j,dirs:Q}=d;if(b=d.el=o(d.type,A,k&&k.is,k),z&8?u(b,d.children):z&16&&J(d.children,b,null,_,T,Xo(d,A),x,S),Q&&Dn(d,null,_,"created"),At(b,d,d.scopeId,x,_),k){for(const _t in k)_t!=="value"&&!_i(_t)&&i(b,_t,null,k[_t],A,d.children,_,T,Kt);"value"in k&&i(b,"value",null,k.value,A),(C=k.onVnodeBeforeMount)&&ke(C,_,d)}Q&&Dn(d,null,_,"beforeMount");const et=V_(T,j);et&&j.beforeEnter(b),r(b,p,g),((C=k&&k.onVnodeMounted)||et||Q)&&oe(()=>{C&&ke(C,_,d),et&&j.enter(b),Q&&Dn(d,null,_,"mounted")},T)},At=(d,p,g,_,T)=>{if(g&&m(d,g),_)for(let A=0;A<_.length;A++)m(d,_[A]);if(T){let A=T.subTree;if(p===A){const x=T.vnode;At(d,x,x.scopeId,x.slotScopeIds,T.parent)}}},J=(d,p,g,_,T,A,x,S,b=0)=>{for(let C=b;C<d.length;C++){const k=d[C]=S?fn(d[C]):Me(d[C]);w(null,k,p,g,_,T,A,x,S)}},yt=(d,p,g,_,T,A,x)=>{const S=p.el=d.el;let{patchFlag:b,dynamicChildren:C,dirs:k}=p;b|=d.patchFlag&16;const z=d.props||Tt,j=p.props||Tt;let Q;if(g&&xn(g,!1),(Q=j.onVnodeBeforeUpdate)&&ke(Q,g,p,d),k&&Dn(p,d,g,"beforeUpdate"),g&&xn(g,!0),C?lt(d.dynamicChildren,C,S,g,_,Xo(p,T),A):x||ht(d,p,S,null,g,_,Xo(p,T),A,!1),b>0){if(b&16)Nt(S,p,z,j,g,_,T);else if(b&2&&z.class!==j.class&&i(S,"class",null,j.class,T),b&4&&i(S,"style",z.style,j.style,T),b&8){const et=p.dynamicProps;for(let _t=0;_t<et.length;_t++){const Rt=et[_t],Mt=z[Rt],Ie=j[Rt];(Ie!==Mt||Rt==="value")&&i(S,Rt,Mt,Ie,T,d.children,g,_,Kt)}}b&1&&d.children!==p.children&&u(S,p.children)}else!x&&C==null&&Nt(S,p,z,j,g,_,T);((Q=j.onVnodeUpdated)||k)&&oe(()=>{Q&&ke(Q,g,p,d),k&&Dn(p,d,g,"updated")},_)},lt=(d,p,g,_,T,A,x)=>{for(let S=0;S<p.length;S++){const b=d[S],C=p[S],k=b.el&&(b.type===fe||!Ln(b,C)||b.shapeFlag&70)?h(b.el):g;w(b,C,k,null,_,T,A,x,!0)}},Nt=(d,p,g,_,T,A,x)=>{if(g!==_){if(g!==Tt)for(const S in g)!_i(S)&&!(S in _)&&i(d,S,g[S],null,x,p.children,T,A,Kt);for(const S in _){if(_i(S))continue;const b=_[S],C=g[S];b!==C&&S!=="value"&&i(d,S,C,b,x,p.children,T,A,Kt)}"value"in _&&i(d,"value",g.value,_.value,x)}},B=(d,p,g,_,T,A,x,S,b)=>{const C=p.el=d?d.el:a(""),k=p.anchor=d?d.anchor:a("");let{patchFlag:z,dynamicChildren:j,slotScopeIds:Q}=p;Q&&(S=S?S.concat(Q):Q),d==null?(r(C,g,_),r(k,g,_),J(p.children,g,k,T,A,x,S,b)):z>0&&z&64&&j&&d.dynamicChildren?(lt(d.dynamicChildren,j,g,T,A,x,S),(p.key!=null||T&&p===T.subTree)&&rd(d,p,!0)):ht(d,p,g,k,T,A,x,S,b)},dt=(d,p,g,_,T,A,x,S,b)=>{p.slotScopeIds=S,d==null?p.shapeFlag&512?T.ctx.activate(p,g,_,x,b):ne(p,g,_,T,A,x,b):Ke(d,p,b)},ne=(d,p,g,_,T,A,x)=>{const S=d.component=B_(d,_,T);if(io(d)&&(S.ctx.renderer=V),$_(S),S.asyncDep){if(T&&T.registerDep(S,St),!d.el){const b=S.subTree=rt(Se);P(null,b,p,g)}}else St(S,d,p,g,T,A,x)},Ke=(d,p,g)=>{const _=p.component=d.component;if(zg(d,p,g))if(_.asyncDep&&!_.asyncResolved){gt(_,p,g);return}else _.next=p,Bg(_.update),_.effect.dirty=!0,_.update();else p.el=d.el,_.vnode=p},St=(d,p,g,_,T,A,x)=>{const S=()=>{if(d.isMounted){let{next:k,bu:z,u:j,parent:Q,vnode:et}=d;{const sr=sd(d);if(sr){k&&(k.el=et.el,gt(d,k,x)),sr.asyncDep.then(()=>{d.isUnmounted||S()});return}}let _t=k,Rt;xn(d,!1),k?(k.el=et.el,gt(d,k,x)):k=et,z&&yi(z),(Rt=k.props&&k.props.onVnodeBeforeUpdate)&&ke(Rt,Q,k,et),xn(d,!0);const Mt=Wo(d),Ie=d.subTree;d.subTree=Mt,w(Ie,Mt,h(Ie.el),y(Ie),d,T,A),k.el=Mt.el,_t===null&&Kg(d,Mt.el),j&&oe(j,T),(Rt=k.props&&k.props.onVnodeUpdated)&&oe(()=>ke(Rt,Q,k,et),T)}else{let k;const{el:z,props:j}=p,{bm:Q,m:et,parent:_t}=d,Rt=Ei(p);if(xn(d,!1),Q&&yi(Q),!Rt&&(k=j&&j.onVnodeBeforeMount)&&ke(k,_t,p),xn(d,!0),z&&ft){const Mt=()=>{d.subTree=Wo(d),ft(z,d.subTree,d,T,null)};Rt?p.type.__asyncLoader().then(()=>!d.isUnmounted&&Mt()):Mt()}else{const Mt=d.subTree=Wo(d);w(null,Mt,g,_,d,T,A),p.el=Mt.el}if(et&&oe(et,T),!Rt&&(k=j&&j.onVnodeMounted)){const Mt=p;oe(()=>ke(k,_t,Mt),T)}(p.shapeFlag&256||_t&&Ei(_t.vnode)&&_t.vnode.shapeFlag&256)&&d.a&&oe(d.a,T),d.isMounted=!0,p=g=_=null}},b=d.effect=new Il(S,Te,()=>xl(C),d.scope),C=d.update=()=>{b.dirty&&b.run()};C.id=d.uid,xn(d,!0),C()},gt=(d,p,g)=>{p.component=d;const _=d.vnode.props;d.vnode=p,d.next=null,A_(d,p.props,_,g),P_(d,p.children,g),Xn(),su(d),Jn()},ht=(d,p,g,_,T,A,x,S,b=!1)=>{const C=d&&d.children,k=d?d.shapeFlag:0,z=p.children,{patchFlag:j,shapeFlag:Q}=p;if(j>0){if(j&128){on(C,z,g,_,T,A,x,S,b);return}else if(j&256){Ge(C,z,g,_,T,A,x,S,b);return}}Q&8?(k&16&&Kt(C,T,A),z!==C&&u(g,z)):k&16?Q&16?on(C,z,g,_,T,A,x,S,b):Kt(C,T,A,!0):(k&8&&u(g,""),Q&16&&J(z,g,_,T,A,x,S,b))},Ge=(d,p,g,_,T,A,x,S,b)=>{d=d||fr,p=p||fr;const C=d.length,k=p.length,z=Math.min(C,k);let j;for(j=0;j<z;j++){const Q=p[j]=b?fn(p[j]):Me(p[j]);w(d[j],Q,g,null,T,A,x,S,b)}C>k?Kt(d,T,A,!0,!1,z):J(p,g,_,T,A,x,S,b,z)},on=(d,p,g,_,T,A,x,S,b)=>{let C=0;const k=p.length;let z=d.length-1,j=k-1;for(;C<=z&&C<=j;){const Q=d[C],et=p[C]=b?fn(p[C]):Me(p[C]);if(Ln(Q,et))w(Q,et,g,null,T,A,x,S,b);else break;C++}for(;C<=z&&C<=j;){const Q=d[z],et=p[j]=b?fn(p[j]):Me(p[j]);if(Ln(Q,et))w(Q,et,g,null,T,A,x,S,b);else break;z--,j--}if(C>z){if(C<=j){const Q=j+1,et=Q<k?p[Q].el:_;for(;C<=j;)w(null,p[C]=b?fn(p[C]):Me(p[C]),g,et,T,A,x,S,b),C++}}else if(C>j)for(;C<=z;)ie(d[C],T,A,!0),C++;else{const Q=C,et=C,_t=new Map;for(C=et;C<=j;C++){const ue=p[C]=b?fn(p[C]):Me(p[C]);ue.key!=null&&_t.set(ue.key,C)}let Rt,Mt=0;const Ie=j-et+1;let sr=!1,Kc=0;const qr=new Array(Ie);for(C=0;C<Ie;C++)qr[C]=0;for(C=Q;C<=z;C++){const ue=d[C];if(Mt>=Ie){ie(ue,T,A,!0);continue}let Ne;if(ue.key!=null)Ne=_t.get(ue.key);else for(Rt=et;Rt<=j;Rt++)if(qr[Rt-et]===0&&Ln(ue,p[Rt])){Ne=Rt;break}Ne===void 0?ie(ue,T,A,!0):(qr[Ne-et]=C+1,Ne>=Kc?Kc=Ne:sr=!0,w(ue,p[Ne],g,null,T,A,x,S,b),Mt++)}const Gc=sr?D_(qr):fr;for(Rt=Gc.length-1,C=Ie-1;C>=0;C--){const ue=et+C,Ne=p[ue],Wc=ue+1<k?p[ue+1].el:_;qr[C]===0?w(null,Ne,g,Wc,T,A,x,S,b):sr&&(Rt<0||C!==Gc[Rt]?xe(Ne,g,Wc,2):Rt--)}}},xe=(d,p,g,_,T=null)=>{const{el:A,type:x,transition:S,children:b,shapeFlag:C}=d;if(C&6){xe(d.component.subTree,p,g,_);return}if(C&128){d.suspense.move(p,g,_);return}if(C&64){x.move(d,p,g,V);return}if(x===fe){r(A,p,g);for(let z=0;z<b.length;z++)xe(b[z],p,g,_);r(d.anchor,p,g);return}if(x===Jo){L(d,p,g);return}if(_!==2&&C&1&&S)if(_===0)S.beforeEnter(A),r(A,p,g),oe(()=>S.enter(A),T);else{const{leave:z,delayLeave:j,afterLeave:Q}=S,et=()=>r(A,p,g),_t=()=>{z(A,()=>{et(),Q&&Q()})};j?j(A,et,_t):_t()}else r(A,p,g)},ie=(d,p,g,_=!1,T=!1)=>{const{type:A,props:x,ref:S,children:b,dynamicChildren:C,shapeFlag:k,patchFlag:z,dirs:j}=d;if(S!=null&&ka(S,null,g,d,!0),k&256){p.ctx.deactivate(d);return}const Q=k&1&&j,et=!Ei(d);let _t;if(et&&(_t=x&&x.onVnodeBeforeUnmount)&&ke(_t,p,d),k&6)ei(d.component,g,_);else{if(k&128){d.suspense.unmount(g,_);return}Q&&Dn(d,null,p,"beforeUnmount"),k&64?d.type.remove(d,p,g,T,V,_):C&&(A!==fe||z>0&&z&64)?Kt(C,p,g,!1,!0):(A===fe&&z&384||!T&&k&16)&&Kt(b,p,g),_&&nr(d)}(et&&(_t=x&&x.onVnodeUnmounted)||Q)&&oe(()=>{_t&&ke(_t,p,d),Q&&Dn(d,null,p,"unmounted")},g)},nr=d=>{const{type:p,el:g,anchor:_,transition:T}=d;if(p===fe){rr(g,_);return}if(p===Jo){K(d);return}const A=()=>{s(g),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(d.shapeFlag&1&&T&&!T.persisted){const{leave:x,delayLeave:S}=T,b=()=>x(g,A);S?S(d.el,A,b):b()}else A()},rr=(d,p)=>{let g;for(;d!==p;)g=f(d),s(d),d=g;s(p)},ei=(d,p,g)=>{const{bum:_,scope:T,update:A,subTree:x,um:S}=d;_&&yi(_),T.stop(),A&&(A.active=!1,ie(x,d,p,g)),S&&oe(S,p),oe(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Kt=(d,p,g,_=!1,T=!1,A=0)=>{for(let x=A;x<d.length;x++)ie(d[x],p,g,_,T)},y=d=>d.shapeFlag&6?y(d.component.subTree):d.shapeFlag&128?d.suspense.next():f(d.anchor||d.el),O=(d,p,g)=>{d==null?p._vnode&&ie(p._vnode,null,null,!0):w(p._vnode||null,d,p,null,null,null,g),su(),Lf(),p._vnode=d},V={p:w,um:ie,m:xe,r:nr,mt:ne,mc:J,pc:ht,pbc:lt,n:y,o:e};let $,ft;return t&&([$,ft]=t(V)),{render:O,hydrate:$,createApp:w_(O,$)}}function Xo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function xn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function V_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function rd(e,t,n=!1){const r=e.children,s=t.children;if(q(r)&&q(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=fn(s[i]),a.el=o.el),n||rd(o,a)),a.type===ao&&(a.el=o.el)}}function D_(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function sd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:sd(t)}const x_=e=>e.__isTeleport,fe=Symbol.for("v-fgt"),ao=Symbol.for("v-txt"),Se=Symbol.for("v-cmt"),Jo=Symbol.for("v-stc"),ss=[];let Re=null;function Xt(e=!1){ss.push(Re=e?null:[])}function N_(){ss.pop(),Re=ss[ss.length-1]||null}let gs=1;function gu(e){gs+=e}function id(e){return e.dynamicChildren=gs>0?Re||fr:null,N_(),gs>0&&Re&&Re.push(e),e}function me(e,t,n,r,s,i){return id(X(e,t,n,r,s,i,!0))}function Fl(e,t,n,r,s){return id(rt(e,t,n,r,s,!0))}function Oa(e){return e?e.__v_isVNode===!0:!1}function Ln(e,t){return e.type===t.type&&e.key===t.key}const lo="__vInternal",od=({key:e})=>e??null,Ti=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?xt(e)||te(e)||Z(e)?{i:pe,r:e,k:t,f:!!n}:e:null);function X(e,t=null,n=null,r=0,s=null,i=e===fe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&od(t),ref:t&&Ti(t),scopeId:so,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:pe};return a?(Bl(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=xt(n)?8:16),gs>0&&!o&&Re&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Re.push(l),l}const rt=k_;function k_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Gg)&&(e=Se),Oa(e)){const a=An(e,t,!0);return n&&Bl(a,n),gs>0&&!i&&Re&&(a.shapeFlag&6?Re[Re.indexOf(e)]=a:Re.push(a)),a.patchFlag|=-2,a}if(K_(e)&&(e=e.__vccOpts),t){t=O_(t);let{class:a,style:l}=t;a&&!xt(a)&&(t.class=Zi(a)),Et(l)&&(Sf(l)&&!q(l)&&(l=Ot({},l)),t.style=He(l))}const o=xt(e)?1:Qg(e)?128:x_(e)?64:Et(e)?4:Z(e)?2:0;return X(e,t,n,r,s,o,i,!0)}function O_(e){return e?Sf(e)||lo in e?Ot({},e):e:null}function An(e,t,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=e,a=t?M_(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&od(a),ref:t&&t.ref?n&&s?q(s)?s.concat(Ti(t)):[s,Ti(t)]:Ti(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&An(e.ssContent),ssFallback:e.ssFallback&&An(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Oe(e=" ",t=0){return rt(ao,null,e,t)}function T1(e="",t=!1){return t?(Xt(),Fl(Se,null,e)):rt(Se,null,e)}function Me(e){return e==null||typeof e=="boolean"?rt(Se):q(e)?rt(fe,null,e.slice()):typeof e=="object"?fn(e):rt(ao,null,String(e))}function fn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:An(e)}function Bl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(q(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Bl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(lo in t)?t._ctx=pe:s===3&&pe&&(pe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:pe},n=32):(t=String(t),r&64?(n=16,t=[Oe(t)]):n=8);e.children=t,e.shapeFlag|=n}function M_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Zi([t.class,r.class]));else if(s==="style")t.style=He([t.style,r.style]);else if(Yi(s)){const i=t[s],o=r[s];o&&i!==o&&!(q(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function ke(e,t,n,r=null){we(e,t,7,[n,r])}const L_=Xf();let F_=0;function B_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||L_,i={uid:F_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new hg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zf(r,s),emitsOptions:Bf(r,s),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:r.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=jg.bind(null,i),e.ce&&e.ce(i),i}let Ft=null;const U_=()=>Ft||pe;let Ul,Ma;{const e=ff(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ul=t("__VUE_INSTANCE_SETTERS__",n=>Ft=n),Ma=t("__VUE_SSR_SETTERS__",n=>co=n)}const Tr=e=>{Ul(e),e.scope.on()},qn=()=>{Ft&&Ft.scope.off(),Ul(null)};function ad(e){return e.vnode.shapeFlag&4}let co=!1;function $_(e,t=!1){t&&Ma(t);const{props:n,children:r}=e.vnode,s=ad(e);I_(e,n,s,t),C_(e,r);const i=s?j_(e,t):void 0;return t&&Ma(!1),i}function j_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=bf(new Proxy(e.ctx,m_));const{setup:r}=n;if(r){const s=e.setupContext=r.length>1?H_(e):null;Tr(e),Xn();const i=yn(r,e,0,[e.props,s]);if(Jn(),qn(),cf(i)){if(i.then(qn,qn),t)return i.then(o=>{_u(e,o,t)}).catch(o=>{no(o,e,0)});e.asyncDep=i}else _u(e,i,t)}else ld(e,t)}function _u(e,t,n){Z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=Nf(t)),ld(e,n)}let yu;function ld(e,t,n){const r=e.type;if(!e.render){if(!t&&yu&&!r.render){const s=r.template||Ml(e).template;if(s){const{isCustomElement:i,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Ot(Ot({isCustomElement:i,delimiters:a},o),l);r.render=yu(s,c)}}e.render=r.render||Te}{Tr(e),Xn();try{g_(e)}finally{Jn(),qn()}}}function q_(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return le(e,"get","$attrs"),t[n]}}))}function H_(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return q_(e)},slots:e.slots,emit:e.emit,expose:t}}function uo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Nf(bf(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in rs)return rs[n](e)},has(t,n){return n in t||n in rs}}))}function z_(e,t=!0){return Z(e)?e.displayName||e.name:e.name||t&&e.__name}function K_(e){return Z(e)&&"__vccOpts"in e}const de=(e,t)=>Ng(e,t,co);function $l(e,t,n){const r=arguments.length;return r===2?Et(t)&&!q(t)?Oa(t)?rt(e,null,[t]):rt(e,t):rt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Oa(n)&&(n=[n]),rt(e,t,n))}const G_="3.4.3",W_="http://www.w3.org/2000/svg",Q_="http://www.w3.org/1998/Math/MathML",dn=typeof document<"u"?document:null,Eu=dn&&dn.createElement("template"),Y_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?dn.createElementNS(W_,e):t==="mathml"?dn.createElementNS(Q_,e):dn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>dn.createTextNode(e),createComment:e=>dn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>dn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Eu.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=Eu.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ln="transition",Hr="animation",_s=Symbol("_vtc"),jl=(e,{slots:t})=>$l(r_,X_(e),t);jl.displayName="Transition";const cd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};jl.props=Ot({},qf,cd);const Nn=(e,t=[])=>{q(e)?e.forEach(n=>n(...t)):e&&e(...t)},vu=e=>e?q(e)?e.some(t=>t.length>1):e.length>1:!1;function X_(e){const t={};for(const B in e)B in cd||(t[B]=e[B]);if(e.css===!1)return t;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,E=J_(s),w=E&&E[0],I=E&&E[1],{onBeforeEnter:P,onEnter:N,onEnterCancelled:L,onLeave:K,onLeaveCancelled:U,onBeforeAppear:ut=P,onAppear:At=N,onAppearCancelled:J=L}=t,yt=(B,dt,ne)=>{kn(B,dt?u:a),kn(B,dt?c:o),ne&&ne()},lt=(B,dt)=>{B._isLeaving=!1,kn(B,h),kn(B,m),kn(B,f),dt&&dt()},Nt=B=>(dt,ne)=>{const Ke=B?At:N,St=()=>yt(dt,B,ne);Nn(Ke,[dt,St]),Tu(()=>{kn(dt,B?l:i),cn(dt,B?u:a),vu(Ke)||wu(dt,r,w,St)})};return Ot(t,{onBeforeEnter(B){Nn(P,[B]),cn(B,i),cn(B,o)},onBeforeAppear(B){Nn(ut,[B]),cn(B,l),cn(B,c)},onEnter:Nt(!1),onAppear:Nt(!0),onLeave(B,dt){B._isLeaving=!0;const ne=()=>lt(B,dt);cn(B,h),ey(),cn(B,f),Tu(()=>{B._isLeaving&&(kn(B,h),cn(B,m),vu(K)||wu(B,r,I,ne))}),Nn(K,[B,ne])},onEnterCancelled(B){yt(B,!1),Nn(L,[B])},onAppearCancelled(B){yt(B,!0),Nn(J,[B])},onLeaveCancelled(B){lt(B),Nn(U,[B])}})}function J_(e){if(e==null)return null;if(Et(e))return[Zo(e.enter),Zo(e.leave)];{const t=Zo(e);return[t,t]}}function Zo(e){return rg(e)}function cn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[_s]||(e[_s]=new Set)).add(t)}function kn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[_s];n&&(n.delete(t),n.size||(e[_s]=void 0))}function Tu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Z_=0;function wu(e,t,n,r){const s=e._endId=++Z_,i=()=>{s===e._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=ty(e,t);if(!o)return r();const c=o+"end";let u=0;const h=()=>{e.removeEventListener(c,f),i()},f=m=>{m.target===e&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),e.addEventListener(c,f)}function ty(e,t){const n=window.getComputedStyle(e),r=E=>(n[E]||"").split(", "),s=r(`${ln}Delay`),i=r(`${ln}Duration`),o=Iu(s,i),a=r(`${Hr}Delay`),l=r(`${Hr}Duration`),c=Iu(a,l);let u=null,h=0,f=0;t===ln?o>0&&(u=ln,h=o,f=i.length):t===Hr?c>0&&(u=Hr,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?ln:Hr:null,f=u?u===ln?i.length:l.length:0);const m=u===ln&&/\b(transform|all)(,|$)/.test(r(`${ln}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:m}}function Iu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Au(n)+Au(e[r])))}function Au(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ey(){return document.body.offsetHeight}function ny(e,t,n){const r=e[_s];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ql=Symbol("_vod"),ry={beforeMount(e,{value:t},{transition:n}){e[ql]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):zr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),zr(e,!0),r.enter(e)):r.leave(e,()=>{zr(e,!1)}):zr(e,t))},beforeUnmount(e,{value:t}){zr(e,t)}};function zr(e,t){e.style.display=t?e[ql]:"none"}const sy=Symbol("");function iy(e,t,n){const r=e.style,s=xt(n);if(n&&!s){if(t&&!xt(t))for(const i in t)n[i]==null&&La(r,i,"");for(const i in n)La(r,i,n[i])}else{const i=r.display;if(s){if(t!==n){const o=r[sy];o&&(n+=";"+o),r.cssText=n}}else t&&e.removeAttribute("style");ql in e&&(r.display=i)}}const Ru=/\s*!important$/;function La(e,t,n){if(q(n))n.forEach(r=>La(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=oy(e,t);Ru.test(n)?e.setProperty(kr(r),n.replace(Ru,""),"important"):e[r]=n}}const Cu=["Webkit","Moz","ms"],ta={};function oy(e,t){const n=ta[t];if(n)return n;let r=qe(t);if(r!=="filter"&&r in e)return ta[t]=r;r=Ji(r);for(let s=0;s<Cu.length;s++){const i=Cu[s]+r;if(i in e)return ta[t]=i}return t}const Pu="http://www.w3.org/1999/xlink";function ay(e,t,n,r,s){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Pu,t.slice(6,t.length)):e.setAttributeNS(Pu,t,n);else{const i=cg(t);n==null||i&&!df(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function ly(e,t,n,r,s,i,o){if(t==="innerHTML"||t==="textContent"){r&&o(r,s,i),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=df(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function mn(e,t,n,r){e.addEventListener(t,n,r)}function cy(e,t,n,r){e.removeEventListener(t,n,r)}const Su=Symbol("_vei");function uy(e,t,n,r,s=null){const i=e[Su]||(e[Su]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=hy(t);if(r){const c=i[t]=py(r,s);mn(e,a,c,l)}else o&&(cy(e,a,o,l),i[t]=void 0)}}const bu=/(?:Once|Passive|Capture)$/;function hy(e){let t;if(bu.test(e)){t={};let r;for(;r=e.match(bu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):kr(e.slice(2)),t]}let ea=0;const fy=Promise.resolve(),dy=()=>ea||(fy.then(()=>ea=0),ea=Date.now());function py(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;we(my(r,n.value),t,5,[r])};return n.value=e,n.attached=dy(),n}function my(e,t){if(q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Vu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,gy=(e,t,n,r,s,i,o,a,l)=>{const c=s==="svg";t==="class"?ny(e,r,c):t==="style"?iy(e,n,r):Yi(t)?El(t)||uy(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):_y(e,t,r,c))?ly(e,t,r,i,o,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ay(e,t,r,c))};function _y(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Vu(t)&&Z(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Vu(t)&&xt(n)?!1:t in e}const wr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return q(t)?n=>yi(t,n):t};function yy(e){e.target.composing=!0}function Du(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ze=Symbol("_assign"),w1={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Ze]=wr(s);const i=r||s.props&&s.props.type==="number";mn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=Pi(a)),e[Ze](a)}),n&&mn(e,"change",()=>{e.value=e.value.trim()}),t||(mn(e,"compositionstart",yy),mn(e,"compositionend",Du),mn(e,"change",Du))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},i){if(e[Ze]=wr(i),e.composing)return;const o=s||e.type==="number"?Pi(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===a)||(e.value=a))}},I1={deep:!0,created(e,t,n){e[Ze]=wr(n),mn(e,"change",()=>{const r=e._modelValue,s=ys(e),i=e.checked,o=e[Ze];if(q(r)){const a=wl(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Nr(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(ud(e,i))})},mounted:xu,beforeUpdate(e,t,n){e[Ze]=wr(n),xu(e,t,n)}};function xu(e,{value:t,oldValue:n},r){e._modelValue=t,q(t)?e.checked=wl(t,r.props.value)>-1:Nr(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=Fs(t,ud(e,!0)))}const A1={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=Nr(t);mn(e,"change",()=>{const i=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Pi(ys(o)):ys(o));e[Ze](e.multiple?s?new Set(i):i:i[0])}),e[Ze]=wr(r)},mounted(e,{value:t}){Nu(e,t)},beforeUpdate(e,t,n){e[Ze]=wr(n)},updated(e,{value:t}){Nu(e,t)}};function Nu(e,t){const n=e.multiple;if(!(n&&!q(t)&&!Nr(t))){for(let r=0,s=e.options.length;r<s;r++){const i=e.options[r],o=ys(i);if(n)q(t)?i.selected=wl(t,o)>-1:i.selected=t.has(o);else if(Fs(ys(i),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ys(e){return"_value"in e?e._value:e.value}function ud(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Ey=["ctrl","shift","alt","meta"],vy={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Ey.some(n=>e[`${n}Key`]&&!t.includes(n))},R1=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=vy[t[o]];if(a&&a(s,t))return}return e(s,...i)})},Ty=Ot({patchProp:gy},Y_);let ku;function wy(){return ku||(ku=S_(Ty))}const Iy=(...e)=>{const t=wy().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=Ry(r);if(!s)return;const i=t._component;!Z(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,Ay(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function Ay(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ry(e){return xt(e)?document.querySelector(e):e}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const or=typeof window<"u";function Cy(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const pt=Object.assign;function na(e,t){const n={};for(const r in t){const s=t[r];n[r]=be(s)?s.map(e):e(s)}return n}const is=()=>{},be=Array.isArray,Py=/\/$/,Sy=e=>e.replace(Py,"");function ra(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=xy(r??t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function by(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ou(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Vy(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ir(t.matched[r],n.matched[s])&&hd(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ir(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function hd(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Dy(e[n],t[n]))return!1;return!0}function Dy(e,t){return be(e)?Mu(e,t):be(t)?Mu(t,e):e===t}function Mu(e,t){return be(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function xy(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Es;(function(e){e.pop="pop",e.push="push"})(Es||(Es={}));var os;(function(e){e.back="back",e.forward="forward",e.unknown=""})(os||(os={}));function Ny(e){if(!e)if(or){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Sy(e)}const ky=/^[^#]+#/;function Oy(e,t){return e.replace(ky,"#")+t}function My(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const ho=()=>({left:window.pageXOffset,top:window.pageYOffset});function Ly(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=My(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Lu(e,t){return(history.state?history.state.position-t:-1)+e}const Fa=new Map;function Fy(e,t){Fa.set(e,t)}function By(e){const t=Fa.get(e);return Fa.delete(e),t}let Uy=()=>location.protocol+"//"+location.host;function fd(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let a=s.includes(e.slice(i))?e.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Ou(l,"")}return Ou(n,e)+r+s}function $y(e,t,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const m=fd(e,location),E=n.value,w=t.value;let I=0;if(f){if(n.value=m,t.value=f,o&&o===E){o=null;return}I=w?f.position-w.position:0}else r(m);s.forEach(P=>{P(n.value,E,{delta:I,type:Es.pop,direction:I?I>0?os.forward:os.back:os.unknown})})};function l(){o=n.value}function c(f){s.push(f);const m=()=>{const E=s.indexOf(f);E>-1&&s.splice(E,1)};return i.push(m),m}function u(){const{history:f}=window;f.state&&f.replaceState(pt({},f.state,{scroll:ho()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Fu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?ho():null}}function jy(e){const{history:t,location:n}=window,r={value:fd(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=e.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:Uy()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(m){console.error(m),n[u?"replace":"assign"](f)}}function o(l,c){const u=pt({},t.state,Fu(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=pt({},s.value,t.state,{forward:l,scroll:ho()});i(u.current,u,!0);const h=pt({},Fu(r.value,l,null),{position:u.position+1},c);i(l,h,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function qy(e){e=Ny(e);const t=jy(e),n=$y(e,t.state,t.location,t.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=pt({location:"",base:e,go:r,createHref:Oy.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Hy(e){return typeof e=="string"||e&&typeof e=="object"}function dd(e){return typeof e=="string"||typeof e=="symbol"}const un={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},pd=Symbol("");var Bu;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Bu||(Bu={}));function Ar(e,t){return pt(new Error,{type:e,[pd]:!0},t)}function We(e,t){return e instanceof Error&&pd in e&&(t==null||!!(e.type&t))}const Uu="[^/]+?",zy={sensitive:!1,strict:!1,start:!0,end:!0},Ky=/[.+*?^${}()[\]/\\]/g;function Gy(e,t){const n=pt({},zy,t),r=[];let s=n.start?"^":"";const i=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const f=c[h];let m=40+(n.sensitive?.25:0);if(f.type===0)h||(s+="/"),s+=f.value.replace(Ky,"\\$&"),m+=40;else if(f.type===1){const{value:E,repeatable:w,optional:I,regexp:P}=f;i.push({name:E,repeatable:w,optional:I});const N=P||Uu;if(N!==Uu){m+=10;try{new RegExp(`(${N})`)}catch(K){throw new Error(`Invalid custom RegExp for param "${E}" (${N}): `+K.message)}}let L=w?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;h||(L=I&&c.length<2?`(?:/${L})`:"/"+L),I&&(L+="?"),s+=L,m+=20,I&&(m+=-8),w&&(m+=-20),N===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const m=u[f]||"",E=i[f-1];h[E.name]=m&&E.repeatable?m.split("/"):m}return h}function l(c){let u="",h=!1;for(const f of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const m of f)if(m.type===0)u+=m.value;else if(m.type===1){const{value:E,repeatable:w,optional:I}=m,P=E in c?c[E]:"";if(be(P)&&!w)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const N=be(P)?P.join("/"):P;if(!N)if(I)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${E}"`);u+=N}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Wy(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Qy(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Wy(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if($u(r))return 1;if($u(s))return-1}return s.length-r.length}function $u(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Yy={type:0,value:""},Xy=/[a-zA-Z0-9_]/;function Jy(e){if(!e)return[[]];if(e==="/")return[[Yy]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:Xy.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function Zy(e,t,n){const r=Gy(Jy(e.path),n),s=pt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function tE(e,t){const n=[],r=new Map;t=Hu({strict:!1,end:!0,sensitive:!1},t);function s(u){return r.get(u)}function i(u,h,f){const m=!f,E=eE(u);E.aliasOf=f&&f.record;const w=Hu(t,u),I=[E];if("alias"in u){const L=typeof u.alias=="string"?[u.alias]:u.alias;for(const K of L)I.push(pt({},E,{components:f?f.record.components:E.components,path:K,aliasOf:f?f.record:E}))}let P,N;for(const L of I){const{path:K}=L;if(h&&K[0]!=="/"){const U=h.record.path,ut=U[U.length-1]==="/"?"":"/";L.path=h.record.path+(K&&ut+K)}if(P=Zy(L,h,w),f?f.alias.push(P):(N=N||P,N!==P&&N.alias.push(P),m&&u.name&&!qu(P)&&o(u.name)),E.children){const U=E.children;for(let ut=0;ut<U.length;ut++)i(U[ut],P,f&&f.children[ut])}f=f||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&l(P)}return N?()=>{o(N)}:is}function o(u){if(dd(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&Qy(u,n[h])>=0&&(u.record.path!==n[h].record.path||!md(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!qu(u)&&r.set(u.record.name,u)}function c(u,h){let f,m={},E,w;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Ar(1,{location:u});w=f.record.name,m=pt(ju(h.params,f.keys.filter(N=>!N.optional).map(N=>N.name)),u.params&&ju(u.params,f.keys.map(N=>N.name))),E=f.stringify(m)}else if("path"in u)E=u.path,f=n.find(N=>N.re.test(E)),f&&(m=f.parse(E),w=f.record.name);else{if(f=h.name?r.get(h.name):n.find(N=>N.re.test(h.path)),!f)throw Ar(1,{location:u,currentLocation:h});w=f.record.name,m=pt({},h.params,u.params),E=f.stringify(m)}const I=[];let P=f;for(;P;)I.unshift(P.record),P=P.parent;return{name:w,path:E,params:m,matched:I,meta:rE(I)}}return e.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function ju(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function eE(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:nE(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function nE(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function qu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function rE(e){return e.reduce((t,n)=>pt(t,n.meta),{})}function Hu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function md(e,t){return t.children.some(n=>n===e||md(e,n))}const gd=/#/g,sE=/&/g,iE=/\//g,oE=/=/g,aE=/\?/g,_d=/\+/g,lE=/%5B/g,cE=/%5D/g,yd=/%5E/g,uE=/%60/g,Ed=/%7B/g,hE=/%7C/g,vd=/%7D/g,fE=/%20/g;function Hl(e){return encodeURI(""+e).replace(hE,"|").replace(lE,"[").replace(cE,"]")}function dE(e){return Hl(e).replace(Ed,"{").replace(vd,"}").replace(yd,"^")}function Ba(e){return Hl(e).replace(_d,"%2B").replace(fE,"+").replace(gd,"%23").replace(sE,"%26").replace(uE,"`").replace(Ed,"{").replace(vd,"}").replace(yd,"^")}function pE(e){return Ba(e).replace(oE,"%3D")}function mE(e){return Hl(e).replace(gd,"%23").replace(aE,"%3F")}function gE(e){return e==null?"":mE(e).replace(iE,"%2F")}function Di(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function _E(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(_d," "),o=i.indexOf("="),a=Di(o<0?i:i.slice(0,o)),l=o<0?null:Di(i.slice(o+1));if(a in t){let c=t[a];be(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function zu(e){let t="";for(let n in e){const r=e[n];if(n=pE(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(be(r)?r.map(i=>i&&Ba(i)):[r&&Ba(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function yE(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=be(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const EE=Symbol(""),Ku=Symbol(""),fo=Symbol(""),zl=Symbol(""),Ua=Symbol("");function Kr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function pn(e,t,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Ar(4,{from:n,to:t})):h instanceof Error?a(h):Hy(h)?a(Ar(2,{from:t,to:h})):(i&&r.enterCallbacks[s]===i&&typeof h=="function"&&i.push(h),o())},c=e.call(r&&r.instances[s],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function sa(e,t,n,r){const s=[];for(const i of e)for(const o in i.components){let a=i.components[o];if(!(t!=="beforeRouteEnter"&&!i.instances[o]))if(vE(a)){const c=(a.__vccOpts||a)[t];c&&s.push(pn(c,n,r,i,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const u=Cy(c)?c.default:c;i.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&pn(f,n,r,i,o)()}))}}return s}function vE(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Gu(e){const t=Pe(fo),n=Pe(zl),r=de(()=>t.resolve(ae(e.to))),s=de(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Ir.bind(null,u));if(f>-1)return f;const m=Wu(l[c-2]);return c>1&&Wu(u)===m&&h[h.length-1].path!==m?h.findIndex(Ir.bind(null,l[c-2])):f}),i=de(()=>s.value>-1&&AE(n.params,r.value.params)),o=de(()=>s.value>-1&&s.value===n.matched.length-1&&hd(n.params,r.value.params));function a(l={}){return IE(l)?t[ae(e.replace)?"replace":"push"](ae(e.to)).catch(is):Promise.resolve()}return{route:r,href:de(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const TE=ce({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Gu,setup(e,{slots:t}){const n=eo(Gu(e)),{options:r}=Pe(fo),s=de(()=>({[Qu(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:$l("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),wE=TE;function IE(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function AE(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!be(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Wu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Qu=(e,t,n)=>e??t??n,RE=ce({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Pe(Ua),s=de(()=>e.route||r.value),i=Pe(Ku,0),o=de(()=>{let c=ae(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=de(()=>s.value.matched[o.value]);vi(Ku,de(()=>o.value+1)),vi(EE,a),vi(Ua,s);const l=Bs();return ns(()=>[l.value,a.value,e.name],([c,u,h],[f,m,E])=>{u&&(u.instances[h]=c,m&&m!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!Ir(u,m)||!f)&&(u.enterCallbacks[h]||[]).forEach(w=>w(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=a.value,f=h&&h.components[u];if(!f)return Yu(n.default,{Component:f,route:c});const m=h.props[u],E=m?m===!0?c.params:typeof m=="function"?m(c):m:null,I=$l(f,pt({},E,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Yu(n.default,{Component:I,route:c})||I}}});function Yu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Td=RE;function CE(e){const t=tE(e.routes,e),n=e.parseQuery||_E,r=e.stringifyQuery||zu,s=e.history,i=Kr(),o=Kr(),a=Kr(),l=kg(un);let c=un;or&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=na.bind(null,y=>""+y),h=na.bind(null,gE),f=na.bind(null,Di);function m(y,O){let V,$;return dd(y)?(V=t.getRecordMatcher(y),$=O):$=y,t.addRoute($,V)}function E(y){const O=t.getRecordMatcher(y);O&&t.removeRoute(O)}function w(){return t.getRoutes().map(y=>y.record)}function I(y){return!!t.getRecordMatcher(y)}function P(y,O){if(O=pt({},O||l.value),typeof y=="string"){const g=ra(n,y,O.path),_=t.resolve({path:g.path},O),T=s.createHref(g.fullPath);return pt(g,_,{params:f(_.params),hash:Di(g.hash),redirectedFrom:void 0,href:T})}let V;if("path"in y)V=pt({},y,{path:ra(n,y.path,O.path).path});else{const g=pt({},y.params);for(const _ in g)g[_]==null&&delete g[_];V=pt({},y,{params:h(g)}),O.params=h(O.params)}const $=t.resolve(V,O),ft=y.hash||"";$.params=u(f($.params));const d=by(r,pt({},y,{hash:dE(ft),path:$.path})),p=s.createHref(d);return pt({fullPath:d,hash:ft,query:r===zu?yE(y.query):y.query||{}},$,{redirectedFrom:void 0,href:p})}function N(y){return typeof y=="string"?ra(n,y,l.value.path):pt({},y)}function L(y,O){if(c!==y)return Ar(8,{from:O,to:y})}function K(y){return At(y)}function U(y){return K(pt(N(y),{replace:!0}))}function ut(y){const O=y.matched[y.matched.length-1];if(O&&O.redirect){const{redirect:V}=O;let $=typeof V=="function"?V(y):V;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=N($):{path:$},$.params={}),pt({query:y.query,hash:y.hash,params:"path"in $?{}:y.params},$)}}function At(y,O){const V=c=P(y),$=l.value,ft=y.state,d=y.force,p=y.replace===!0,g=ut(V);if(g)return At(pt(N(g),{state:typeof g=="object"?pt({},ft,g.state):ft,force:d,replace:p}),O||V);const _=V;_.redirectedFrom=O;let T;return!d&&Vy(r,$,V)&&(T=Ar(16,{to:_,from:$}),xe($,$,!0,!1)),(T?Promise.resolve(T):lt(_,$)).catch(A=>We(A)?We(A,2)?A:on(A):ht(A,_,$)).then(A=>{if(A){if(We(A,2))return At(pt({replace:p},N(A.to),{state:typeof A.to=="object"?pt({},ft,A.to.state):ft,force:d}),O||_)}else A=B(_,$,!0,p,ft);return Nt(_,$,A),A})}function J(y,O){const V=L(y,O);return V?Promise.reject(V):Promise.resolve()}function yt(y){const O=rr.values().next().value;return O&&typeof O.runWithContext=="function"?O.runWithContext(y):y()}function lt(y,O){let V;const[$,ft,d]=PE(y,O);V=sa($.reverse(),"beforeRouteLeave",y,O);for(const g of $)g.leaveGuards.forEach(_=>{V.push(pn(_,y,O))});const p=J.bind(null,y,O);return V.push(p),Kt(V).then(()=>{V=[];for(const g of i.list())V.push(pn(g,y,O));return V.push(p),Kt(V)}).then(()=>{V=sa(ft,"beforeRouteUpdate",y,O);for(const g of ft)g.updateGuards.forEach(_=>{V.push(pn(_,y,O))});return V.push(p),Kt(V)}).then(()=>{V=[];for(const g of d)if(g.beforeEnter)if(be(g.beforeEnter))for(const _ of g.beforeEnter)V.push(pn(_,y,O));else V.push(pn(g.beforeEnter,y,O));return V.push(p),Kt(V)}).then(()=>(y.matched.forEach(g=>g.enterCallbacks={}),V=sa(d,"beforeRouteEnter",y,O),V.push(p),Kt(V))).then(()=>{V=[];for(const g of o.list())V.push(pn(g,y,O));return V.push(p),Kt(V)}).catch(g=>We(g,8)?g:Promise.reject(g))}function Nt(y,O,V){a.list().forEach($=>yt(()=>$(y,O,V)))}function B(y,O,V,$,ft){const d=L(y,O);if(d)return d;const p=O===un,g=or?history.state:{};V&&($||p?s.replace(y.fullPath,pt({scroll:p&&g&&g.scroll},ft)):s.push(y.fullPath,ft)),l.value=y,xe(y,O,V,p),on()}let dt;function ne(){dt||(dt=s.listen((y,O,V)=>{if(!ei.listening)return;const $=P(y),ft=ut($);if(ft){At(pt(ft,{replace:!0}),$).catch(is);return}c=$;const d=l.value;or&&Fy(Lu(d.fullPath,V.delta),ho()),lt($,d).catch(p=>We(p,12)?p:We(p,2)?(At(p.to,$).then(g=>{We(g,20)&&!V.delta&&V.type===Es.pop&&s.go(-1,!1)}).catch(is),Promise.reject()):(V.delta&&s.go(-V.delta,!1),ht(p,$,d))).then(p=>{p=p||B($,d,!1),p&&(V.delta&&!We(p,8)?s.go(-V.delta,!1):V.type===Es.pop&&We(p,20)&&s.go(-1,!1)),Nt($,d,p)}).catch(is)}))}let Ke=Kr(),St=Kr(),gt;function ht(y,O,V){on(y);const $=St.list();return $.length?$.forEach(ft=>ft(y,O,V)):console.error(y),Promise.reject(y)}function Ge(){return gt&&l.value!==un?Promise.resolve():new Promise((y,O)=>{Ke.add([y,O])})}function on(y){return gt||(gt=!y,ne(),Ke.list().forEach(([O,V])=>y?V(y):O()),Ke.reset()),y}function xe(y,O,V,$){const{scrollBehavior:ft}=e;if(!or||!ft)return Promise.resolve();const d=!V&&By(Lu(y.fullPath,0))||($||!V)&&history.state&&history.state.scroll||null;return Of().then(()=>ft(y,O,d)).then(p=>p&&Ly(p)).catch(p=>ht(p,y,O))}const ie=y=>s.go(y);let nr;const rr=new Set,ei={currentRoute:l,listening:!0,addRoute:m,removeRoute:E,hasRoute:I,getRoutes:w,resolve:P,options:e,push:K,replace:U,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:St.add,isReady:Ge,install(y){const O=this;y.component("RouterLink",wE),y.component("RouterView",Td),y.config.globalProperties.$router=O,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>ae(l)}),or&&!nr&&l.value===un&&(nr=!0,K(s.location).catch(ft=>{}));const V={};for(const ft in un)Object.defineProperty(V,ft,{get:()=>l.value[ft],enumerable:!0});y.provide(fo,O),y.provide(zl,Pf(V)),y.provide(Ua,l);const $=y.unmount;rr.add(y),y.unmount=function(){rr.delete(y),rr.size<1&&(c=un,dt&&dt(),dt=null,l.value=un,nr=!1,gt=!1),$()}}};function Kt(y){return y.reduce((O,V)=>O.then(()=>yt(V)),Promise.resolve())}return ei}function PE(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const a=t.matched[o];a&&(e.matched.find(c=>Ir(c,a))?r.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Ir(c,l))||s.push(l))}return[n,r,s]}function SE(){return Pe(fo)}function C1(){return Pe(zl)}const bE=X("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"},null,-1),VE=[bE],wd=ce({__name:"IconGithub",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",{style:He({fill:t.color??"#fff"}),viewBox:"0 0 98 96",xmlns:"http://www.w3.org/2000/svg"},VE,4))}}),DE=ce({__name:"IconHome",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",{style:He({fill:t.color??"#fff"}),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[X("path",{style:He({fill:t.color??"#fff"}),d:"M512 128 128 447.936V896h255.936V640H640v256h255.936V447.936z"},null,4)],4))}}),xE={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},NE=ce({__name:"IconMenu",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",xE,[X("path",{style:He({stroke:t.color??"#fff"}),id:"Vector",d:"M11 17H19M5 12H19M11 7H19","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,4)]))}}),Kl=e=>(Nl("data-v-65c2ff7b"),e=e(),kl(),e),kE={class:"bar"},OE=Kl(()=>X("span",{id:"bingo"},"BINGO",-1)),ME={class:"mobile-menu-container"},LE={class:"menu-container"},FE={target:"_blank",rel:"noopener noreferrer",href:"https://github.com/BelgianNoise",class:"github"},BE={class:"mobile-menu-slide-in"},UE=Kl(()=>X("hr",null,null,-1)),$E=Kl(()=>X("hr",null,null,-1)),jE=ce({__name:"HeaderComponent",setup(e){SE().afterEach((r,s)=>{r.fullPath!==s.fullPath&&(n.value=!1)});let n=Bs(!1);return(r,s)=>{const i=Ol("RouterLink");return Xt(),me("header",{class:Zi({mobileSlideOutVisible:ae(n)})},[X("div",kE,[OE,X("div",ME,[rt(i,{to:"/"},{default:Ae(()=>[rt(DE,{color:"var(--color-foreground)",class:"icon"})]),_:1}),X("button",{onClick:s[0]||(s[0]=o=>te(n)?n.value=!ae(n):n=!ae(n))},[rt(NE,{color:"var(--color-foreground)",class:"icon"})])]),X("div",LE,[rt(i,{to:"/"},{default:Ae(()=>[Oe(" Home ")]),_:1}),rt(i,{to:"/pricing"},{default:Ae(()=>[Oe(" Pricing ")]),_:1}),rt(i,{to:"/create"},{default:Ae(()=>[Oe(" Create New ")]),_:1}),X("a",FE,[rt(wd,{class:"icon",color:"var(--color-foreground)"})])])]),rt(jl,{name:"slide"},{default:Ae(()=>[t_(X("div",BE,[rt(i,{to:"/"},{default:Ae(()=>[Oe(" Home ")]),_:1}),UE,rt(i,{to:"/pricing"},{default:Ae(()=>[Oe(" Pricing ")]),_:1}),$E,rt(i,{to:"/create"},{default:Ae(()=>[Oe(" Create New ")]),_:1})],512),[[ry,ae(n)]])]),_:1})],2)}}}),Us=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},qE=Us(jE,[["__scopeId","data-v-65c2ff7b"]]),HE="/linkedin.png",zE={viewBox:"0 -28.5 256 256",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid",fill:"transparent"},KE=ce({__name:"IconDiscord",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",zE,[X("g",null,[X("path",{style:He({fill:t.color??"#5865F2"}),d:"M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z","fill-rule":"nonzero"},null,4)])]))}}),po=e=>(Nl("data-v-4de5ad3e"),e=e(),kl(),e),GE=po(()=>X("hr",null,null,-1)),WE=po(()=>X("p",{class:"disclaimer"}," Since you do not require an account to use this app, all data is public in some way or another. Please do not keep any sensitive data in your games, and do not try to circumvent the makeshift security and ruin the fun for others. ",-1)),QE=po(()=>X("p",null,[Oe(" made by "),X("span",{class:"name"},"Arthur Joppart"),Oe(" using "),X("a",{class:"vue-green",href:"https://vuejs.org/",target:"_blank",rel:"noreferrer"},"Vue.js")],-1)),YE={class:"socials"},XE={href:"https://github.com/BelgianNoise",target:"_blank",rel:"noreferrer"},JE=po(()=>X("a",{href:"https://www.linkedin.com/in/arthur-joppart-728a7817a/",target:"_blank",rel:"noreferrer"},[X("img",{src:HE,alt:"linkedin"})],-1)),ZE={href:"https://discordapp.com/users/125339040613531648",target:"_blank",rel:"noreferrer"},tv=ce({__name:"FooterComponent",setup(e){return(t,n)=>(Xt(),me("footer",null,[GE,WE,QE,X("div",YE,[X("a",XE,[rt(wd)]),JE,X("a",ZE,[rt(KE,{color:"var(--color-foreground-light)"})])])]))}}),ev=Us(tv,[["__scopeId","data-v-4de5ad3e"]]),nv=ce({__name:"App",setup(e){return(t,n)=>(Xt(),me(fe,null,[rt(qE),X("main",null,[rt(ae(Td))]),rt(ev)],64))}}),rv=Us(nv,[["__scopeId","data-v-b64a8fb7"]]),sv="modulepreload",iv=function(e){return"/"+e},Xu={},ia=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(o=>{if(o=iv(o),o in Xu)return;Xu[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":sv,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var Ju={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},ov=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],o=e[n++],a=e[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Ad={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,a=o?e[s+1]:0,l=s+2<e.length,c=l?e[s+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(f=64)),r.push(n[u],n[h],n[f],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Id(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ov(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const c=s<e.length?n[e.charAt(s)]:64;++s;const h=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||a==null||c==null||h==null)throw new av;const f=i<<2|a>>4;if(r.push(f),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class av extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lv=function(e){const t=Id(e);return Ad.encodeByteArray(t,!0)},xi=function(e){return lv(e).replace(/\./g,"")},cv=function(e){try{return Ad.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=()=>uv().__FIREBASE_DEFAULTS__,fv=()=>{if(typeof process>"u"||typeof Ju>"u")return;const e=Ju.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},dv=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&cv(e[1]);return t&&JSON.parse(t)},Rd=()=>{try{return hv()||fv()||dv()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},pv=e=>{var t,n;return(n=(t=Rd())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},mv=e=>{const t=pv(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Cd=()=>{var e;return(e=Rd())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xi(JSON.stringify(n)),xi(JSON.stringify(o)),""].join(".")}function yv(){try{return typeof indexedDB=="object"}catch{return!1}}function Ev(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="FirebaseError";class Or extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=vv,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pd.prototype.create)}}class Pd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?Tv(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Or(s,a,r)}}function Tv(e,t){return e.replace(wv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const wv=/\{\$([^}]+)}/g;function $a(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],o=t[s];if(Zu(i)&&Zu(o)){if(!$a(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Zu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(e){return e&&e._delegate?e._delegate:e}class vs{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new gv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Rv(t))try{this.getOrInitializeService({instanceIdentifier:On})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=On){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=On){return this.instances.has(t)}getOptions(t=On){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&t(o,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Av(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=On){return this.component?this.component.multipleInstances?t:On:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Av(e){return e===On?void 0:e}function Rv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Iv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ot||(ot={}));const Pv={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},Sv=ot.INFO,bv={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},Vv=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=bv[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Sd{constructor(t){this.name=t,this._logLevel=Sv,this._logHandler=Vv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Pv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...t),this._logHandler(this,ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...t),this._logHandler(this,ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...t),this._logHandler(this,ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...t),this._logHandler(this,ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...t),this._logHandler(this,ot.ERROR,...t)}}const Dv=(e,t)=>t.some(n=>e instanceof n);let th,eh;function xv(){return th||(th=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nv(){return eh||(eh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bd=new WeakMap,ja=new WeakMap,Vd=new WeakMap,oa=new WeakMap,Gl=new WeakMap;function kv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(En(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&bd.set(n,e)}).catch(()=>{}),Gl.set(t,e),t}function Ov(e){if(ja.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});ja.set(e,t)}let qa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ja.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Vd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return En(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Mv(e){qa=e(qa)}function Lv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(aa(this),t,...n);return Vd.set(r,t.sort?t.sort():[t]),En(r)}:Nv().includes(e)?function(...t){return e.apply(aa(this),t),En(bd.get(this))}:function(...t){return En(e.apply(aa(this),t))}}function Fv(e){return typeof e=="function"?Lv(e):(e instanceof IDBTransaction&&Ov(e),Dv(e,xv())?new Proxy(e,qa):e)}function En(e){if(e instanceof IDBRequest)return kv(e);if(oa.has(e))return oa.get(e);const t=Fv(e);return t!==e&&(oa.set(e,t),Gl.set(t,e)),t}const aa=e=>Gl.get(e);function Bv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=En(o);return r&&o.addEventListener("upgradeneeded",l=>{r(En(o.result),l.oldVersion,l.newVersion,En(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Uv=["get","getKey","getAll","getAllKeys","count"],$v=["put","add","delete","clear"],la=new Map;function nh(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(la.get(t))return la.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=$v.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Uv.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return la.set(t,i),i}Mv(e=>({...e,get:(t,n,r)=>nh(t,n)||e.get(t,n,r),has:(t,n)=>!!nh(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qv(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ha="@firebase/app",rh="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new Sd("@firebase/app"),Hv="@firebase/app-compat",zv="@firebase/analytics-compat",Kv="@firebase/analytics",Gv="@firebase/app-check-compat",Wv="@firebase/app-check",Qv="@firebase/auth",Yv="@firebase/auth-compat",Xv="@firebase/database",Jv="@firebase/database-compat",Zv="@firebase/functions",tT="@firebase/functions-compat",eT="@firebase/installations",nT="@firebase/installations-compat",rT="@firebase/messaging",sT="@firebase/messaging-compat",iT="@firebase/performance",oT="@firebase/performance-compat",aT="@firebase/remote-config",lT="@firebase/remote-config-compat",cT="@firebase/storage",uT="@firebase/storage-compat",hT="@firebase/firestore",fT="@firebase/firestore-compat",dT="firebase",pT="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="[DEFAULT]",mT={[Ha]:"fire-core",[Hv]:"fire-core-compat",[Kv]:"fire-analytics",[zv]:"fire-analytics-compat",[Wv]:"fire-app-check",[Gv]:"fire-app-check-compat",[Qv]:"fire-auth",[Yv]:"fire-auth-compat",[Xv]:"fire-rtdb",[Jv]:"fire-rtdb-compat",[Zv]:"fire-fn",[tT]:"fire-fn-compat",[eT]:"fire-iid",[nT]:"fire-iid-compat",[rT]:"fire-fcm",[sT]:"fire-fcm-compat",[iT]:"fire-perf",[oT]:"fire-perf-compat",[aT]:"fire-rc",[lT]:"fire-rc-compat",[cT]:"fire-gcs",[uT]:"fire-gcs-compat",[hT]:"fire-fst",[fT]:"fire-fst-compat","fire-js":"fire-js",[dT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new Map,Ka=new Map;function gT(e,t){try{e.container.addComponent(t)}catch(n){Gn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ki(e){const t=e.name;if(Ka.has(t))return Gn.debug(`There were multiple attempts to register component ${t}.`),!1;Ka.set(t,e);for(const n of Ni.values())gT(n,e);return!0}function _T(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},vn=new Pd("app","Firebase",yT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=pT;function Dd(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:za,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw vn.create("bad-app-name",{appName:String(s)});if(n||(n=Cd()),!n)throw vn.create("no-options");const i=Ni.get(s);if(i){if($a(n,i.options)&&$a(r,i.config))return i;throw vn.create("duplicate-app",{appName:s})}const o=new Cv(s);for(const l of Ka.values())o.addComponent(l);const a=new ET(n,r,o);return Ni.set(s,a),a}function TT(e=za){const t=Ni.get(e);if(!t&&e===za&&Cd())return Dd();if(!t)throw vn.create("no-app",{appName:e});return t}function gr(e,t,n){var r;let s=(r=mT[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${t}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Gn.warn(a.join(" "));return}ki(new vs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firebase-heartbeat-database",IT=1,Ts="firebase-heartbeat-store";let ca=null;function xd(){return ca||(ca=Bv(wT,IT,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Ts)}}}).catch(e=>{throw vn.create("idb-open",{originalErrorMessage:e.message})})),ca}async function AT(e){try{return await(await xd()).transaction(Ts).objectStore(Ts).get(Nd(e))}catch(t){if(t instanceof Or)Gn.warn(t.message);else{const n=vn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Gn.warn(n.message)}}}async function sh(e,t){try{const r=(await xd()).transaction(Ts,"readwrite");await r.objectStore(Ts).put(t,Nd(e)),await r.done}catch(n){if(n instanceof Or)Gn.warn(n.message);else{const r=vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}function Nd(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=1024,CT=30*24*60*60*1e3;class PT{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ih();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=CT}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ih(),{heartbeatsToSend:r,unsentEntries:s}=ST(this._heartbeatsCache.heartbeats),i=xi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ih(){return new Date().toISOString().substring(0,10)}function ST(e,t=RT){const n=[];let r=e.slice();for(const s of e){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),oh(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),oh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yv()?Ev().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return sh(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return sh(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function oh(e){return xi(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(e){ki(new vs("platform-logger",t=>new jv(t),"PRIVATE")),ki(new vs("heartbeat",t=>new PT(t),"PRIVATE")),gr(Ha,rh,e),gr(Ha,rh,"esm2017"),gr("fire-js","")}VT("");var DT="firebase",xT="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(DT,xT,"app");var NT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D,Wl=Wl||{},W=NT||self;function mo(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function $s(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function kT(e){return Object.prototype.hasOwnProperty.call(e,ua)&&e[ua]||(e[ua]=++OT)}var ua="closure_uid_"+(1e9*Math.random()>>>0),OT=0;function MT(e,t,n){return e.call.apply(e.bind,arguments)}function LT(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),e.apply(t,s)}}return function(){return e.apply(t,arguments)}}function Jt(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Jt=MT:Jt=LT,Jt.apply(null,arguments)}function ci(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ut(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[s].apply(r,o)}}function Sn(){this.s=this.s,this.o=this.o}var FT=0;Sn.prototype.s=!1;Sn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),FT!=0)&&kT(this)};Sn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kd=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ql(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ah(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(mo(r)){const s=e.length||0,i=r.length||0;e.length=s+i;for(let o=0;o<i;o++)e[s+o]=r[o]}else e.push(r)}}function Zt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var BT=function(){if(!W.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};W.addEventListener("test",n,t),W.removeEventListener("test",n,t)}catch{}return e}();function ws(e){return/^[\s\xa0]*$/.test(e)}function go(){var e=W.navigator;return e&&(e=e.userAgent)?e:""}function Fe(e){return go().indexOf(e)!=-1}function Yl(e){return Yl[" "](e),e}Yl[" "]=function(){};function UT(e,t){var n=xw;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var $T=Fe("Opera"),Rr=Fe("Trident")||Fe("MSIE"),Od=Fe("Edge"),Ga=Od||Rr,Md=Fe("Gecko")&&!(go().toLowerCase().indexOf("webkit")!=-1&&!Fe("Edge"))&&!(Fe("Trident")||Fe("MSIE"))&&!Fe("Edge"),jT=go().toLowerCase().indexOf("webkit")!=-1&&!Fe("Edge");function Ld(){var e=W.document;return e?e.documentMode:void 0}var Wa;t:{var ha="",fa=function(){var e=go();if(Md)return/rv:([^\);]+)(\)|;)/.exec(e);if(Od)return/Edge\/([\d\.]+)/.exec(e);if(Rr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(jT)return/WebKit\/(\S+)/.exec(e);if($T)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(fa&&(ha=fa?fa[1]:""),Rr){var da=Ld();if(da!=null&&da>parseFloat(ha)){Wa=String(da);break t}}Wa=ha}var Qa;if(W.document&&Rr){var lh=Ld();Qa=lh||parseInt(Wa,10)||void 0}else Qa=void 0;var qT=Qa;function Is(e,t){if(Zt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Md){t:{try{Yl(t.nodeName);var s=!0;break t}catch{}s=!1}s||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:HT[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Is.$.h.call(this)}}Ut(Is,Zt);var HT={2:"touch",3:"pen",4:"mouse"};Is.prototype.h=function(){Is.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var js="closure_listenable_"+(1e6*Math.random()|0),zT=0;function KT(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++zT,this.fa=this.ia=!1}function _o(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Xl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function GT(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Fd(e){const t={};for(const n in e)t[n]=e[n];return t}const ch="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bd(e,t){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)e[n]=r[n];for(let i=0;i<ch.length;i++)n=ch[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function yo(e){this.src=e,this.g={},this.h=0}yo.prototype.add=function(e,t,n,r,s){var i=e.toString();e=this.g[i],e||(e=this.g[i]=[],this.h++);var o=Xa(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new KT(t,this.src,i,!!r,s),t.ia=n,e.push(t)),t};function Ya(e,t){var n=t.type;if(n in e.g){var r=e.g[n],s=kd(r,t),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(_o(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Xa(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}var Jl="closure_lm_"+(1e6*Math.random()|0),pa={};function Ud(e,t,n,r,s){if(r&&r.once)return jd(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Ud(e,t[i],n,r,s);return null}return n=ec(n),e&&e[js]?e.O(t,n,$s(r)?!!r.capture:!!r,s):$d(e,t,n,!1,r,s)}function $d(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=$s(s)?!!s.capture:!!s,a=tc(e);if(a||(e[Jl]=a=new yo(e)),n=a.add(t,n,r,o,i),n.proxy)return n;if(r=WT(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)BT||(s=o),s===void 0&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Hd(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function WT(){function e(n){return t.call(e.src,e.listener,n)}const t=QT;return e}function jd(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)jd(e,t[i],n,r,s);return null}return n=ec(n),e&&e[js]?e.P(t,n,$s(r)?!!r.capture:!!r,s):$d(e,t,n,!0,r,s)}function qd(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)qd(e,t[i],n,r,s);else r=$s(r)?!!r.capture:!!r,n=ec(n),e&&e[js]?(e=e.i,t=String(t).toString(),t in e.g&&(i=e.g[t],n=Xa(i,n,r,s),-1<n&&(_o(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete e.g[t],e.h--)))):e&&(e=tc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Xa(t,n,r,s)),(n=-1<e?t[e]:null)&&Zl(n))}function Zl(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[js])Ya(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Hd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tc(t))?(Ya(n,e),n.h==0&&(n.src=null,t[Jl]=null)):_o(e)}}}function Hd(e){return e in pa?pa[e]:pa[e]="on"+e}function QT(e,t){if(e.fa)e=!0;else{t=new Is(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Zl(e),e=n.call(r,t)}return e}function tc(e){return e=e[Jl],e instanceof yo?e:null}var ma="__closure_events_fn_"+(1e9*Math.random()>>>0);function ec(e){return typeof e=="function"?e:(e[ma]||(e[ma]=function(t){return e.handleEvent(t)}),e[ma])}function Bt(){Sn.call(this),this.i=new yo(this),this.S=this,this.J=null}Ut(Bt,Sn);Bt.prototype[js]=!0;Bt.prototype.removeEventListener=function(e,t,n,r){qd(this,e,t,n,r)};function Ht(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Zt(t,e);else if(t instanceof Zt)t.target=t.target||e;else{var s=t;t=new Zt(r,e),Bd(t,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=ui(o,r,!0,t)&&s}if(o=t.g=e,s=ui(o,r,!0,t)&&s,s=ui(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)o=t.g=n[i],s=ui(o,r,!1,t)&&s}Bt.prototype.N=function(){if(Bt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)_o(n[r]);delete e.g[t],e.h--}}this.J=null};Bt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Bt.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function ui(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Ya(e.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var nc=W.JSON.stringify;class YT{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function XT(){var e=rc;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class JT{constructor(){this.h=this.g=null}add(t,n){const r=zd.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var zd=new YT(()=>new ZT,e=>e.reset());class ZT{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function tw(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ew(e){W.setTimeout(()=>{throw e},0)}let As,Rs=!1,rc=new JT,Kd=()=>{const e=W.Promise.resolve(void 0);As=()=>{e.then(nw)}};var nw=()=>{for(var e;e=XT();){try{e.h.call(e.g)}catch(n){ew(n)}var t=zd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Rs=!1};function Eo(e,t){Bt.call(this),this.h=e||1,this.g=t||W,this.j=Jt(this.qb,this),this.l=Date.now()}Ut(Eo,Bt);D=Eo.prototype;D.ga=!1;D.T=null;D.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ht(this,"tick"),this.ga&&(sc(this),this.start()))}};D.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function sc(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}D.N=function(){Eo.$.N.call(this),sc(this),delete this.g};function ic(e,t,n){if(typeof e=="function")n&&(e=Jt(e,n));else if(e&&typeof e.handleEvent=="function")e=Jt(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:W.setTimeout(e,t||0)}function Gd(e){e.g=ic(()=>{e.g=null,e.i&&(e.i=!1,Gd(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class rw extends Sn{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Gd(this)}N(){super.N(),this.g&&(W.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(e){Sn.call(this),this.h=e,this.g={}}Ut(Cs,Sn);var uh=[];function Wd(e,t,n,r){Array.isArray(n)||(n&&(uh[0]=n.toString()),n=uh);for(var s=0;s<n.length;s++){var i=Ud(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Qd(e){Xl(e.g,function(t,n){this.g.hasOwnProperty(n)&&Zl(t)},e),e.g={}}Cs.prototype.N=function(){Cs.$.N.call(this),Qd(this)};Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vo(){this.g=!0}vo.prototype.Ea=function(){this.g=!1};function sw(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+`
`+n+`
`+o})}function iw(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+`
`+n+`
`+i+" "+o})}function hr(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+aw(e,n)+(r?" "+r:"")})}function ow(e,t){e.info(function(){return"TIMEOUT: "+t})}vo.prototype.info=function(){};function aw(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return nc(n)}catch{return t}}var Zn={},hh=null;function To(){return hh=hh||new Bt}Zn.Ta="serverreachability";function Yd(e){Zt.call(this,Zn.Ta,e)}Ut(Yd,Zt);function Ps(e){const t=To();Ht(t,new Yd(t))}Zn.STAT_EVENT="statevent";function Xd(e,t){Zt.call(this,Zn.STAT_EVENT,e),this.stat=t}Ut(Xd,Zt);function se(e){const t=To();Ht(t,new Xd(t,e))}Zn.Ua="timingevent";function Jd(e,t){Zt.call(this,Zn.Ua,e),this.size=t}Ut(Jd,Zt);function qs(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return W.setTimeout(function(){e()},t)}var wo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Zd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oc(){}oc.prototype.h=null;function fh(e){return e.h||(e.h=e.i())}function tp(){}var Hs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ac(){Zt.call(this,"d")}Ut(ac,Zt);function lc(){Zt.call(this,"c")}Ut(lc,Zt);var Ja;function Io(){}Ut(Io,oc);Io.prototype.g=function(){return new XMLHttpRequest};Io.prototype.i=function(){return{}};Ja=new Io;function zs(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Cs(this),this.P=lw,e=Ga?125:void 0,this.V=new Eo(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ep}function ep(){this.i=null,this.g="",this.h=!1}var lw=45e3,np={},Za={};D=zs.prototype;D.setTimeout=function(e){this.P=e};function tl(e,t,n){e.L=1,e.A=Ro(en(t)),e.u=n,e.S=!0,rp(e,null)}function rp(e,t){e.G=Date.now(),Ks(e),e.B=en(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),hp(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ep,e.g=xp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new rw(Jt(e.Pa,e,e.g),e.O)),Wd(e.U,e.g,"readystatechange",e.nb),t=e.I?Fd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ps(),sw(e.j,e.v,e.B,e.m,e.W,e.u)}D.nb=function(e){e=e.target;const t=this.M;t&&Be(e)==3?t.l():this.Pa(e)};D.Pa=function(e){try{if(e==this.g)t:{const u=Be(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Ga||this.g&&(this.h.h||this.g.ja()||gh(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?Ps(3):Ps(2)),Ao(this);var n=this.g.da();this.ca=n;e:if(sp(this)){var r=gh(this.g);e="";var s=r.length,i=Be(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),as(this);var o="";break e}this.h.i=new W.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,iw(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ws(a)){var c=a;break e}}c=null}if(n=c)hr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,el(this,n);else{this.i=!1,this.s=3,se(12),Fn(this),as(this);break t}}this.S?(ip(this,u,o),Ga&&this.i&&u==3&&(Wd(this.U,this.V,"tick",this.mb),this.V.start())):(hr(this.j,this.m,o,null),el(this,o)),u==4&&Fn(this),this.i&&!this.J&&(u==4?Sp(this.l,this):(this.i=!1,Ks(this)))}else bw(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),Fn(this),as(this)}}}catch{}finally{}};function sp(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function ip(e,t,n){let r=!0,s;for(;!e.J&&e.o<n.length;)if(s=cw(e,n),s==Za){t==4&&(e.s=4,se(14),r=!1),hr(e.j,e.m,null,"[Incomplete Response]");break}else if(s==np){e.s=4,se(15),hr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else hr(e.j,e.m,s,null),el(e,s);sp(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,se(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),pc(t),t.M=!0,se(11))):(hr(e.j,e.m,n,"[Invalid Chunked Response]"),Fn(e),as(e))}D.mb=function(){if(this.g){var e=Be(this.g),t=this.g.ja();this.o<t.length&&(Ao(this),ip(this,e,t),this.i&&e!=4&&Ks(this))}};function cw(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?Za:(n=Number(t.substring(n,r)),isNaN(n)?np:(r+=1,r+n>t.length?Za:(t=t.slice(r,r+n),e.o=r+n,t)))}D.cancel=function(){this.J=!0,Fn(this)};function Ks(e){e.Y=Date.now()+e.P,op(e,e.P)}function op(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=qs(Jt(e.lb,e),t)}function Ao(e){e.C&&(W.clearTimeout(e.C),e.C=null)}D.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(ow(this.j,this.B),this.L!=2&&(Ps(),se(17)),Fn(this),this.s=2,as(this)):op(this,this.Y-e)};function as(e){e.l.H==0||e.J||Sp(e.l,e)}function Fn(e){Ao(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,sc(e.V),Qd(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function el(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||nl(n.i,e))){if(!e.K&&nl(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Li(n),bo(n);else break t;dc(n),se(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=qs(Jt(n.ib,n),6e3));if(1>=pp(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Bn(n,11)}else if((e.K||n.g==e)&&Li(n),!ws(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=e.g;if(m){const E=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var i=r.i;i.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(cc(i,i.h),i.h=null))}if(r.F){const w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(r.Da=w,wt(r.I,r.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Dp(r,r.J?r.pa:null,r.Y),o.K){mp(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Ao(a),Ks(a)),r.g=o}else Cp(r);0<n.j.length&&Vo(n)}else c[0]!="stop"&&c[0]!="close"||Bn(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Bn(n,7):fc(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Ps(4)}catch{}}function uw(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(mo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function hw(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(mo(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function ap(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(mo(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=hw(e),r=uw(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}var lp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fw(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Hn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Hn){this.h=e.h,Oi(this,e.j),this.s=e.s,this.g=e.g,Mi(this,e.m),this.l=e.l;var t=e.i,n=new Ss;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),dh(this,n),this.o=e.o}else e&&(t=String(e).match(lp))?(this.h=!1,Oi(this,t[1]||"",!0),this.s=Xr(t[2]||""),this.g=Xr(t[3]||"",!0),Mi(this,t[4]),this.l=Xr(t[5]||"",!0),dh(this,t[6]||"",!0),this.o=Xr(t[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}Hn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Jr(t,ph,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Jr(t,ph,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Jr(n,n.charAt(0)=="/"?mw:pw,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Jr(n,_w)),e.join("")};function en(e){return new Hn(e)}function Oi(e,t,n){e.j=n?Xr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Mi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function dh(e,t,n){t instanceof Ss?(e.i=t,yw(e.i,e.h)):(n||(t=Jr(t,gw)),e.i=new Ss(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function Ro(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Xr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Jr(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,dw),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dw(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var ph=/[#\/\?@]/g,pw=/[#\?:]/g,mw=/[#\?]/g,gw=/[#\?@]/g,_w=/#/g;function Ss(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bn(e){e.g||(e.g=new Map,e.h=0,e.i&&fw(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}D=Ss.prototype;D.add=function(e,t){bn(this),this.i=null,e=Mr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function cp(e,t){bn(e),t=Mr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function up(e,t){return bn(e),t=Mr(e,t),e.g.has(t)}D.forEach=function(e,t){bn(this),this.g.forEach(function(n,r){n.forEach(function(s){e.call(t,s,r,this)},this)},this)};D.ta=function(){bn(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let i=0;i<s.length;i++)n.push(t[r])}return n};D.Z=function(e){bn(this);let t=[];if(typeof e=="string")up(this,e)&&(t=t.concat(this.g.get(Mr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};D.set=function(e,t){return bn(this),this.i=null,e=Mr(this,e),up(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};D.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function hp(e,t,n){cp(e,t),0<n.length&&(e.i=null,e.g.set(Mr(e,t),Ql(n)),e.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};function Mr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function yw(e,t){t&&!e.j&&(bn(e),e.i=null,e.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(cp(this,r),hp(this,s,n))},e)),e.j=t}var Ew=class{constructor(e,t){this.g=e,this.map=t}};function fp(e){this.l=e||vw,W.PerformanceNavigationTiming?(e=W.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(W.g&&W.g.Ka&&W.g.Ka()&&W.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vw=10;function dp(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function pp(e){return e.h?1:e.g?e.g.size:0}function nl(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function cc(e,t){e.g?e.g.add(t):e.h=t}function mp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}fp.prototype.cancel=function(){if(this.i=gp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function gp(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ql(e.i)}var Tw=class{stringify(e){return W.JSON.stringify(e,void 0)}parse(e){return W.JSON.parse(e,void 0)}};function ww(){this.g=new Tw}function Iw(e,t,n){const r=n||"";try{ap(e,function(s,i){let o=s;$s(s)&&(o=nc(s)),t.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Aw(e,t){const n=new vo;if(W.Image){const r=new Image;r.onload=ci(hi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ci(hi,n,r,"TestLoadImage: error",!1,t),r.onabort=ci(hi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ci(hi,n,r,"TestLoadImage: timeout",!1,t),W.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function hi(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch{}}function Co(e){this.l=e.ec||null,this.j=e.ob||!1}Ut(Co,oc);Co.prototype.g=function(){return new Po(this.l,this.j)};Co.prototype.i=function(e){return function(){return e}}({});function Po(e,t){Bt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=uc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ut(Po,Bt);var uc=0;D=Po.prototype;D.open=function(e,t){if(this.readyState!=uc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bs(this)};D.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||W).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=uc};D.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof W.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_p(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function _p(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}D.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Gs(this):bs(this),this.readyState==3&&_p(this)}};D.Za=function(e){this.g&&(this.response=this.responseText=e,Gs(this))};D.Ya=function(e){this.g&&(this.response=e,Gs(this))};D.ka=function(){this.g&&Gs(this)};function Gs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bs(e)}D.setRequestHeader=function(e,t){this.v.append(e,t)};D.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function bs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var Rw=W.JSON.parse;function Pt(e){Bt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yp,this.L=this.M=!1}Ut(Pt,Bt);var yp="",Cw=/^https?$/i,Pw=["POST","PUT"];D=Pt.prototype;D.Oa=function(e){this.M=e};D.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ja.g(),this.C=this.u?fh(this.u):fh(Ja),this.g.onreadystatechange=Jt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){mh(this,i);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=W.FormData&&e instanceof W.FormData,!(0<=kd(Pw,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Tp(this),0<this.B&&((this.L=Sw(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jt(this.ua,this)):this.A=ic(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){mh(this,i)}};function Sw(e){return Rr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}D.ua=function(){typeof Wl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ht(this,"timeout"),this.abort(8))};function mh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ep(e),So(e)}function Ep(e){e.F||(e.F=!0,Ht(e,"complete"),Ht(e,"error"))}D.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ht(this,"complete"),Ht(this,"abort"),So(this))};D.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),So(this,!0)),Pt.$.N.call(this)};D.La=function(){this.s||(this.G||this.v||this.l?vp(this):this.kb())};D.kb=function(){vp(this)};function vp(e){if(e.h&&typeof Wl<"u"&&(!e.C[1]||Be(e)!=4||e.da()!=2)){if(e.v&&Be(e)==4)ic(e.La,0,e);else if(Ht(e,"readystatechange"),Be(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var s=String(e.I).match(lp)[1]||null;!s&&W.self&&W.self.location&&(s=W.self.location.protocol.slice(0,-1)),r=!Cw.test(s?s.toLowerCase():"")}n=r}if(n)Ht(e,"complete"),Ht(e,"success");else{e.m=6;try{var i=2<Be(e)?e.g.statusText:""}catch{i=""}e.j=i+" ["+e.da()+"]",Ep(e)}}finally{So(e)}}}}function So(e,t){if(e.g){Tp(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ht(e,"ready");try{n.onreadystatechange=r}catch{}}}function Tp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(W.clearTimeout(e.A),e.A=null)}D.isActive=function(){return!!this.g};function Be(e){return e.g?e.g.readyState:0}D.da=function(){try{return 2<Be(this)?this.g.status:-1}catch{return-1}};D.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Rw(t)}};function gh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case yp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function bw(e){const t={};e=(e.g&&2<=Be(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(ws(e[r]))continue;var n=tw(e[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}GT(t,function(r){return r.join(", ")})}D.Ia=function(){return this.m};D.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function wp(e){let t="";return Xl(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function hc(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=wp(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):wt(e,t,n))}function Gr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ip(e){this.Ga=0,this.j=[],this.l=new vo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gr("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gr("baseRetryDelayMs",5e3,e),this.hb=Gr("retryDelaySeedMs",1e4,e),this.eb=Gr("forwardChannelMaxRetries",2,e),this.xa=Gr("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new fp(e&&e.concurrentRequestLimit),this.Ja=new ww,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}D=Ip.prototype;D.ra=8;D.H=1;function fc(e){if(Ap(e),e.H==3){var t=e.W++,n=en(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),Ws(e,n),t=new zs(e,e.l,t),t.L=2,t.A=Ro(en(n)),n=!1,W.navigator&&W.navigator.sendBeacon)try{n=W.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&W.Image&&(new Image().src=t.A,n=!0),n||(t.g=xp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Ks(t)}Vp(e)}function bo(e){e.g&&(pc(e),e.g.cancel(),e.g=null)}function Ap(e){bo(e),e.u&&(W.clearTimeout(e.u),e.u=null),Li(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&W.clearTimeout(e.m),e.m=null)}function Vo(e){if(!dp(e.i)&&!e.m){e.m=!0;var t=e.Na;As||Kd(),Rs||(As(),Rs=!0),rc.add(t,e),e.C=0}}function Vw(e,t){return pp(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=qs(Jt(e.Na,e,t),bp(e,e.C)),e.C++,!0)}D.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new zs(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Fd(i),Bd(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=Rp(this,s,t),n=en(this.I),wt(n,"RID",e),wt(n,"CVER",22),this.F&&wt(n,"X-HTTP-Session-Id",this.F),Ws(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(wp(i)))+"&"+t:this.o&&hc(n,this.o,i)),cc(this.i,s),this.bb&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),s.aa=!0,tl(s,n,null)):tl(s,n,t),this.H=2}}else this.H==3&&(e?_h(this,e):this.j.length==0||dp(this.i)||_h(this))};function _h(e,t){var n;t?n=t.m:n=e.W++;const r=en(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.V),Ws(e,r),e.o&&e.s&&hc(r,e.o,e.s),n=new zs(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Rp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),cc(e.i,n),tl(n,r,t)}function Ws(e,t){e.na&&Xl(e.na,function(n,r){wt(t,r,n)}),e.h&&ap({},function(n,r){wt(t,r,n)})}function Rp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Jt(e.h.Va,e.h,e):null;t:{var s=e.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{Iw(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function Cp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;As||Kd(),Rs||(As(),Rs=!0),rc.add(t,e),e.A=0}}function dc(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=qs(Jt(e.Ma,e),bp(e,e.A)),e.A++,!0)}D.Ma=function(){if(this.u=null,Pp(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=qs(Jt(this.jb,this),e)}};D.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,se(10),bo(this),Pp(this))};function pc(e){e.B!=null&&(W.clearTimeout(e.B),e.B=null)}function Pp(e){e.g=new zs(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=en(e.wa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.V),wt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&wt(t,"TO",e.qa),wt(t,"TYPE","xmlhttp"),Ws(e,t),e.o&&e.s&&hc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Ro(en(t)),n.u=null,n.S=!0,rp(n,e)}D.ib=function(){this.v!=null&&(this.v=null,bo(this),dc(this),se(19))};function Li(e){e.v!=null&&(W.clearTimeout(e.v),e.v=null)}function Sp(e,t){var n=null;if(e.g==t){Li(e),pc(e),e.g=null;var r=2}else if(nl(e.i,t))n=t.F,mp(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var s=e.C;r=To(),Ht(r,new Jd(r,n)),Vo(e)}else Cp(e);else if(s=t.s,s==3||s==0&&0<t.ca||!(r==1&&Vw(e,t)||r==2&&dc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:Bn(e,5);break;case 4:Bn(e,10);break;case 3:Bn(e,6);break;default:Bn(e,2)}}}function bp(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Bn(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Jt(e.pb,e);n||(n=new Hn("//www.google.com/images/cleardot.gif"),W.location&&W.location.protocol=="http"||Oi(n,"https"),Ro(n)),Aw(n.toString(),r)}else se(2);e.H=0,e.h&&e.h.za(t),Vp(e),Ap(e)}D.pb=function(e){e?(this.l.info("Successfully pinged google.com"),se(2)):(this.l.info("Failed to ping google.com"),se(1))};function Vp(e){if(e.H=0,e.ma=[],e.h){const t=gp(e.i);(t.length!=0||e.j.length!=0)&&(ah(e.ma,t),ah(e.ma,e.j),e.i.i.length=0,Ql(e.j),e.j.length=0),e.h.ya()}}function Dp(e,t,n){var r=n instanceof Hn?en(n):new Hn(n);if(r.g!="")t&&(r.g=t+"."+r.g),Mi(r,r.m);else{var s=W.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Hn(null);r&&Oi(i,r),t&&(i.g=t),s&&Mi(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&wt(r,n,t),wt(r,"VER",e.ra),Ws(e,r),r}function xp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Pt(new Co({ob:n})):new Pt(e.va),t.Oa(e.J),t}D.isActive=function(){return!!this.h&&this.h.isActive(this)};function Np(){}D=Np.prototype;D.Ba=function(){};D.Aa=function(){};D.za=function(){};D.ya=function(){};D.isActive=function(){return!0};D.Va=function(){};function Fi(){if(Rr&&!(10<=Number(qT)))throw Error("Environmental error: no available transport.")}Fi.prototype.g=function(e,t){return new _e(e,t)};function _e(e,t){Bt.call(this),this.g=new Ip(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ws(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ws(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Lr(this)}Ut(_e,Bt);_e.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;se(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Dp(e,null,e.Y),Vo(e)};_e.prototype.close=function(){fc(this.g)};_e.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=nc(e),e=n);t.j.push(new Ew(t.fb++,e)),t.H==3&&Vo(t)};_e.prototype.N=function(){this.g.h=null,delete this.j,fc(this.g),delete this.g,_e.$.N.call(this)};function kp(e){ac.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ut(kp,ac);function Op(){lc.call(this),this.status=1}Ut(Op,lc);function Lr(e){this.g=e}Ut(Lr,Np);Lr.prototype.Ba=function(){Ht(this.g,"a")};Lr.prototype.Aa=function(e){Ht(this.g,new kp(e))};Lr.prototype.za=function(e){Ht(this.g,new Op)};Lr.prototype.ya=function(){Ht(this.g,"b")};function Dw(){this.blockSize=-1}function Ve(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ut(Ve,Dw);Ve.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function ga(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[1]+3905402710&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[5]+1200080426&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[9]+2336552879&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(i^n&(s^i))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=i+(s^t&(n^s))+r[13]+4254626195&4294967295,i=t+(o<<12&4294967295|o>>>20),o=s+(n^i&(t^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(t^s&(i^t))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^i&(n^s))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[6]+3225465664&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[10]+38016083&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[14]+3275163606&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^i&(n^s))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(t^n))+r[2]+4243563512&4294967295,i=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(i^t))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^t&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^i)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[8]+2272392833&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[4]+1272893353&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[0]+3936430074&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^i)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=i+(t^n^s)+r[12]+3873151461&4294967295,i=t+(o<<11&4294967295|o>>>21),o=s+(i^t^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^t)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~i))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[7]+1126891415&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[3]+2399980690&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[15]+4264355552&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~i))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=i+(n^(t|~s))+r[11]+3174756917&4294967295,i=t+(o<<10&4294967295|o>>>22),o=s+(t^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}Ve.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(s==0)for(;i<=n;)ga(this,e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){ga(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){ga(this,r),s=0;break}}this.h=s,this.i+=t};Ve.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function mt(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=e[s]|0;r&&i==t||(n[s]=i,r=!1)}this.g=n}var xw={};function mc(e){return-128<=e&&128>e?UT(e,function(t){return new mt([t|0],0>t?-1:0)}):new mt([e|0],0>e?-1:0)}function Ue(e){if(isNaN(e)||!isFinite(e))return _r;if(0>e)return jt(Ue(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=rl;return new mt(t,0)}function Mp(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return jt(Mp(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ue(Math.pow(t,8)),r=_r,s=0;s<e.length;s+=8){var i=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+i),t);8>i?(i=Ue(Math.pow(t,i)),r=r.R(i).add(Ue(o))):(r=r.R(n),r=r.add(Ue(o)))}return r}var rl=4294967296,_r=mc(0),sl=mc(1),yh=mc(16777216);D=mt.prototype;D.ea=function(){if(Ee(this))return-jt(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:rl+r)*t,t*=rl}return e};D.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Xe(this))return"0";if(Ee(this))return"-"+jt(this).toString(e);for(var t=Ue(Math.pow(e,6)),n=this,r="";;){var s=Ui(n,t).g;n=Bi(n,s.R(t));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Xe(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};D.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function Xe(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Ee(e){return e.h==-1}D.X=function(e){return e=Bi(this,e),Ee(e)?-1:Xe(e)?0:1};function jt(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new mt(n,~e.h).add(sl)}D.abs=function(){return Ee(this)?jt(this):this};D.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(this.D(s)&65535)+(e.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new mt(n,n[n.length-1]&-2147483648?-1:0)};function Bi(e,t){return e.add(jt(t))}D.R=function(e){if(Xe(this)||Xe(e))return _r;if(Ee(this))return Ee(e)?jt(this).R(jt(e)):jt(jt(this).R(e));if(Ee(e))return jt(this.R(jt(e)));if(0>this.X(yh)&&0>e.X(yh))return Ue(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(s)>>>16,l=e.D(s)&65535;n[2*r+2*s]+=o*l,fi(n,2*r+2*s),n[2*r+2*s+1]+=i*l,fi(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,fi(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,fi(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new mt(n,0)};function fi(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Wr(e,t){this.g=e,this.h=t}function Ui(e,t){if(Xe(t))throw Error("division by zero");if(Xe(e))return new Wr(_r,_r);if(Ee(e))return t=Ui(jt(e),t),new Wr(jt(t.g),jt(t.h));if(Ee(t))return t=Ui(e,jt(t)),new Wr(jt(t.g),t.h);if(30<e.g.length){if(Ee(e)||Ee(t))throw Error("slowDivide_ only works with positive integers.");for(var n=sl,r=t;0>=r.X(e);)n=Eh(n),r=Eh(r);var s=ir(n,1),i=ir(r,1);for(r=ir(r,2),n=ir(n,2);!Xe(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=ir(r,1),n=ir(n,1)}return t=Bi(e,s.R(t)),new Wr(s,t)}for(s=_r;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Ue(n),o=i.R(t);Ee(o)||0<o.X(e);)n-=r,i=Ue(n),o=i.R(t);Xe(i)&&(i=sl),s=s.add(i),e=Bi(e,o)}return new Wr(s,e)}D.gb=function(e){return Ui(this,e).h};D.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new mt(n,this.h&e.h)};D.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new mt(n,this.h|e.h)};D.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new mt(n,this.h^e.h)};function Eh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new mt(n,e.h)}function ir(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new mt(s,e.h)}Fi.prototype.createWebChannel=Fi.prototype.g;_e.prototype.send=_e.prototype.u;_e.prototype.open=_e.prototype.m;_e.prototype.close=_e.prototype.close;wo.NO_ERROR=0;wo.TIMEOUT=8;wo.HTTP_ERROR=6;Zd.COMPLETE="complete";tp.EventType=Hs;Hs.OPEN="a";Hs.CLOSE="b";Hs.ERROR="c";Hs.MESSAGE="d";Bt.prototype.listen=Bt.prototype.O;Pt.prototype.listenOnce=Pt.prototype.P;Pt.prototype.getLastError=Pt.prototype.Sa;Pt.prototype.getLastErrorCode=Pt.prototype.Ia;Pt.prototype.getStatus=Pt.prototype.da;Pt.prototype.getResponseJson=Pt.prototype.Wa;Pt.prototype.getResponseText=Pt.prototype.ja;Pt.prototype.send=Pt.prototype.ha;Pt.prototype.setWithCredentials=Pt.prototype.Oa;Ve.prototype.digest=Ve.prototype.l;Ve.prototype.reset=Ve.prototype.reset;Ve.prototype.update=Ve.prototype.j;mt.prototype.add=mt.prototype.add;mt.prototype.multiply=mt.prototype.R;mt.prototype.modulo=mt.prototype.gb;mt.prototype.compare=mt.prototype.X;mt.prototype.toNumber=mt.prototype.ea;mt.prototype.toString=mt.prototype.toString;mt.prototype.getBits=mt.prototype.D;mt.fromNumber=Ue;mt.fromString=Mp;var Nw=function(){return new Fi},kw=function(){return To()},_a=wo,Ow=Zd,Mw=Zn,vh={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},di=tp,Lw=Pt,Fw=Ve,yr=mt;const Th="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fr="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new Sd("@firebase/firestore");function Qr(){return Wn.logLevel}function F(e,...t){if(Wn.logLevel<=ot.DEBUG){const n=t.map(gc);Wn.debug(`Firestore (${Fr}): ${e}`,...n)}}function nn(e,...t){if(Wn.logLevel<=ot.ERROR){const n=t.map(gc);Wn.error(`Firestore (${Fr}): ${e}`,...n)}}function Cr(e,...t){if(Wn.logLevel<=ot.WARN){const n=t.map(gc);Wn.warn(`Firestore (${Fr}): ${e}`,...n)}}function gc(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e="Unexpected state"){const t=`FIRESTORE (${Fr}) INTERNAL ASSERTION FAILED: `+e;throw nn(t),new Error(t)}function vt(e,t){e||G()}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Or{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Bw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Wt.UNAUTHENTICATED))}shutdown(){}}class Uw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $w{constructor(t){this.t=t,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zn,t.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;t.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zn)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt(typeof r.accessToken=="string"),new Lp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return vt(t===null||typeof t=="string"),new Wt(t)}}class jw{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qw{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new jw(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zw{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=i=>{i.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(vt(typeof n.token=="string"),this.R=n.token,new Hw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const s=Kw(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%t.length))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function Pr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new M(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new M(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return kt.fromMillis(Date.now())}static fromDate(t){return kt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new kt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Y(t)}static min(){return new Y(new kt(0,0))}static max(){return new Y(new kt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t,n,r){n===void 0?n=0:n>t.length&&G(),r===void 0?r=t.length-n:r>t.length-n&&G(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Vs.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Vs?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=t.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class It extends Vs{construct(t,n,r){return new It(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new M(v.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new It(n)}static emptyPath(){return new It([])}}const Gw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Vs{construct(t,n,r){return new qt(t,n,r)}static isValidIdentifier(t){return Gw.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qt(["__name__"])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<t.length;){const a=t[s];if(a==="\\"){if(s+1===t.length)throw new M(v.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new M(v.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.path=t}static fromPath(t){return new H(It.fromString(t))}static fromName(t){return new H(It.fromString(t).popFirst(5))}static empty(){return new H(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&It.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return It.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new H(new It(t.slice()))}}function Ww(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new Rn(s,H.empty(),t)}function Qw(e){return new Rn(e.readTime,e.key,-1)}class Rn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Rn(Y.min(),H.empty(),-1)}static max(){return new Rn(Y.max(),H.empty(),-1)}}function Yw(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=H.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(e){if(e.code!==v.FAILED_PRECONDITION||e.message!==Xw)throw e;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new R((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof R?n:R.resolve(n)}catch(n){return R.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):R.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):R.reject(n)}static resolve(t){return new R((n,r)=>{n(t)})}static reject(t){return new R((n,r)=>{r(t)})}static waitFor(t){return new R((n,r)=>{let s=0,i=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(t){let n=R.resolve(!1);for(const r of t)n=n.next(s=>s?R.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new R((r,s)=>{const i=t.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(t,n){return new R((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function Ys(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}_c._e=-1;function Do(e){return e==null}function $i(e){return e===0&&1/e==-1/0}function Zw(e){return typeof e=="number"&&Number.isInteger(e)&&!$i(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Br(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bp(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(t,n){this.comparator=t,this.root=n||$t.EMPTY}insert(t,n){return new Ct(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(t){return new Ct(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$t.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new pi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new pi(this.root,t,this.comparator,!1)}getReverseIterator(){return new pi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new pi(this.root,t,this.comparator,!0)}}class pi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $t{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??$t.RED,this.left=s??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new $t(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return $t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const t=this.left.check();if(t!==this.right.check())throw G();return t+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(t,n,r,s,i){return this}insert(t,n,r){return new $t(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t){this.comparator=t,this.data=new Ct(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ih(this.data.getIterator())}getIteratorFrom(t){return new Ih(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof zt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new zt(this.comparator);return n.data=t,n}}class Ih{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.fields=t,t.sort(qt.comparator)}static empty(){return new Ce([])}unionWith(t){let n=new zt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Ce(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Pr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Up("Invalid base64 string: "+i):i}}(t);return new ee(n)}static fromUint8Array(t){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(t);return new ee(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ee.EMPTY_BYTE_STRING=new ee("");const t0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(e){if(vt(!!e),typeof e=="string"){let t=0;const n=t0.exec(e);if(vt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vt(e.seconds),nanos:Vt(e.nanos)}}function Vt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Qn(e){return typeof e=="string"?ee.fromBase64String(e):ee.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ec(e){const t=e.mapValue.fields.__previous_value__;return yc(t)?Ec(t):t}function Ds(e){const t=Cn(e.mapValue.fields.__local_write_time__.timestampValue);return new kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t,n,r,s,i,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class xs{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new xs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof xs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yc(e)?4:n0(e)?9007199254740991:10:G()}function ze(e,t){if(e===t)return!0;const n=Yn(e);if(n!==Yn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ds(e).isEqual(Ds(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Cn(s.timestampValue),a=Cn(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return Qn(s.bytesValue).isEqual(Qn(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Vt(s.geoPointValue.latitude)===Vt(i.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Vt(s.integerValue)===Vt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Vt(s.doubleValue),a=Vt(i.doubleValue);return o===a?$i(o)===$i(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Pr(e.arrayValue.values||[],t.arrayValue.values||[],ze);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(wh(o)!==wh(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ze(o[l],a[l])))return!1;return!0}(e,t);default:return G()}}function Ns(e,t){return(e.values||[]).find(n=>ze(n,t))!==void 0}function Sr(e,t){if(e===t)return 0;const n=Yn(e),r=Yn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(i,o){const a=Vt(i.integerValue||i.doubleValue),l=Vt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Ah(e.timestampValue,t.timestampValue);case 4:return Ah(Ds(e),Ds(t));case 5:return ct(e.stringValue,t.stringValue);case 6:return function(i,o){const a=Qn(i),l=Qn(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ct(a[c],l[c]);if(u!==0)return u}return ct(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){const a=ct(Vt(i.latitude),Vt(o.latitude));return a!==0?a:ct(Vt(i.longitude),Vt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Sr(a[c],l[c]);if(u)return u}return ct(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){if(i===mi.mapValue&&o===mi.mapValue)return 0;if(i===mi.mapValue)return 1;if(o===mi.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=ct(l[h],u[h]);if(f!==0)return f;const m=Sr(a[l[h]],c[u[h]]);if(m!==0)return m}return ct(l.length,u.length)}(e.mapValue,t.mapValue);default:throw G()}}function Ah(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=Cn(e),r=Cn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function br(e){return il(e)}function il(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Cn(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Qn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return H.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=il(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${il(n.fields[o])}`;return s+"}"}(e.mapValue):G()}function Rh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ol(e){return!!e&&"integerValue"in e}function vc(e){return!!e&&"arrayValue"in e}function Ch(e){return!!e&&"nullValue"in e}function Ph(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wi(e){return!!e&&"mapValue"in e}function ls(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Br(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ls(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ls(e.arrayValue.values[n]);return t}return Object.assign({},e)}function n0(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.value=t}static empty(){return new ve({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!wi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ls(n)}setAll(t){let n=qt.emptyPath(),r={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ls(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());wi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ze(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];wi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Br(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new ve(ls(this.value))}}function $p(e){const t=[];return Br(e.fields,(n,r)=>{const s=new qt([n]);if(wi(r)){const i=$p(r.mapValue).fields;if(i.length===0)t.push(s);else for(const o of i)t.push(s.child(o))}else t.push(s)}),new Ce(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t,n,r,s,i,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Qt(t,0,Y.min(),Y.min(),Y.min(),ve.empty(),0)}static newFoundDocument(t,n,r,s){return new Qt(t,1,n,Y.min(),r,s,0)}static newNoDocument(t,n){return new Qt(t,2,n,Y.min(),Y.min(),ve.empty(),0)}static newUnknownDocument(t,n){return new Qt(t,3,n,Y.min(),Y.min(),ve.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ve.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ve.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Qt&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,n){this.position=t,this.inclusive=n}}function Sh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Sr(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function bh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ze(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t,n="asc"){this.field=t,this.dir=n}}function r0(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{}class Dt extends jp{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new i0(t,n,r):n==="array-contains"?new l0(t,r):n==="in"?new c0(t,r):n==="not-in"?new u0(t,r):n==="array-contains-any"?new h0(t,r):new Dt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new o0(t,r):new a0(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Sr(n,this.value)):n!==null&&Yn(this.value)===Yn(n)&&this.matchesComparison(Sr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class De extends jp{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new De(t,n)}matches(t){return qp(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function qp(e){return e.op==="and"}function Hp(e){return s0(e)&&qp(e)}function s0(e){for(const t of e.filters)if(t instanceof De)return!1;return!0}function al(e){if(e instanceof Dt)return e.field.canonicalString()+e.op.toString()+br(e.value);if(Hp(e))return e.filters.map(t=>al(t)).join(",");{const t=e.filters.map(n=>al(n)).join(",");return`${e.op}(${t})`}}function zp(e,t){return e instanceof Dt?function(r,s){return s instanceof Dt&&r.op===s.op&&r.field.isEqual(s.field)&&ze(r.value,s.value)}(e,t):e instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&zp(o,s.filters[a]),!0):!1}(e,t):void G()}function Kp(e){return e instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${br(n.value)}`}(e):e instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(Kp).join(" ,")+"}"}(e):"Filter"}class i0 extends Dt{constructor(t,n,r){super(t,n,r),this.key=H.fromName(r.referenceValue)}matches(t){const n=H.comparator(t.key,this.key);return this.matchesComparison(n)}}class o0 extends Dt{constructor(t,n){super(t,"in",n),this.keys=Gp("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class a0 extends Dt{constructor(t,n){super(t,"not-in",n),this.keys=Gp("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Gp(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class l0 extends Dt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vc(n)&&Ns(n.arrayValue,this.value)}}class c0 extends Dt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ns(this.value.arrayValue,n)}}class u0 extends Dt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ns(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Ns(this.value.arrayValue,n)}}class h0 extends Dt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ns(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,n=null,r=[],s=[],i=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function Vh(e,t=null,n=[],r=[],s=null,i=null,o=null){return new f0(e,t,n,r,s,i,o)}function Tc(e){const t=tt(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>al(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Do(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>br(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>br(r)).join(",")),t.ce=n}return t.ce}function wc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!r0(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!zp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bh(e.startAt,t.startAt)&&bh(e.endAt,t.endAt)}function ll(e){return H.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function d0(e,t,n,r,s,i,o,a){return new Ur(e,t,n,r,s,i,o,a)}function Ic(e){return new Ur(e)}function Dh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Wp(e){return e.collectionGroup!==null}function cs(e){const t=tt(e);if(t.le===null){t.le=[];const n=new Set;for(const i of t.explicitOrderBy)t.le.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zt(qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.le.push(new ks(i,r))}),n.has(qt.keyField().canonicalString())||t.le.push(new ks(qt.keyField(),r))}return t.le}function $e(e){const t=tt(e);return t.he||(t.he=p0(t,cs(e))),t.he}function p0(e,t){if(e.limitType==="F")return Vh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ks(s.field,i)});const n=e.endAt?new ji(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ji(e.startAt.position,e.startAt.inclusive):null;return Vh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function cl(e,t){const n=e.filters.concat([t]);return new Ur(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qi(e,t,n){return new Ur(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xo(e,t){return wc($e(e),$e(t))&&e.limitType===t.limitType}function Qp(e){return`${Tc($e(e))}|lt:${e.limitType}`}function ar(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Kp(s)).join(", ")}]`),Do(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>br(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>br(s)).join(",")),`Target(${r})`}($e(e))}; limitType=${e.limitType})`}function No(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):H.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of cs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Sh(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,cs(r),s)||r.endAt&&!function(o,a,l){const c=Sh(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,cs(r),s))}(e,t)}function m0(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yp(e){return(t,n)=>{let r=!1;for(const s of cs(e)){const i=g0(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function g0(e,t,n){const r=e.field.isKeyField()?H.comparator(t.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Sr(l,c):G()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Br(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return Bp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Ct(H.comparator);function rn(){return _0}const Xp=new Ct(H.comparator);function Zr(...e){let t=Xp;for(const n of e)t=t.insert(n.key,n);return t}function Jp(e){let t=Xp;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Un(){return us()}function Zp(){return us()}function us(){return new $r(e=>e.toString(),(e,t)=>e.isEqual(t))}const y0=new Ct(H.comparator),E0=new zt(H.comparator);function nt(...e){let t=E0;for(const n of e)t=t.add(n);return t}const v0=new zt(ct);function T0(){return v0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$i(t)?"-0":t}}function em(e){return{integerValue:""+e}}function w0(e,t){return Zw(t)?em(t):tm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this._=void 0}}function I0(e,t,n){return e instanceof Hi?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&yc(i)&&(i=Ec(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof Os?rm(e,t):e instanceof Ms?sm(e,t):function(s,i){const o=nm(s,i),a=xh(o)+xh(s.Ie);return ol(o)&&ol(s.Ie)?em(a):tm(s.serializer,a)}(e,t)}function A0(e,t,n){return e instanceof Os?rm(e,t):e instanceof Ms?sm(e,t):n}function nm(e,t){return e instanceof zi?function(r){return ol(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Hi extends ko{}class Os extends ko{constructor(t){super(),this.elements=t}}function rm(e,t){const n=im(t);for(const r of e.elements)n.some(s=>ze(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ms extends ko{constructor(t){super(),this.elements=t}}function sm(e,t){let n=im(t);for(const r of e.elements)n=n.filter(s=>!ze(s,r));return{arrayValue:{values:n}}}class zi extends ko{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function xh(e){return Vt(e.integerValue||e.doubleValue)}function im(e){return vc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function R0(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof Os&&s instanceof Os||r instanceof Ms&&s instanceof Ms?Pr(r.elements,s.elements,ze):r instanceof zi&&s instanceof zi?ze(r.Ie,s.Ie):r instanceof Hi&&s instanceof Hi}(e.transform,t.transform)}class C0{constructor(t,n){this.version=t,this.transformResults=n}}class tn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new tn}static exists(t){return new tn(void 0,t)}static updateTime(t){return new tn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ii(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Oo{}function om(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new lm(e.key,tn.none()):new Xs(e.key,e.data,tn.none());{const n=e.data,r=ve.empty();let s=new zt(qt.comparator);for(let i of t.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new tr(e.key,r,new Ce(s.toArray()),tn.none())}}function P0(e,t,n){e instanceof Xs?function(s,i,o){const a=s.value.clone(),l=kh(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof tr?function(s,i,o){if(!Ii(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=kh(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(am(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function hs(e,t,n,r){return e instanceof Xs?function(i,o,a,l){if(!Ii(i.precondition,o))return a;const c=i.value.clone(),u=Oh(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,r):e instanceof tr?function(i,o,a,l){if(!Ii(i.precondition,o))return a;const c=Oh(i.fieldTransforms,l,o),u=o.data;return u.setAll(am(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(i,o,a){return Ii(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function S0(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=nm(r.transform,s||null);i!=null&&(n===null&&(n=ve.empty()),n.set(r.field,i))}return n||null}function Nh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pr(r,s,(i,o)=>R0(i,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Xs extends Oo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class tr extends Oo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function am(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function kh(e,t,n){const r=new Map;vt(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,A0(o,a,n[s]))}return r}function Oh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,o=n.data.field(s.field);r.set(s.field,I0(i,o,t))}return r}class lm extends Oo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b0 extends Oo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&P0(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=hs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=hs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Zp();return this.mutations.forEach(s=>{const i=t.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=om(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),nt())}isEqual(t){return this.batchId===t.batchId&&Pr(this.mutations,t.mutations,(n,r)=>Nh(n,r))&&Pr(this.baseMutations,t.baseMutations,(n,r)=>Nh(n,r))}}class Ac{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){vt(t.mutations.length===r.length);let s=function(){return y0}();const i=t.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ac(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,st;function N0(e){switch(e){default:return G();case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0}}function cm(e){if(e===void 0)return nn("GRPC error has no .code"),v.UNKNOWN;switch(e){case bt.OK:return v.OK;case bt.CANCELLED:return v.CANCELLED;case bt.UNKNOWN:return v.UNKNOWN;case bt.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case bt.INTERNAL:return v.INTERNAL;case bt.UNAVAILABLE:return v.UNAVAILABLE;case bt.UNAUTHENTICATED:return v.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case bt.NOT_FOUND:return v.NOT_FOUND;case bt.ALREADY_EXISTS:return v.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return v.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case bt.ABORTED:return v.ABORTED;case bt.OUT_OF_RANGE:return v.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return v.UNIMPLEMENTED;case bt.DATA_LOSS:return v.DATA_LOSS;default:return G()}}(st=bt||(bt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new yr([4294967295,4294967295],0);function Mh(e){const t=k0().encode(e),n=new Fw;return n.update(t),new Uint8Array(n.digest())}function Lh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new yr([n,r],0),new yr([s,i],0)]}class Rc{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ts(`Invalid padding: ${n}`);if(r<0)throw new ts(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ts(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ts(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=yr.fromNumber(this.Te)}de(t,n,r){let s=t.add(n.multiply(yr.fromNumber(r)));return s.compare(O0)===1&&(s=new yr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Mh(t),[r,s]=Lh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),o=new Rc(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Mh(t),[r,s]=Lh(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ts extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Js.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Mo(Y.min(),s,new Ct(ct),rn(),nt())}}class Js{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Js(r,n,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,n,r,s){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=s}}class um{constructor(t,n){this.targetId=t,this.fe=n}}class hm{constructor(t,n,r=ee.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Fh{constructor(){this.ge=0,this.pe=Uh(),this.ye=ee.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=nt(),n=nt(),r=nt();return this.pe.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G()}}),new Js(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=Uh()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,vt(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class M0{constructor(t){this.Le=t,this.ke=new Map,this.qe=rn(),this.Qe=Bh(),this.Ke=new Ct(ct)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:G()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(t){const n=t.targetId,r=t.fe.count,s=this.Ye(n);if(s){const i=s.target;if(ll(i))if(r===0){const o=new H(i.path);this.We(n,o,Qt.newNoDocument(o,Y.min()))}else vt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),l=a?this.et(a,t,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Qn(r).toUint8Array()}catch(l){if(l instanceof Up)return Cr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rc(o,s,i)}catch(l){return Cr(l instanceof ts?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;t.mightContain(a)||(this.We(n,i,null),s++)}),s}it(t){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&ll(a.target)){const l=new H(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Qt.newNoDocument(l,t))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=nt();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(t));const s=new Mo(t,n,this.Ke,this.qe,r);return this.qe=rn(),this.Qe=Bh(),this.Ke=new Ct(ct),s}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const s=this.ze(t);this.st(t,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Fh,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new zt(ct),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||F("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Fh),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Bh(){return new Ct(H.comparator)}function Uh(){return new Ct(H.comparator)}const L0={asc:"ASCENDING",desc:"DESCENDING"},F0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B0={and:"AND",or:"OR"};class U0{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ul(e,t){return e.useProto3Json||Do(t)?t:{value:t}}function Ki(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $0(e,t){return Ki(e,t.toTimestamp())}function je(e){return vt(!!e),Y.fromTimestamp(function(n){const r=Cn(n);return new kt(r.seconds,r.nanos)}(e))}function Cc(e,t){return function(r){return new It(["projects",r.projectId,"databases",r.database])}(e).child("documents").child(t).canonicalString()}function dm(e){const t=It.fromString(e);return vt(_m(t)),t}function hl(e,t){return Cc(e.databaseId,t.path)}function ya(e,t){const n=dm(t);if(n.get(1)!==e.databaseId.projectId)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(v.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new H(pm(n))}function fl(e,t){return Cc(e.databaseId,t)}function j0(e){const t=dm(e);return t.length===4?It.emptyPath():pm(t)}function dl(e){return new It(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pm(e){return vt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function $h(e,t,n){return{name:hl(e,t),fields:n.value.mapValue.fields}}function q0(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:G()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(vt(u===void 0||typeof u=="string"),ee.fromBase64String(u||"")):(vt(u===void 0||u instanceof Uint8Array),ee.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?v.UNKNOWN:cm(c.code);return new M(u,c.message||"")}(o);n=new hm(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ya(e,r.document.name),i=je(r.document.updateTime),o=r.document.createTime?je(r.document.createTime):Y.min(),a=new ve({mapValue:{fields:r.document.fields}}),l=Qt.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ai(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ya(e,r.document),i=r.readTime?je(r.readTime):Y.min(),o=Qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ai([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ya(e,r.document),i=r.removedTargetIds||[];n=new Ai([],i,s,null)}else{if(!("filter"in t))return G();{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new x0(s,i),a=r.targetId;n=new um(a,o)}}return n}function H0(e,t){let n;if(t instanceof Xs)n={update:$h(e,t.key,t.value)};else if(t instanceof lm)n={delete:hl(e,t.key)};else if(t instanceof tr)n={update:$h(e,t.key,t.data),updateMask:Z0(t.fieldMask)};else{if(!(t instanceof b0))return G();n={verify:hl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Hi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Os)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ms)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zi)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw G()}(0,r))),t.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:$0(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(e,t.precondition)),n}function z0(e,t){return e&&e.length>0?(vt(t!==void 0),e.map(n=>function(s,i){let o=s.updateTime?je(s.updateTime):je(i);return o.isEqual(Y.min())&&(o=je(i)),new C0(o,s.transformResults||[])}(n,t))):[]}function K0(e,t){return{documents:[fl(e,t.path)]}}function G0(e,t){const n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=fl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=fl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return gm(De.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:lr(h.field),direction:Y0(h.dir)}}(c))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=ul(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),n}function W0(e){let t=j0(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vt(r===1);const u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=mm(h);return f instanceof De&&Hp(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new ks(cr(E.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Do(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,m=h.values||[];return new ji(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new ji(m,f)}(n.endAt)),d0(t,s,o,i,a,"F",l,c)}function Q0(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function mm(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cr(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=cr(n.unaryFilter.field);return Dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=cr(n.unaryFilter.field);return Dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cr(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(e):e.fieldFilter!==void 0?function(n){return Dt.create(cr(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(r=>mm(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(e):G()}function Y0(e){return L0[e]}function X0(e){return F0[e]}function J0(e){return B0[e]}function lr(e){return{fieldPath:e.canonicalString()}}function cr(e){return qt.fromServerFormat(e.fieldPath)}function gm(e){return e instanceof Dt?function(n){if(n.op==="=="){if(Ph(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NAN"}};if(Ch(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ph(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NOT_NAN"}};if(Ch(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lr(n.field),op:X0(n.op),value:n.value}}}(e):e instanceof De?function(n){const r=n.getFilters().map(s=>gm(s));return r.length===1?r[0]:{compositeFilter:{op:J0(n.op),filters:r}}}(e):G()}function Z0(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function _m(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,n,r,s,i=Y.min(),o=Y.min(),a=ee.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new gn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t){this.ut=t}}function eI(e){const t=W0({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?qi(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.on=new rI}addToCollectionParentIndex(t,n){return this.on.add(n),R.resolve()}getCollectionParents(t,n){return R.resolve(this.on.getEntries(n))}addFieldIndex(t,n){return R.resolve()}deleteFieldIndex(t,n){return R.resolve()}deleteAllFieldIndexes(t){return R.resolve()}createTargetIndexes(t,n){return R.resolve()}getDocumentsMatchingTarget(t,n){return R.resolve(null)}getIndexType(t,n){return R.resolve(0)}getFieldIndexes(t,n){return R.resolve([])}getNextCollectionGroupToUpdate(t){return R.resolve(null)}getMinOffset(t,n){return R.resolve(Rn.min())}getMinOffsetFromCollectionGroup(t,n){return R.resolve(Rn.min())}updateCollectionGroup(t,n,r){return R.resolve()}updateIndexEntries(t,n){return R.resolve()}}class rI{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new zt(It.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new zt(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new Vr(0)}static Nn(){return new Vr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.changes=new $r(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Qt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&hs(r.mutation,s,Ce.empty(),kt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,nt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=nt()){const s=Un();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let o=Zr();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Un();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,nt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,s){let i=rn();const o=us(),a=function(){return us()}();return n.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof tr)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),hs(u.mutation,c,u.mutation.getFieldMask(),kt.now())):o.set(c.key,Ce.empty())}),this.recalculateAndSaveOverlays(t,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new iI(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){const r=us();let s=new Ct((o,a)=>o-a),i=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Ce.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(s.get(a.batchId)||nt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Zp();u.forEach(f=>{if(!i.has(f)){const m=om(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Wp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):R.resolve(Un());let a=-1,l=i;return o.next(c=>R.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?R.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,i)).next(()=>this.computeViews(t,l,c,nt())).next(u=>({batchId:a,changes:Jp(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new H(n)).next(r=>{let s=Zr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let o=Zr();return this.indexManager.getCollectionParents(t,i).next(a=>R.forEach(a,l=>{const c=function(h,f){return new Ur(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(t,c,r,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Qt.newInvalidDocument(u)))});let a=Zr();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&hs(u.mutation,c,Ce.empty(),kt.now()),No(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,n){return R.resolve(this.ur.get(n))}saveBundleMetadata(t,n){return this.ur.set(n.id,function(s){return{id:s.id,version:s.version,createTime:je(s.createTime)}}(n)),R.resolve()}getNamedQuery(t,n){return R.resolve(this.cr.get(n))}saveNamedQuery(t,n){return this.cr.set(n.name,function(s){return{name:s.name,query:eI(s.bundledQuery),readTime:je(s.readTime)}}(n)),R.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.overlays=new Ct(H.comparator),this.lr=new Map}getOverlay(t,n){return R.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Un();return R.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.lt(t,n,i)}),R.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.lr.delete(r)),R.resolve()}getOverlaysForCollection(t,n,r){const s=Un(),i=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return R.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Ct((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Un(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Un(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return R.resolve(a)}lt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.lr.get(s.largestBatchId).delete(r.key);this.lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new D0(n,r));let i=this.lr.get(n);i===void 0&&(i=nt(),this.lr.set(n,i)),this.lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(){this.hr=new zt(Lt.Pr),this.Ir=new zt(Lt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,n){const r=new Lt(t,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.dr(new Lt(t,n))}Ar(t,n){t.forEach(r=>this.removeReference(r,n))}Rr(t){const n=new H(new It([])),r=new Lt(n,t),s=new Lt(n,t+1),i=[];return this.Ir.forEachInRange([r,s],o=>{this.dr(o),i.push(o.key)}),i}Vr(){this.hr.forEach(t=>this.dr(t))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const n=new H(new It([])),r=new Lt(n,t),s=new Lt(n,t+1);let i=nt();return this.Ir.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(t){const n=new Lt(t,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Lt{constructor(t,n){this.key=t,this.gr=n}static Pr(t,n){return H.comparator(t.key,n.key)||ct(t.gr,n.gr)}static Tr(t,n){return ct(t.gr,n.gr)||H.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new zt(Lt.Pr)}checkEmpty(t){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new V0(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.yr=this.yr.add(new Lt(a.key,i)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(t,n){return R.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Sr(r),i=s<0?0:s;return R.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(t){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Lt(n,0),s=new Lt(n,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([r,s],o=>{const a=this.wr(o.gr);i.push(a)}),R.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new zt(ct);return n.forEach(s=>{const i=new Lt(s,0),o=new Lt(s,Number.POSITIVE_INFINITY);this.yr.forEachInRange([i,o],a=>{r=r.add(a.gr)})}),R.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new Lt(new H(i),0);let a=new zt(ct);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.gr)),!0)},o),R.resolve(this.br(a))}br(t){const n=[];return t.forEach(r=>{const s=this.wr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){vt(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return R.forEach(n.mutations,s=>{const i=new Lt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.yr=r})}Fn(t){}containsKey(t,n){const r=new Lt(n,0),s=this.yr.firstAfterOrEqual(r);return R.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,R.resolve()}Dr(t,n){return this.Sr(t)}Sr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}wr(t){const n=this.Sr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t){this.Cr=t,this.docs=function(){return new Ct(H.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(t,n){let r=rn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Qt.newInvalidDocument(s))}),R.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=rn();const o=n.path,a=new H(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Yw(Qw(u),r)<=0||(s.has(u.key)||No(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return R.resolve(i)}getAllFromCollectionGroup(t,n,r,s){G()}vr(t,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new hI(this)}getSize(t){return R.resolve(this.size)}}class hI extends sI{constructor(t){super(),this._r=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this._r.addEntry(t,s)):this._r.removeEntry(r)}),R.waitFor(n)}getFromCache(t,n){return this._r.getEntry(t,n)}getAllFromCache(t,n){return this._r.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t){this.persistence=t,this.Fr=new $r(n=>Tc(n),wc),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Pc,this.targetCount=0,this.Nr=Vr.On()}forEachTarget(t,n){return this.Fr.forEach((r,s)=>n(s)),R.resolve()}getLastRemoteSnapshotVersion(t){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return R.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),R.resolve()}kn(t){this.Fr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Nr=new Vr(n),this.highestTargetId=n),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,n){return this.kn(n),this.targetCount+=1,R.resolve()}updateTargetData(t,n){return this.kn(n),R.resolve()}removeTargetData(t,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),R.waitFor(i).next(()=>s)}getTargetCount(t){return R.resolve(this.targetCount)}getTargetData(t,n){const r=this.Fr.get(n)||null;return R.resolve(r)}addMatchingKeys(t,n,r){return this.Or.Er(n,r),R.resolve()}removeMatchingKeys(t,n,r){this.Or.Ar(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(t,o))}),R.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.Or.Rr(n),R.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Or.mr(n);return R.resolve(r)}containsKey(t,n){return R.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t,n){this.Br={},this.overlays={},this.Lr=new _c(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new fI(this),this.indexManager=new nI,this.remoteDocumentCache=function(s){return new uI(s)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new tI(n),this.Kr=new aI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new lI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new cI(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,n,r){F("MemoryPersistence","Starting transaction:",t);const s=new pI(this.Lr.next());return this.referenceDelegate.$r(),r(s).next(i=>this.referenceDelegate.Ur(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Wr(t,n){return R.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class pI extends Jw{constructor(t){super(),this.currentSequenceNumber=t}}class Sc{constructor(t){this.persistence=t,this.Gr=new Pc,this.zr=null}static jr(t){return new Sc(t)}get Hr(){if(this.zr)return this.zr;throw G()}addReference(t,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),R.resolve()}removeReference(t,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(t,n){return this.Hr.add(n.toString()),R.resolve()}removeTarget(t,n){this.Gr.Rr(n.targetId).forEach(s=>this.Hr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.Hr.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}$r(){this.zr=new Set}Ur(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Hr,r=>{const s=H.fromPath(r);return this.Jr(t,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.zr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Jr(t,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(t){return 0}Jr(t,n){return R.or([()=>R.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Wr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ki=r,this.qi=s}static Qi(t,n){let r=nt(),s=nt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new bc(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,n){this.Gi=t,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.zi(t,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ji(t,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new mI;return this.Hi(t,n,o).next(a=>{if(i.result=a,this.$i)return this.Ji(t,n,o,a.size)})}).next(()=>i.result)}Ji(t,n,r,s){return r.documentReadCount<this.Ui?(Qr()<=ot.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ar(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),R.resolve()):(Qr()<=ot.DEBUG&&F("QueryEngine","Query:",ar(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Wi*s?(Qr()<=ot.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ar(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$e(n))):R.resolve())}zi(t,n){if(Dh(n))return R.resolve(null);let r=$e(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=qi(n,null,"F"),r=$e(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const o=nt(...i);return this.Gi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const c=this.Yi(n,a);return this.Zi(n,c,o,l.readTime)?this.zi(t,qi(n,null,"F")):this.Xi(t,c,n,l)}))})))}ji(t,n,r,s){return Dh(n)||s.isEqual(Y.min())?R.resolve(null):this.Gi.getDocuments(t,r).next(i=>{const o=this.Yi(n,i);return this.Zi(n,o,r,s)?R.resolve(null):(Qr()<=ot.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ar(n)),this.Xi(t,o,n,Ww(s,-1)).next(a=>a))})}Yi(t,n){let r=new zt(Yp(t));return n.forEach((s,i)=>{No(t,i)&&(r=r.add(i))}),r}Zi(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Hi(t,n,r){return Qr()<=ot.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ar(n)),this.Gi.getDocumentsMatchingQuery(t,n,Rn.min(),r)}Xi(t,n,r,s){return this.Gi.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,n,r,s){this.persistence=t,this.es=n,this.serializer=s,this.ts=new Ct(ct),this.ns=new $r(i=>Tc(i),wc),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(r)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new oI(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ts))}}function yI(e,t,n,r){return new _I(e,t,n,r)}async function ym(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.os(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=nt();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function EI(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let m=R.resolve();return f.forEach(E=>{m=m.next(()=>u.getEntry(l,E)).next(w=>{const I=c.docVersions.get(E);vt(I!==null),w.version.compareTo(I)<0&&(h.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,t,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=nt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,s))})}function Em(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.qr.getLastRemoteSnapshotVersion(n))}function vI(e,t){const n=tt(e),r=t.snapshotVersion;let s=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});s=n.ts;const a=[];t.targetChanges.forEach((u,h)=>{const f=s.get(h);if(!f)return;a.push(n.qr.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.qr.addMatchingKeys(i,u.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(h)!==null?m=m.withResumeToken(ee.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),s=s.insert(h,m),function(w,I,P){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(f,m,u)&&a.push(n.qr.updateTargetData(i,m))});let l=rn(),c=nt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(TI(i,o,t.documentUpdates).next(u=>{l=u.us,c=u.cs})),!r.isEqual(Y.min())){const u=n.qr.getLastRemoteSnapshotVersion(i).next(h=>n.qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return R.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ts=s,i))}function TI(e,t,n){let r=nt(),s=nt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let o=rn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Y.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:s}})}function wI(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function II(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.qr.getTargetData(r,t).next(i=>i?(s=i,R.resolve(s)):n.qr.allocateTargetId(r).next(o=>(s=new gn(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(t,r.targetId)),r})}async function pl(e,t,n){const r=tt(e),s=r.ts.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ys(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ts=r.ts.remove(t),r.ns.delete(s.target)}function jh(e,t,n){const r=tt(e);let s=Y.min(),i=nt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=tt(l),f=h.ns.get(u);return f!==void 0?R.resolve(h.ts.get(f)):h.qr.getTargetData(c,u)}(r,o,$e(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,t,n?s:Y.min(),n?i:nt())).next(a=>(AI(r,m0(t),a),{documents:a,ls:i})))}function AI(e,t,n){let r=e.rs.get(t)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.rs.set(t,r)}class qh{constructor(){this.activeTargetIds=T0()}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RI{constructor(){this.eo=new qh,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,n,r){this.no[t]=n}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new qh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{ro(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi=null;function Ea(){return gi===null?gi=function(){return 268435456+Math.round(2147483648*Math.random())}():gi++,"0x"+gi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class bI extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${s}/databases/${i}`,this.po=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get yo(){return!1}wo(n,r,s,i,o){const a=Ea(),l=this.So(n,r);F("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,i,o),this.Do(n,l,c,s).then(u=>(F("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Cr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}Co(n,r,s,i,o,a){return this.wo(n,r,s,i,o)}bo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}So(n,r){const s=PI[n];return`${this.mo}/v1/${r}:${s}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,n,r,s){const i=Ea();return new Promise((o,a)=>{const l=new Lw;l.setWithCredentials(!0),l.listenOnce(Ow.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _a.NO_ERROR:const u=l.getResponseJson();F(Gt,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(u)),o(u);break;case _a.TIMEOUT:F(Gt,`RPC '${t}' ${i} timed out`),a(new M(v.DEADLINE_EXCEEDED,"Request time out"));break;case _a.HTTP_ERROR:const h=l.getStatus();if(F(Gt,`RPC '${t}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const E=function(I){const P=I.toLowerCase().replace(/_/g,"-");return Object.values(v).indexOf(P)>=0?P:v.UNKNOWN}(m.status);a(new M(E,m.message))}else a(new M(v.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new M(v.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{F(Gt,`RPC '${t}' ${i} completed.`)}});const c=JSON.stringify(s);F(Gt,`RPC '${t}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}vo(t,n,r){const s=Ea(),i=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Nw(),a=kw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");F(Gt,`Creating RPC '${t}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,m=!1;const E=new SI({co:I=>{m?F(Gt,`Not sending because RPC '${t}' stream ${s} is closed:`,I):(f||(F(Gt,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),F(Gt,`RPC '${t}' stream ${s} sending:`,I),h.send(I))},lo:()=>h.close()}),w=(I,P,N)=>{I.listen(P,L=>{try{N(L)}catch(K){setTimeout(()=>{throw K},0)}})};return w(h,di.EventType.OPEN,()=>{m||F(Gt,`RPC '${t}' stream ${s} transport opened.`)}),w(h,di.EventType.CLOSE,()=>{m||(m=!0,F(Gt,`RPC '${t}' stream ${s} transport closed`),E.Ro())}),w(h,di.EventType.ERROR,I=>{m||(m=!0,Cr(Gt,`RPC '${t}' stream ${s} transport errored:`,I),E.Ro(new M(v.UNAVAILABLE,"The operation could not be completed")))}),w(h,di.EventType.MESSAGE,I=>{var P;if(!m){const N=I.data[0];vt(!!N);const L=N,K=L.error||((P=L[0])===null||P===void 0?void 0:P.error);if(K){F(Gt,`RPC '${t}' stream ${s} received error:`,K);const U=K.status;let ut=function(yt){const lt=bt[yt];if(lt!==void 0)return cm(lt)}(U),At=K.message;ut===void 0&&(ut=v.INTERNAL,At="Unknown error status: "+U+" with message "+K.message),m=!0,E.Ro(new M(ut,At)),h.close()}else F(Gt,`RPC '${t}' stream ${s} received:`,N),E.Vo(N)}}),w(a,Mw.STAT_EVENT,I=>{I.stat===vh.PROXY?F(Gt,`RPC '${t}' stream ${s} detected buffering proxy`):I.stat===vh.NOPROXY&&F(Gt,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.Ao()},0),E}}function va(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(e){return new U0(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(t,n,r=1e3,s=1.5,i=6e4){this.si=t,this.timerId=n,this.Fo=r,this.Mo=s,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),t())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(t,n,r,s,i,o,a,l){this.si=t,this.Ko=r,this.$o=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new vm(t,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,t!==4?this.zo.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(nn(n.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===v.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(n)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Uo===n&&this.s_(r,s)},r=>{t(()=>{const s=new M(v.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(s)})})}s_(t,n){const r=this.i_(this.Uo);this.stream=this.__(t,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(s=>{r(()=>this.o_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(t){return F("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return n=>{this.si.enqueueAndForget(()=>this.Uo===t?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class VI extends Tm{constructor(t,n,r,s,i,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}__(t,n){return this.connection.vo("Listen",t,n)}onMessage(t){this.zo.reset();const n=q0(this.serializer,t),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?je(o.readTime):Y.min()}(t);return this.listener.a_(n,r)}u_(t){const n={};n.database=dl(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ll(l)?{documents:K0(i,l)}:{query:G0(i,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fm(i,o.resumeToken);const c=ul(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){a.readTime=Ki(i,o.snapshotVersion.toTimestamp());const c=ul(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const r=Q0(this.serializer,t);r&&(n.labels=r),this.e_(n)}c_(t){const n={};n.database=dl(this.serializer),n.removeTarget=t,this.e_(n)}}class DI extends Tm{constructor(t,n,r,s,i,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,n){return this.connection.vo("Write",t,n)}onMessage(t){if(vt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const n=z0(t.writeResults,t.commitTime),r=je(t.commitTime);return this.listener.I_(r,n)}return vt(!t.writeResults||t.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=dl(this.serializer),this.e_(t)}P_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>H0(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI extends class{}{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.d_=!1}A_(){if(this.d_)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.wo(t,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(v.UNKNOWN,s.toString())})}Co(t,n,r,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Co(t,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===v.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new M(v.UNKNOWN,i.toString())})}terminate(){this.d_=!0}}class NI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(t){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,t==="Online"&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(nn(n),this.f_=!1):F("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro(o=>{r.enqueueAndForget(async()=>{er(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=tt(l);c.C_.add(4),await Zs(c),c.M_.set("Unknown"),c.C_.delete(4),await Fo(c)}(this))})}),this.M_=new NI(r,s)}}async function Fo(e){if(er(e))for(const t of e.v_)await t(!0)}async function Zs(e){for(const t of e.v_)await t(!1)}function wm(e,t){const n=tt(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),xc(n)?Dc(n):jr(n).Ho()&&Vc(n,t))}function Im(e,t){const n=tt(e),r=jr(n);n.D_.delete(t),r.Ho()&&Am(n,t),n.D_.size===0&&(r.Ho()?r.Zo():er(n)&&n.M_.set("Unknown"))}function Vc(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}jr(e).u_(t)}function Am(e,t){e.x_.Oe(t),jr(e).c_(t)}function Dc(e){e.x_=new M0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),jr(e).start(),e.M_.g_()}function xc(e){return er(e)&&!jr(e).jo()&&e.D_.size>0}function er(e){return tt(e).C_.size===0}function Rm(e){e.x_=void 0}async function OI(e){e.D_.forEach((t,n)=>{Vc(e,t)})}async function MI(e,t){Rm(e),xc(e)?(e.M_.w_(t),Dc(e)):e.M_.set("Unknown")}async function LI(e,t,n){if(e.M_.set("Online"),t instanceof hm&&t.state===2&&t.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.D_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.D_.delete(a),s.x_.removeTarget(a))}(e,t)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Gi(e,r)}else if(t instanceof Ai?e.x_.$e(t):t instanceof um?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Y.min()))try{const r=await Em(e.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.x_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.D_.get(c);u&&i.D_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.D_.get(l);if(!u)return;i.D_.set(l,u.withResumeToken(ee.EMPTY_BYTE_STRING,u.snapshotVersion)),Am(i,l);const h=new gn(u.target,l,c,u.sequenceNumber);Vc(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){F("RemoteStore","Failed to raise snapshot:",r),await Gi(e,r)}}async function Gi(e,t,n){if(!Ys(t))throw t;e.C_.add(1),await Zs(e),e.M_.set("Offline"),n||(n=()=>Em(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Fo(e)})}function Cm(e,t){return t().catch(n=>Gi(e,n,t))}async function Bo(e){const t=tt(e),n=Pn(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;FI(t);)try{const s=await wI(t.localStore,r);if(s===null){t.b_.length===0&&n.Zo();break}r=s.batchId,BI(t,s)}catch(s){await Gi(t,s)}Pm(t)&&Sm(t)}function FI(e){return er(e)&&e.b_.length<10}function BI(e,t){e.b_.push(t);const n=Pn(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Pm(e){return er(e)&&!Pn(e).jo()&&e.b_.length>0}function Sm(e){Pn(e).start()}async function UI(e){Pn(e).E_()}async function $I(e){const t=Pn(e);for(const n of e.b_)t.P_(n.mutations)}async function jI(e,t,n){const r=e.b_.shift(),s=Ac.from(r,t,n);await Cm(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Bo(e)}async function qI(e,t){t&&Pn(e).h_&&await async function(r,s){if(function(o){return N0(o)&&o!==v.ABORTED}(s.code)){const i=r.b_.shift();Pn(r).Yo(),await Cm(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bo(r)}}(e,t),Pm(e)&&Sm(e)}async function zh(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const r=er(n);n.C_.add(3),await Zs(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Fo(n)}async function HI(e,t){const n=tt(e);t?(n.C_.delete(2),await Fo(n)):t||(n.C_.add(2),await Zs(n),n.M_.set("Unknown"))}function jr(e){return e.O_||(e.O_=function(n,r,s){const i=tt(n);return i.A_(),new VI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:OI.bind(null,e),Io:MI.bind(null,e),a_:LI.bind(null,e)}),e.v_.push(async t=>{t?(e.O_.Yo(),xc(e)?Dc(e):e.M_.set("Unknown")):(await e.O_.stop(),Rm(e))})),e.O_}function Pn(e){return e.N_||(e.N_=function(n,r,s){const i=tt(n);return i.A_(),new DI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{ho:UI.bind(null,e),Io:qI.bind(null,e),T_:$I.bind(null,e),I_:jI.bind(null,e)}),e.v_.push(async t=>{t?(e.N_.Yo(),await Bo(e)):(await e.N_.stop(),e.b_.length>0&&(F("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))})),e.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const o=Date.now()+r,a=new Nc(t,n,o,s,i);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(v.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kc(e,t){if(nn("AsyncQueue",`${t}: ${e}`),Ys(e))return new M(v.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t){this.comparator=t?(n,r)=>t(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Zr(),this.sortedSet=new Ct(this.comparator)}static emptySet(t){return new Er(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Er)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Er;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this.B_=new Ct(H.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):G():this.B_=this.B_.insert(n,t)}L_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Dr{constructor(t,n,r,s,i,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Dr(t,n,Er.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&xo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.k_=void 0,this.listeners=[]}}class KI{constructor(){this.queries=new $r(t=>Qp(t),xo),this.onlineState="Unknown",this.q_=new Set}}async function GI(e,t){const n=tt(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new zI),s)try{i.k_=await n.onListen(r)}catch(o){const a=kc(o,`Initialization of query '${ar(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,i),i.listeners.push(t),t.Q_(n.onlineState),i.k_&&t.K_(i.k_)&&Oc(n)}async function WI(e,t){const n=tt(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(t);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function QI(e,t){const n=tt(e);let r=!1;for(const s of t){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.K_(s)&&(r=!0);o.k_=s}}r&&Oc(n)}function YI(e,t,n){const r=tt(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function Oc(e){e.q_.forEach(t=>{t.next()})}class XI{constructor(t,n,r){this.query=t,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Dr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.W_?this.z_(t)&&(this.U_.next(t),n=!0):this.j_(t,this.onlineState)&&(this.H_(t),n=!0),this.G_=t,n}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),n=!0),n}j_(t,n){if(!t.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}z_(t){if(t.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(t){t=Dr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(t){this.key=t}}class Vm{constructor(t){this.key=t}}class JI{constructor(t,n){this.query=t,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=nt(),this.mutatedKeys=nt(),this._a=Yp(t),this.aa=new Er(this._a)}get ua(){return this.ia}ca(t,n){const r=n?n.la:new Kh,s=n?n.aa:this.aa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{const f=s.get(u),m=No(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?E!==w&&(r.track({type:3,doc:m}),I=!0):this.ha(f,m)||(r.track({type:2,doc:m}),I=!0,(l&&this._a(m,l)>0||c&&this._a(m,c)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),I=!0):f&&!m&&(r.track({type:1,doc:f}),I=!0,(l||c)&&(a=!0)),I&&(m?(o=o.add(m),i=w?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{aa:o,la:r,Zi:a,mutatedKeys:i}}ha(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const o=t.la.L_();o.sort((u,h)=>function(m,E){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return w(m)-w(E)}(u.type,h.type)||this._a(u.doc,h.doc)),this.Pa(r),s=s!=null&&s;const a=n&&!s?this.Ia():[],l=this.oa.size===0&&this.current&&!s?1:0,c=l!==this.sa;return this.sa=l,o.length!==0||c?{snapshot:new Dr(this.query,t.aa,i,o,t.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Kh,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=nt(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return t.forEach(r=>{this.oa.has(r)||n.push(new Vm(r))}),this.oa.forEach(r=>{t.has(r)||n.push(new bm(r))}),n}da(t){this.ia=t.ls,this.oa=nt();const n=this.ca(t.documents);return this.applyChanges(n,!0)}Aa(){return Dr.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class ZI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class tA{constructor(t){this.key=t,this.Ra=!1}}class eA{constructor(t,n,r,s,i,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new $r(a=>Qp(a),xo),this.fa=new Map,this.ga=new Set,this.pa=new Ct(H.comparator),this.ya=new Map,this.wa=new Pc,this.Sa={},this.ba=new Map,this.Da=Vr.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function nA(e,t){const n=fA(e);let r,s;const i=n.ma.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Aa();else{const o=await II(n.localStore,$e(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await rA(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&wm(n.remoteStore,o)}return s}async function rA(e,t,n,r,s){e.va=(h,f,m)=>async function(w,I,P,N){let L=I.view.ca(P);L.Zi&&(L=await jh(w.localStore,I.query,!1).then(({documents:At})=>I.view.ca(At,L)));const K=N&&N.targetChanges.get(I.targetId),U=N&&N.targetMismatches.get(I.targetId)!=null,ut=I.view.applyChanges(L,w.isPrimaryClient,K,U);return Wh(w,I.targetId,ut.Ta),ut.snapshot}(e,h,f,m);const i=await jh(e.localStore,t,!0),o=new JI(t,i.ls),a=o.ca(i.documents),l=Js.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);Wh(e,n,c.Ta);const u=new ZI(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function sA(e,t){const n=tt(e),r=n.ma.get(t),s=n.fa.get(r.targetId);if(s.length>1)return n.fa.set(r.targetId,s.filter(i=>!xo(i,t))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await pl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Im(n.remoteStore,r.targetId),ml(n,r.targetId)}).catch(Qs)):(ml(n,r.targetId),await pl(n.localStore,r.targetId,!0))}async function iA(e,t,n){const r=dA(e);try{const s=await function(o,a){const l=tt(o),c=kt.now(),u=a.reduce((m,E)=>m.add(E.key),nt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=rn(),w=nt();return l.ss.getEntries(m,u).next(I=>{E=I,E.forEach((P,N)=>{N.isValidDocument()||(w=w.add(P))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(I=>{h=I;const P=[];for(const N of a){const L=S0(N,h.get(N.key).overlayedDocument);L!=null&&P.push(new tr(N.key,L,$p(L.value.mapValue),tn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,P,a)}).next(I=>{f=I;const P=I.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(m,I.batchId,P)})}).then(()=>({batchId:f.batchId,changes:Jp(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new Ct(ct)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(r,s.batchId,n),await ti(r,s.changes),await Bo(r.remoteStore)}catch(s){const i=kc(s,"Failed to persist write");n.reject(i)}}async function Dm(e,t){const n=tt(e);try{const r=await vI(n.localStore,t);t.targetChanges.forEach((s,i)=>{const o=n.ya.get(i);o&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ra=!0:s.modifiedDocuments.size>0?vt(o.Ra):s.removedDocuments.size>0&&(vt(o.Ra),o.Ra=!1))}),await ti(n,r,t)}catch(r){await Qs(r)}}function Gh(e,t,n){const r=tt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ma.forEach((i,o)=>{const a=o.view.Q_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.listeners)f.Q_(a)&&(c=!0)}),c&&Oc(l)}(r.eventManager,t),s.length&&r.Va.a_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function oA(e,t,n){const r=tt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.ya.get(t),i=s&&s.key;if(i){let o=new Ct(H.comparator);o=o.insert(i,Qt.newNoDocument(i,Y.min()));const a=nt().add(i),l=new Mo(Y.min(),new Map,new Ct(ct),o,a);await Dm(r,l),r.pa=r.pa.remove(i),r.ya.delete(t),Mc(r)}else await pl(r.localStore,t,!1).then(()=>ml(r,t,n)).catch(Qs)}async function aA(e,t){const n=tt(e),r=t.batch.batchId;try{const s=await EI(n.localStore,t);Nm(n,r,null),xm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ti(n,s)}catch(s){await Qs(s)}}async function lA(e,t,n){const r=tt(e);try{const s=await function(o,a){const l=tt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(vt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,t);Nm(r,t,n),xm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ti(r,s)}catch(s){await Qs(s)}}function xm(e,t){(e.ba.get(t)||[]).forEach(n=>{n.resolve()}),e.ba.delete(t)}function Nm(e,t,n){const r=tt(e);let s=r.Sa[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Sa[r.currentUser.toKey()]=s}}function ml(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach(r=>{e.wa.containsKey(r)||km(e,r)})}function km(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);n!==null&&(Im(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Mc(e))}function Wh(e,t,n){for(const r of n)r instanceof bm?(e.wa.addReference(r.key,t),cA(e,r)):r instanceof Vm?(F("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||km(e,r.key)):G()}function cA(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(F("SyncEngine","New document in limbo: "+n),e.ga.add(r),Mc(e))}function Mc(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new H(It.fromString(t)),r=e.Da.next();e.ya.set(r,new tA(n)),e.pa=e.pa.insert(n,r),wm(e.remoteStore,new gn($e(Ic(n.path)),r,"TargetPurposeLimboResolution",_c._e))}}async function ti(e,t,n){const r=tt(e),s=[],i=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,t,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=bc.Qi(l.targetId,c);i.push(u)}}))}),await Promise.all(o),r.Va.a_(s),await async function(l,c){const u=tt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>R.forEach(c,f=>R.forEach(f.ki,m=>u.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>R.forEach(f.qi,m=>u.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Ys(h))throw h;F("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=u.ts.get(f),E=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(E);u.ts=u.ts.insert(f,w)}}}(r.localStore,i))}async function uA(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){F("SyncEngine","User change. New user:",t.toKey());const r=await ym(n.localStore,t);n.currentUser=t,function(i,o){i.ba.forEach(a=>{a.forEach(l=>{l.reject(new M(v.CANCELLED,o))})}),i.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ti(n,r._s)}}function hA(e,t){const n=tt(e),r=n.ya.get(t);if(r&&r.Ra)return nt().add(r.key);{let s=nt();const i=n.fa.get(t);if(!i)return s;for(const o of i){const a=n.ma.get(o);s=s.unionWith(a.view.ua)}return s}}function fA(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oA.bind(null,t),t.Va.a_=QI.bind(null,t.eventManager),t.Va.Fa=YI.bind(null,t.eventManager),t}function dA(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lA.bind(null,t),t}class Qh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Lo(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return yI(this.persistence,new gI,t.initialUser,this.serializer)}createPersistence(t){return new dI(Sc.jr,this.serializer)}createSharedClientState(t){return new RI}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pA{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uA.bind(null,this.syncEngine),await HI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new KI}()}createDatastore(t){const n=Lo(t.databaseInfo.databaseId),r=function(i){return new bI(i)}(t.databaseInfo);return function(i,o,a,l){return new xI(i,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,o,a){return new kI(r,s,i,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Gh(this.syncEngine,n,0),function(){return Hh.D()?new Hh:new CI}())}createSyncEngine(t,n){return function(s,i,o,a,l,c,u){const h=new eA(s,i,o,a,l,c);return u&&(h.Ca=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=tt(n);F("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await Zs(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):nn("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(t,n,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Wt.UNAUTHENTICATED,this.clientId=Fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{F("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(F("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(v.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=kc(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ta(e,t){e.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ym(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Yh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await yA(e);F("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(s=>zh(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>zh(t.remoteStore,i)),e._onlineComponents=t}function _A(e){return e.name==="FirebaseError"?e.code===v.FAILED_PRECONDITION||e.code===v.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function yA(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ta(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!_A(n))throw n;Cr("Error using user provided cache. Falling back to memory cache: "+n),await Ta(e,new Qh)}}else F("FirestoreClient","Using default OfflineComponentProvider"),await Ta(e,new Qh);return e._offlineComponents}async function Om(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),await Yh(e,e._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),await Yh(e,new pA))),e._onlineComponents}function EA(e){return Om(e).then(t=>t.syncEngine)}async function Xh(e){const t=await Om(e),n=t.eventManager;return n.onListen=nA.bind(null,t.syncEngine),n.onUnlisten=sA.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(e,t,n){if(!n)throw new M(v.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function vA(e,t,n,r){if(t===!0&&r===!0)throw new M(v.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Zh(e){if(!H.isDocumentKey(e))throw new M(v.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function tf(e){if(H.isDocumentKey(e))throw new M(v.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Uo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":G()}function fs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(v.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uo(e);throw new M(v.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function TA(e,t){if(t<=0)throw new M(v.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new M(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new M(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}vA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mm((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new M(v.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $o{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ef({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new M(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ef(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bw;switch(r.type){case"firstParty":return new qw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(v.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jh.get(n);r&&(F("ComponentProvider","Removing Datastore"),Jh.delete(n),r.terminate())}(this),Promise.resolve()}}function wA(e,t,n,r={}){var s;const i=(e=fs(e,$o))._getSettings(),o=`${t}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Wt.MOCK_USER;else{a=_v(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new M(v.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Wt(c)}e._authCredentials=new Uw(new Lp(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Vn(this.firestore,t,this._query)}}class ge{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ge(this.firestore,t,this._key)}}class Tn extends Vn{constructor(t,n,r){super(t,n,Ic(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ge(this.firestore,null,new H(t))}withConverter(t){return new Tn(this.firestore,t,this._path)}}function IA(e,t,...n){if(e=Kn(e),Lm("collection","path",t),e instanceof $o){const r=It.fromString(t,...n);return tf(r),new Tn(e,null,r)}{if(!(e instanceof ge||e instanceof Tn))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(It.fromString(t,...n));return tf(r),new Tn(e.firestore,null,r)}}function AA(e,t,...n){if(e=Kn(e),arguments.length===1&&(t=Fp.newId()),Lm("doc","path",t),e instanceof $o){const r=It.fromString(t,...n);return Zh(r),new ge(e,null,new H(r))}{if(!(e instanceof ge||e instanceof Tn))throw new M(v.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(It.fromString(t,...n));return Zh(r),new ge(e.firestore,e instanceof Tn?e.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new vm(this,"async_queue_retry"),this.iu=()=>{const n=va();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const t=va();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const n=va();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise(()=>{});const n=new zn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ya.push(t),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!Ys(t))throw t;F("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(t){const n=this.Ja.then(()=>(this.tu=!0,t().catch(r=>{this.eu=r,this.tu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw nn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(t,n,r){this.su(),this.ru.indexOf(t)>-1&&(n=0);const s=Nc.createAndSchedule(this,t,n,r,i=>this.au(i));return this.Xa.push(s),s}su(){this.eu&&G()}verifyOperationInProgress(){}async uu(){let t;do t=this.Ja,await t;while(t!==this.Ja)}cu(t){for(const n of this.Xa)if(n.timerId===t)return!0;return!1}lu(t){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.uu()})}hu(t){this.ru.push(t)}au(t){const n=this.Xa.indexOf(t);this.Xa.splice(n,1)}}function nf(e){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(e,["next","error","complete"])}class Wi extends $o{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=function(){return new RA}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bm(this),this._firestoreClient.terminate()}}function CA(e,t){const n=typeof e=="object"?e:TT(),r=typeof e=="string"?e:t||"(default)",s=_T(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mv("firestore");i&&wA(s,...i)}return s}function Fm(e){return e._firestoreClient||Bm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Bm(e){var t,n,r;const s=e._freezeSettings(),i=function(a,l,c,u){return new e0(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Mm(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new gA(e._authCredentials,e._appCheckCredentials,e._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xr(ee.fromBase64String(t))}catch(n){throw new M(v.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new xr(ee.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new M(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new M(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new M(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=/^__.*__$/;class SA{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Xs(t,this.data,n,this.fieldTransforms)}}function $m(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class Bc{constructor(t,n,r,s,i,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new Bc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tu({path:r,du:!1});return s.Au(t),s}Ru(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Tu({path:r,du:!1});return s.Pu(),s}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return Qi(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(t.length===0)throw this.mu("Document fields must not be empty");if($m(this.Iu)&&PA.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class bA{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Lo(t)}pu(t,n,r,s=!1){return new Bc({Iu:t,methodName:n,gu:r,path:qt.emptyPath(),du:!1,fu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jm(e){const t=e._freezeSettings(),n=Lo(e._databaseId);return new bA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function VA(e,t,n,r,s,i={}){const o=e.pu(i.merge||i.mergeFields?2:0,t,n,s);zm("Data must be an object, but it was:",o,r);const a=qm(r,o);let l,c;if(i.merge)l=new Ce(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const f=xA(t,h,n);if(!o.contains(f))throw new M(v.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);kA(u,f)||u.push(f)}l=new Ce(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new SA(new ve(a),l,c)}function DA(e,t,n,r=!1){return Uc(n,e.pu(r?4:3,t))}function Uc(e,t){if(Hm(e=Kn(e)))return zm("Unsupported field value:",t,e),qm(e,t);if(e instanceof Um)return function(r,s){if(!$m(s.Iu))throw s.mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&t.Iu!==4)throw t.mu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Uc(a,s.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=Kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=kt.fromDate(r);return{timestampValue:Ki(s.serializer,i)}}if(r instanceof kt){const i=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ki(s.serializer,i)}}if(r instanceof Fc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xr)return{bytesValue:fm(s.serializer,r._byteString)};if(r instanceof ge){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Cc(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.mu(`Unsupported field value: ${Uo(r)}`)}(e,t)}function qm(e,t){const n={};return Bp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Br(e,(r,s)=>{const i=Uc(s,t.Eu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Hm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof kt||e instanceof Fc||e instanceof xr||e instanceof ge||e instanceof Um)}function zm(e,t,n){if(!Hm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Uo(n);throw r==="an object"?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function xA(e,t,n){if((t=Kn(t))instanceof Lc)return t._internalPath;if(typeof t=="string")return Km(e,t);throw Qi("Field path arguments must be of type string or ",e,!1,void 0,n)}const NA=new RegExp("[~\\*/\\[\\]]");function Km(e,t,n){if(t.search(NA)>=0)throw Qi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Lc(...t.split("."))._internalPath}catch{throw Qi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Qi(e,t,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new M(v.INVALID_ARGUMENT,a+e+l)}function kA(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new OA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(jo("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OA extends Gm{data(){return super.data()}}function jo(e,t){return typeof t=="string"?Km(e,t):t instanceof Lc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new M(v.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $c{}class jc extends $c{}function LA(e,t,...n){let r=[];t instanceof $c&&r.push(t),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof qc).length,a=i.filter(l=>l instanceof qo).length;if(o>1||o>0&&a>0)throw new M(v.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class qo extends jc{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new qo(t,n,r)}_apply(t){const n=this._parse(t);return Wm(t._query,n),new Vn(t.firestore,t.converter,cl(t._query,n))}_parse(t){const n=jm(t.firestore);return function(i,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new M(v.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){sf(h,u);const m=[];for(const E of h)m.push(rf(l,i,E));f={arrayValue:{values:m}}}else f=rf(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||sf(h,u),f=DA(a,o,h,u==="in"||u==="not-in");return Dt.create(c,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function V1(e,t,n){const r=t,s=jo("where",e);return qo._create(s,r,n)}class qc extends $c{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new qc(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:De.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Wm(o,l),o=cl(o,l)}(t._query,n),new Vn(t.firestore,t.converter,cl(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hc extends jc{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Hc(t,n)}_apply(t){const n=function(s,i,o){if(s.startAt!==null)throw new M(v.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new M(v.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ks(i,o)}(t._query,this._field,this._direction);return new Vn(t.firestore,t.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ur(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}}function FA(e,t="asc"){const n=t,r=jo("orderBy",e);return Hc._create(r,n)}class zc extends jc{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new zc(t,n,r)}_apply(t){return new Vn(t.firestore,t.converter,qi(t._query,this._limit,this._limitType))}}function BA(e){return TA("limit",e),zc._create("limit",e,"F")}function rf(e,t,n){if(typeof(n=Kn(n))=="string"){if(n==="")throw new M(v.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wp(t)&&n.indexOf("/")!==-1)throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(It.fromString(n));if(!H.isDocumentKey(r))throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rh(e,new H(r))}if(n instanceof ge)return Rh(e,n._key);throw new M(v.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uo(n)}.`)}function sf(e,t){if(!Array.isArray(e)||e.length===0)throw new M(v.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Wm(e,t){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new M(v.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new M(v.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class UA{convertValue(t,n="none"){switch(Yn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Vt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Qn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw G()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Br(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(t){return new Fc(Vt(t.latitude),Vt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ec(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ds(t));default:return null}}convertTimestamp(t){const n=Cn(t);return new kt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=It.fromString(t);vt(_m(r));const s=new xs(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||nn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qm extends Gm{constructor(t,n,r,s,i,o){super(t,n,r,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Ri(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(jo("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ri extends Qm{data(t={}){return super.data(t)}}class jA{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new es(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new Ri(this._firestore,this._userDataWriter,r.key,r,new es(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new M(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Ri(s._firestore,s._userDataWriter,a.doc.key,a.doc,new es(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Ri(s._firestore,s._userDataWriter,a.doc.key,a.doc,new es(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:qA(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}class Ym extends UA{constructor(t){super(),this.firestore=t}convertBytes(t){return new xr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ge(this.firestore,null,n)}}function D1(e,t){const n=fs(e.firestore,Wi),r=AA(e),s=$A(e.converter,t);return HA(n,[VA(jm(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function of(e,...t){var n,r,s;e=Kn(e);let i={includeMetadataChanges:!1},o=0;typeof t[o]!="object"||nf(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(nf(t[o])){const h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),t[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(e instanceof ge)c=fs(e.firestore,Wi),u=Ic(e._key.path),l={next:h=>{t[o]&&t[o](zA(c,e,h))},error:t[o+1],complete:t[o+2]};else{const h=fs(e,Vn);c=fs(h.firestore,Wi),u=h._query;const f=new Ym(c);l={next:m=>{t[o]&&t[o](new jA(c,f,h,m))},error:t[o+1],complete:t[o+2]},MA(e._query)}return function(f,m,E,w){const I=new mA(w),P=new XI(m,I,E);return f.asyncQueue.enqueueAndForget(async()=>GI(await Xh(f),P)),()=>{I.Na(),f.asyncQueue.enqueueAndForget(async()=>WI(await Xh(f),P))}}(Fm(c),u,a,l)}function HA(e,t){return function(r,s){const i=new zn;return r.asyncQueue.enqueueAndForget(async()=>iA(await EA(r),s,i)),i.promise}(Fm(e),t)}function zA(e,t,n){const r=n.docs.get(t._key),s=new Ym(e);return new Qm(e,s,t._key,r,new es(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){Fr=s})(vT),ki(new vs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Wi(new $w(r.getProvider("auth-internal")),new zw(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new M(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),gr(Th,"4.4.0",t),gr(Th,"4.4.0","esm2017")})();const KA={apiKey:"AIzaSyBmx3k3Fn9-2uF2rFmmE7TeAvRdnBmcqHw",authDomain:"bingo-card-generator-7335a.firebaseapp.com",projectId:"bingo-card-generator-7335a",storageBucket:"bingo-card-generator-7335a.appspot.com",messagingSenderId:"307692627485",appId:"1:307692627485:web:29128c71c307033f3c88f4"},GA=Dd(KA),WA=CA(GA);function gl(e){return mf()?(dg(e),!0):!1}function QA(e){return typeof e=="function"?e():ae(e)}const YA=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const XA=e=>typeof e<"u";function JA(e,t,n={}){const{immediate:r=!0}=n,s=Bs(!1);let i=null;function o(){i&&(clearTimeout(i),i=null)}function a(){s.value=!1,o()}function l(...c){o(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,e(...c)},QA(t))}return r&&(s.value=!0,YA&&l()),gl(a),{isPending:Sl(s),start:l,stop:a}}function af(e){const t=e.data();return t&&Object.defineProperty(t,"id",{value:e.id.toString(),writable:!1}),t}function ZA(e){var t;return(((t=e.path)==null?void 0:t.match(/\//g))||[]).length%2!==0}function t1(e,t=void 0,n={}){const{errorHandler:r=l=>console.error(l),autoDispose:s=!0}=n,i=te(e)?e:de(()=>e);let o=()=>{};const a=Bs(t);return ns(i,l=>{o(),i.value?ZA(i.value)?o=of(l,c=>{a.value=af(c)||null},r):o=of(l,c=>{a.value=c.docs.map(af).filter(XA)},r):a.value=t},{immediate:!0}),s===!0?gl(()=>{o()}):typeof s=="number"&&gl(()=>{JA(()=>{o()},s)}),a}const e1={fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"8.5 6 7 12"},_l=ce({__name:"IconCaret",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",e1,[X("path",{style:He({fill:t.color??"#fff"}),"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.79289 6.29289C9.18342 5.90237 9.81658 5.90237 10.2071 6.29289L15.2071 11.2929C15.5976 11.6834 15.5976 12.3166 15.2071 12.7071L10.2071 17.7071C9.81658 18.0976 9.18342 18.0976 8.79289 17.7071C8.40237 17.3166 8.40237 16.6834 8.79289 16.2929L13.0858 12L8.79289 7.70711C8.40237 7.31658 8.40237 6.68342 8.79289 6.29289Z"},null,4)]))}});function lf(e){const t=Math.floor((new Date().getTime()-e)/1e3);let n=Math.floor(t/31536e3);return n>=1?n+" years ago":(n=Math.floor(t/2592e3),n>=1?n+" months ago":(n=Math.floor(t/86400),n>=1?n+" days ago":(n=Math.floor(t/3600),n>=1?n+" hours ago":(n=Math.floor(t/60),n>=1?n+" minutes ago":t>5?Math.floor(t)+" seconds ago":t>0?"just now":"in the future "))))}const n1={class:"game"},r1={class:"description"},s1={class:"time-ago"},i1=ce({__name:"GameCard",props:{id:{},title:{},description:{},updatedAt:{},createdAt:{}},setup(e){const t=e,n=de(()=>t.updatedAt===t.createdAt?`Created ${lf(t.createdAt)}`:`Updated ${lf(t.updatedAt)}`);return(r,s)=>{const i=Ol("RouterLink");return Xt(),Fl(i,{to:`/game/${r.id}`},{default:Ae(()=>[X("div",n1,[X("h2",null,Ko(r.title),1),X("p",r1,Ko(r.description),1),X("p",s1,Ko(n.value),1),rt(_l,{color:"var(--color-background)",class:"arrow"})])]),_:1},8,["to"])}}}),o1=Us(i1,[["__scopeId","data-v-edce75ee"]]),a1={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l1=ce({__name:"IconPlus",props:{color:{}},setup(e){return(t,n)=>(Xt(),me("svg",a1,[X("path",{style:He({stroke:t.color??"#fff"}),d:"M4 12H20M12 4V20",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,4)]))}}),Ho=e=>(Nl("data-v-2d27884a"),e=e(),kl(),e),c1={class:"intro"},u1=Ho(()=>X("h1",null,[X("span",null,"Create and play."),X("br"),Oe(" Fun custom bingo games! ")],-1)),h1=Ho(()=>X("p",{class:"intro-text"}," A lot of boring meetings or simply want to make an event more fun? Create your own bingo game and share it with your friends and colleagues! ",-1)),f1={class:"button-container"},d1=Ho(()=>X("span",null,"Create a new game",-1)),p1=Ho(()=>X("p",null,"check out popular games",-1)),m1=ce({__name:"IntroComponent",emits:["scroll-to-games","example"],setup(e,{emit:t}){return(n,r)=>{const s=Ol("RouterLink");return Xt(),me("div",c1,[u1,h1,X("div",f1,[rt(s,{to:"/create",class:"start-new-button"},{default:Ae(()=>[rt(l1,{color:"var(--color-foreground-light)",class:"plus"}),d1]),_:1}),X("button",{class:"demo",onClick:r[0]||(r[0]=i=>n.$emit("scroll-to-games"))},[rt(_l,{color:"var(--color-primary-dark)",class:"arrow-down"}),p1,rt(_l,{color:"var(--color-primary-dark)",class:"arrow-down"})])])])}}}),g1=Us(m1,[["__scopeId","data-v-2d27884a"]]),_1=X("h1",null,"Most popular Bingo games",-1),y1={key:1,class:"no-games"},E1=ce({__name:"HomeView",setup(e){const t=LA(IA(WA,"games"),FA("updatedAt","desc"),BA(5)),n=t1(t,void 0,{autoDispose:!1}),r=Bs(null),s=()=>{if(!r.value)return;const o=r.value.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:o,behavior:"smooth"})};return(i,o)=>{var a;return Xt(),me(fe,null,[rt(g1,{onScrollToGames:s}),X("div",{class:"games-container",ref_key:"gamesContainer",ref:r},[_1,(a=ae(n))!=null&&a.length?(Xt(!0),me(fe,{key:0},p_(ae(n),l=>(Xt(),Fl(o1,{key:l.id,id:l.id,title:l.name,description:l.description,updatedAt:l.updatedAt,createdAt:l.createdAt},null,8,["id","title","description","updatedAt","createdAt"]))),128)):(Xt(),me("p",y1,"No games found"))],512)],64)}}}),v1=CE({history:qy("/"),scrollBehavior(){return{top:0}},routes:[{path:"/",name:"home",component:E1},{path:"/game/:id",name:"game",component:()=>ia(()=>import("./GameView-SMZPrNbS.js"),__vite__mapDeps([]))},{path:"/pricing",name:"pricing",component:()=>ia(()=>import("./PricingView-qtpK_nJv.js"),__vite__mapDeps([]))},{path:"/create",name:"create",component:()=>ia(()=>import("./CreateView-HhpR7XVh.js"),__vite__mapDeps([0,1]))}]}),Xm=Iy(rv);Xm.use(v1);Xm.mount("#app");export{Ae as A,_l as B,R1 as C,A1 as D,Nl as E,fe as F,kl as G,jl as T,Us as _,AA as a,ae as b,IA as c,ce as d,Xt as e,me as f,X as g,T1 as h,C1 as i,SE as j,WA as k,D1 as l,Bs as m,de as n,FA as o,t_ as p,LA as q,p_ as r,Zi as s,Ko as t,t1 as u,w1 as v,V1 as w,ry as x,I1 as y,rt as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/CreateView-HhpR7XVh.js","assets/CreateView-wV5Nqb_x.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}